<!DOCTYPE html>
<html>
<head>
  <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
  <script src="../../../download/jsviews.min.js"></script>
  <script src="../../sample-viewer.min.js"></script>
  <link href="../../../download/sample-tag-controls/grid/grid.css" rel="stylesheet" />
</head>
<body>

<div id="purchases"></div>

<script id="myTmpl" type="text/x-jsrender">
<em>Click on header to sort. Click on cell to edit categories, quantities or prices.</em><br/><br/>
<label>Sort by: <input data-link="~sortBy" /></label>
<label>Reverse sort: <input data-link="~reverseSort" type="checkbox" /></label>

<table class="grid" style="width:600px;"><thead><tr>
  <th class="sort" style="width:100px;" data-link=" {on ~sortCol ~sortBy ~reverseSort 'category'}"><div>Category
<img data-link="visible{:~sortBy === 'category'} src{:~reverseSort ? 'images/down.png' : 'images/up.png'}" /></div></th>
  <th class="sort" style="width:100px;" data-link=" {on ~sortCol ~sortBy ~reverseSort 'quantity'}"><div>Quantity
<img data-link="visible{:~sortBy === 'quantity'} src{:~reverseSort ? 'images/down.png' : 'images/up.png'}" /></div></th>
  <th><div>Total quantity</div></th>
  <th class="sort" style="width:100px;" data-link=" {on ~sortCol ~sortBy ~reverseSort 'price'}"><div>Price
<img data-link="visible{:~sortBy === 'price'} src{:~reverseSort ? 'images/down.png' : 'images/up.png'}" /></div></th>
  <th><div>Amount</div></th>
  <th><div>Total cost</div></th></tr>
</thead><tbody>
  {^{purchases lineItems sort=~sortBy reverse=~reverseSort }} 
    <tr>
      <td class="editable"><input data-link="category" style="width:80px;"/></td>
      <td class="editable"><input data-link="quantity" style="width:80px;"/></td>
      <td class="total" data-link="~total('quantity')" ></td>
      <td class="editable"><input data-link="price" style="width:80px;"/></td>
      <td data-link="{dec2:quantity * price}"></td>
      <td class="total" data-link="{dec2:~total('quantity * price')}"></td>
    </tr>
  {{else}}
    <tr><td colspan="6">No items</td></tr>
  {{/purchases}}
</tbody></table>

</script>

<!--<script src="sample-jsv.js"></script> <!--uncomment for testing as standalone page-->
</body>
</html>
