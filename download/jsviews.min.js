(function(n,t,i){"use strict";function it(n,t){t&&t.onError&&t.onError(n)===!1||(this.name="JsRender Error",this.message=n||"JsRender error")}function o(n,t){var i;n=n||{};for(i in t)n[i]=t[i];return n}function ct(n,t,i){return(!k.rTag||arguments.length)&&(a=n?n.charAt(0):a,v=n?n.charAt(1):v,f=t?t.charAt(0):f,h=t?t.charAt(1):h,w=i||w,n="\\"+a+"(\\"+w+")?\\"+v,t="\\"+f+"\\"+h,l="(?:(?:(\\w+(?=[\\/\\s\\"+f+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+f+"]|\\"+f+"(?!\\"+h+"))*?)",k.rTag=l+")",l=new RegExp(n+l+"(\\/)?|(?:\\/(\\w+)))"+t,"g"),et=new RegExp("<.*>|([^\\\\]|^)[{}]|"+n+".*"+t)),[a,v,f,h,w]}function ei(n,t){t||(t=n,n=i);var e,f,o,u,r=this,s=!t||t==="root";if(n){if(u=r.type===t?r:i,!u)if(e=r.views,r._.useKey){for(f in e)if(u=e[f].get(n,t))break}else for(f=0,o=e.length;!u&&f<o;f++)u=e[f].get(n,t)}else if(s)while(r.parent.parent)u=r=r.parent;else while(r&&!u)u=r.type===t?r:i,r=r.parent;return u}function lt(){var n=this.get("item");return n?n.index:i}function oi(n,t){var u,f=this,r=t&&t[n]||(f.ctx||{})[n];return r=r===i?f.getRsc("helpers",n):r,r&&typeof r=="function"&&(u=function(){return r.apply(f,arguments)},o(u,r)),u||r}function si(n,t,u){var h,f,o,e=+u===u&&u,s=t.linkCtx;return e&&(u=(e=t.tmpl.bnds[e-1])(t.data,t,r)),o=u.args[0],(n||e)&&(f=s&&s.tag||{_:{inline:!s},tagName:n+":",flow:!0,_is:"tag"},f._.bnd=e,s&&(s.tag=f,u.ctx=c(u.ctx,s.view.ctx)),f.tagCtx=u,u.view=t,f.ctx=u.ctx||{},delete u.ctx,t._.tag=f,n=n!=="true"&&n,n&&((h=t.getRsc("converters",n))||p("Unknown converter: {{"+n+":"))&&(f.depends=h.depends,o=h.apply(f,u.args)),o=e&&t._.onRender?t._.onRender(o,t,e):o,t._.tag=i),o}function hi(n,t){for(var e=this,u=r[n],f=u&&u[t];f===i&&e;)u=e.tmpl[n],f=u&&u[t],e=e.parent;return f}function ci(n,t,u,f){var ft,s,et,nt,k,l,tt,it,h,d,y,ot,v,ut,w="",g=+f===f&&f,a=t.linkCtx||0,b=t.ctx,st=u||t.tmpl,ht=t._;for(n._is==="tag"&&(s=n,n=s.tagName),g&&(f=(ot=st.bnds[g-1])(t.data,t,r)),tt=f.length,s=s||a.tag,l=0;l<tt;l++)h=f[l],y=h.tmpl,y=h.content=y&&st.tmpls[y-1],u=h.props.tmpl,l||u&&s||(v=t.getRsc("tags",n)||p("Unknown tag: {{"+n+"}}")),u=u||(s?s:v).template||y,u=""+u===u?t.getRsc("templates",u)||e(u):u,o(h,{tmpl:u,render:rt,index:l,view:t,ctx:c(h.ctx,b)}),s||(v._ctr?(s=new v._ctr,ut=!!s.init,s.attr=s.attr||v.attr||i):s={render:v.render},s._={inline:!a},a&&(a.attr=s.attr=a.attr||s.attr,a.tag=s,s.linkCtx=a),(s._.bnd=ot||a)&&(s._.arrVws={}),s.tagName=n,s.parent=k=b&&b.tag,s._is="tag",s._def=v),ht.tag=s,h.tag=s,s.tagCtxs=f,s.flow||(d=h.ctx=h.ctx||{},et=s.parents=d.parentTags=b&&c(d.parentTags,b.parentTags)||{},k&&(et[k.tagName]=k),d.tag=s);for(s.rendering={},l=0;l<tt;l++)h=s.tagCtx=f[l],s.ctx=h.ctx,!l&&ut&&(s.init(h,a,s.ctx),ut=i),(ft=s.render)&&(it=ft.apply(s,h.args)),w+=it!==i?it:h.tmpl?h.render():"";return delete s.rendering,s.tagCtx=s.tagCtxs[0],s.ctx=s.tagCtx.ctx,s._.inline&&(nt=s.attr)&&nt!=="html"&&(w=nt==="text"?wt.html(w):""),g&&t._.onRender?t._.onRender(w,t,g):w}function b(n,t,r,u,f,e,o,s){var c,l,a,y=t==="array",v={key:0,useKey:y?0:1,id:""+fi++,onRender:s,bnds:{}},h={data:u,tmpl:f,content:o,views:y?[]:{},parent:r,ctx:n,type:t,get:ei,getIndex:lt,getRsc:hi,hlp:oi,_:v,_is:"view"};return r&&(c=r.views,l=r._,l.useKey?(c[v.key="_"+l.useKey++]=h,a=l.tag,v.bnd=y&&(!a||!!a._.bnd&&a)):c.splice(v.key=h.index=e!==i?e:c.length,0,h),h.ctx=n||r.ctx),h}function li(n){var t,i,r,u,f;for(t in y)if(u=y[t],(f=u.compile)&&(i=n[t+"s"]))for(r in i)i[r]=f(r,i[r],n,t,u)}function ai(n,t,i){var u,r;return typeof t=="function"?t={depends:t.depends,render:t}:((r=t.template)&&(t.template=""+r===r?e[r]||e(r):r),t.init!==!1&&(u=t._ctr=function(){},(u.prototype=t).constructor=u)),i&&(t._parentTmpl=i),t}function at(r,u,f,o,s,h){function v(i){if(""+i===i||i.nodeType>0){try{a=i.nodeType>0?i:!et.test(i)&&t&&t(n.document).find(i)[0]}catch(u){}return a&&(i=a.getAttribute(ht),r=r||i,i=e[i],i||(r=r||"_"+ui++,a.setAttribute(ht,r),i=e[r]=at(r,a.innerHTML,f,o,s,h))),i}}var l,a;return u=u||"",l=v(u),h=h||(u.markup?u:{}),h.tmplName=r,f&&(h._parentTmpl=f),!l&&u.markup&&(l=v(u.markup))&&l.fn&&(l.debug!==u.debug||l.allowCode!==u.allowCode)&&(l=l.markup),l!==i?(r&&!f&&(tt[r]=function(){return u.render.apply(u,arguments)}),l.fn||u.fn?l.fn&&(u=r&&r!==l.tmplName?c(h,l):l):(u=vt(l,h),ut(l,u)),li(h),u):void 0}function vt(n,t){var i,f=d.wrapMap||{},r=o({markup:n,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:rt},t);return t.htmlTag||(i=ii.exec(n),r.htmlTag=i?i[1].toLowerCase():""),i=f[r.htmlTag],i&&i!==f.div&&(r.markup=u.trim(r.markup),r._elCnt=!0),r}function vi(n,t){function u(e,o,s){var l,h,a,c;if(e&&""+e!==e&&!e.nodeType&&!e.markup){for(a in e)u(a,e[a],o);return r}return o===i&&(o=e,e=i),e&&""+e!==e&&(s=o,o=e,e=i),c=s?s[f]=s[f]||{}:u,h=t.compile,(l=k.onBeforeStoreItem)&&(h=l(c,e,o,h)||h),e?o===null?delete c[e]:c[e]=h?o=h(e,o,s,n,t):o:o=h(i,o),h&&o&&(o._is=n),(l=k.onStoreItem)&&l(c,e,o,h),o}var f=n+"s";r[f]=u,y[n]=t}function rt(n,t,f,o,s,h){var w,ut,nt,v,tt,it,rt,k,y,ft,d,et,a,l=this,ot=!l.attr||l.attr==="html",g="";if(o===!0&&(rt=!0,o=0),l.tag?(k=l,l=l.tag,ft=l._,et=l.tagName,a=k.tmpl,t=c(t,l.ctx),y=k.content,k.props.link===!1&&(t=t||{},t.link=!1),f=f||k.view,n=n===i?f:n):a=l.jquery&&(l[0]||p('Unknown template: "'+l.selector+'"'))||l,a&&(!f&&n&&n._is==="view"&&(f=n),f&&(y=y||f.content,h=h||f._.onRender,n===f&&(n=f.data,s=!0),t=c(t,f.ctx)),f&&f.data!==i||((t=t||{}).root=n),a.fn||(a=e[a]||e(a)),a)){if(h=(t&&t.link)!==!1&&ot&&h,d=h,h===!0&&(d=i,h=f._.onRender),u.isArray(n)&&!s)for(v=rt?f:o!==i&&f||b(t,"array",f,n,a,o,y,h),w=0,ut=n.length;w<ut;w++)nt=n[w],tt=b(t,"item",v,nt,a,(o||0)+w,y,h),it=a.fn(nt,tt,r),g+=v._.onRender?v._.onRender(it,tt):it;else v=rt?f:b(t,et||"data",f,n,a,o,y,h),ft&&!l.flow&&(v.tag=l),g+=a.fn(n,v,r);return d?d(g,v):g}return""}function p(n){throw new r.sub.Error(n);}function s(n){p("Syntax error\n"+n)}function ut(n,t,i,r){function v(t){t-=f,t&&h.push(n.substr(f,t).replace(nt,"\\n"))}function c(t){t&&s('Unmatched or missing tag: "{{/'+t+'}}" in template:\n'+n)}function y(e,l,y,w,b,k,d,g,tt,it,rt,ut){k&&(b=":",w="html"),it=it||i;var at,st,ht=l&&[],ot="",et="",ct="",lt=!it&&!b&&!d;y=y||b,v(ut),f=ut+e.length,g?p&&h.push(["*","\n"+tt.replace(dt,"$1")+"\n"]):y?(y==="else"&&(ti.test(tt)&&s('for "{{else if expr}}" use "{{else expr}}"'),ht=u[6],u[7]=n.substring(u[7],ut),u=o.pop(),h=u[3],lt=!0),tt&&(tt=tt.replace(nt," "),ot=ft(tt,ht,t).replace(ni,function(n,t,i){return t?ct+=i+",":et+=i+",",""})),et=et.slice(0,-1),ot=ot.slice(0,-1),at=et&&et.indexOf("noerror:true")+1&&et||"",a=[y,w||!!r||"",ot,lt&&[],'params:"'+tt+'",props:{'+et+"}"+(ct?",ctx:{"+ct.slice(0,-1)+"}":""),at,ht||0],h.push(a),lt&&(o.push(u),u=a,u[7]=f)):rt&&(st=u[0],c(rt!==st&&st!=="else"&&rt),u[7]=n.substring(u[7],ut),u=o.pop()),c(!u&&rt),h=u[3]}var a,p=t&&t.allowCode,e=[],f=0,o=[],h=e,u=[,,,e];return n=n.replace(gt,"\\$&"),c(o[0]&&o[0][3].pop()[0]),n.replace(l,y),v(n.length),(f=e[e.length-1])&&c(""+f!==f&&+f[7]===f[7]&&f[0]),yt(e,i?n:t,i)}function yt(n,i,r){var c,f,e,l,a,y,st,ht,ct,lt,ft,p,o,et,v,tt,w,it,at,b,pt,wt,ot,rt,k,h=0,u="",g="",ut={},bt=n.length;for(""+i===i?(v=r?'data-link="'+i.replace(nt," ").slice(1,-1)+'"':i,i=0):(v=i.tmplName||"unnamed",i.allowCode&&(ut.allowCode=!0),i.debug&&(ut.debug=!0),p=i.bnds,et=i.tmpls),c=0;c<bt;c++)if(f=n[c],""+f===f)u+='\nret+="'+f+'";';else if(e=f[0],e==="*")u+=""+f[1];else{if(l=f[1],a=f[2],it=f[3],y=f[4],g=f[5],at=f[7],(wt=e==="else")||(h=0,p&&(o=f[6])&&(h=p.push(o))),(ot=e===":")?(l&&(e=l==="html"?">":l+e),g&&(rt="prm"+c,g="try{var "+rt+"=["+a+"][0];}catch(e){"+rt+'="";}\n',a=rt)):(it&&(tt=vt(at,ut),tt.tmplName=v+"/"+e,yt(it,tt),et.push(tt)),wt||(w=e,pt=u,u=""),b=n[c+1],b=b&&b[0]==="else"),y+=",args:["+a+"]}",ot&&o||l&&e!==">"){if(k=new Function("data,view,j,u"," // "+v+" "+h+" "+e+"\n"+g+"return {"+y+";"),k.paths=o,k._ctxs=e,r)return k;ft=1}if(u+=ot?"\n"+(o?"":g)+(r?"return ":"ret+=")+(ft?(ft=0,lt=!0,'c("'+l+'",view,'+(o?(p[h-1]=k,h):"{"+y)+");"):e===">"?(ht=!0,"h("+a+");"):(ct=!0,"(v="+a+")!="+(r?"=":"")+'u?v:"";')):(st=!0,"{tmpl:"+(it?et.length:"0")+","+y+","),w&&!b){if(u="["+u.slice(0,-1)+"]",(r||o)&&(u=new Function("data,view,j,u"," // "+v+" "+h+" "+w+"\nreturn "+u+";"),o&&((p[h-1]=u).paths=o),u._ctxs=e,r))return u;u=pt+'\nret+=t("'+w+'",view,this,'+(h||u)+");",o=0,w=0}}u="// "+v+"\nvar j=j||"+(t?"jQuery.":"js")+"views"+(ct?",v":"")+(st?",t=j._tag":"")+(lt?",c=j._cnvt":"")+(ht?",h=j.converters.html":"")+(r?";\n":',ret="";\n')+(d.tryCatch?"try{\n":"")+(ut.debug?"debugger;":"")+u+(r?"\n":"\nreturn ret;\n")+(d.tryCatch?"\n}catch(e){return j._err(e);}":"");try{u=new Function("data,view,j,u",u)}catch(kt){s("Compiled template code:\n\n"+u,kt)}return i&&(i.fn=u),u}function ft(n,t,i){function b(b,k,d,g,nt,tt,it,rt,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,kt){function gt(n,i,r,f,o,s,h){if(i&&(t&&(u==="linkTo"&&(e=t.to=t.to||[],e.push(nt)),(!u||l)&&t.push(nt)),i!==".")){var c=(r?'view.hlp("'+r+'")':f?"view":"data")+(h?(o?"."+o:r?"":f?"":"."+i)+(s||""):(h=r?"":f?o||"":i,""));return c=c+(h?"."+h:""),c.slice(0,9)==="view.data"?c.slice(5):c}return n}var dt;if(tt=tt||"",d=d||k||ht,nt=nt||et,ot=ot||yt||"",it)s(n);else return t&&vt&&!c&&!o&&(!u||l||e)&&(dt=p[r],kt.length-2>wt-dt&&(dt=kt.slice(dt,wt+1),vt=v+":"+dt+f,vt=w[vt]=w[vt]||ut(a+vt+h,i,!0),vt.paths||ft(dt,vt.paths=[],i),(e||t).push({_jsvOb:vt}))),c?(c=!ct,c?b:'"'):o?(o=!lt,o?b:'"'):(d?(r++,p[r]=wt++,d):"")+(pt?r?"":u?(u=l=e=!1,"\b"):",":rt?(r&&s(n),u=nt,l=g,"\b"+nt+":"):nt?nt.split("^").join(".").replace(bt,gt)+(ot?(y[++r]=!0,nt.charAt(0)!=="."&&(p[r]=wt),ot):tt):tt?tt:at?(y[r--]=!1,at)+(ot?(y[++r]=!0,ot):""):st?(y[r]||s(n),","):k?"":(c=ct,o=lt,'"'))}var u,e,l,w=i.links,y={},p={0:-1},r=0,o=!1,c=!1;return(n+" ").replace(kt,b)}function c(n,t){return n&&n!==t?t?o(o({},t),n):n:t&&o({},t)}function pt(n){return st[n]||(st[n]="&#"+n.charCodeAt(0)+";")}if((!t||!t.views)&&!n.jsviews){var u,g,l,et,a="{",v="{",f="}",h="}",w="^",bt=/^(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,kt=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)([#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^)|[)\]])([([]?))|(\s+)/g,nt=/[ \t]*(\r\n|\n|\r)/g,dt=/\\(['"])/g,gt=/['"\\]/g,ni=/\x08(~)?([^\x08]+)\x08/g,ti=/^if\s/,ii=/<(\w+)[>\s]/,ot=/[\x00`><"'&]/g,ri=ot,ui=0,fi=0,st={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},ht="data-jsv-tmpl",tt={},y={template:{compile:at},tag:{compile:ai},helper:{},converter:{}},r={jsviews:"v1.0.0-beta",render:tt,settings:{delimiters:ct,debugMode:!0,tryCatch:!0},sub:{View:b,Error:it,tmplFn:ut,parse:ft,extend:o,error:p,syntaxError:s},_cnvt:si,_tag:ci,_err:function(n){return d.debugMode?"Error: "+(n.message||n)+". ":""}};(it.prototype=new Error).constructor=it,lt.depends=function(){return[this.get("item"),"index"]};for(g in y)vi(g,y[g]);var e=r.templates,wt=r.converters,pi=r.helpers,yi=r.tags,k=r.sub,d=r.settings;t?(u=t,u.fn.render=rt):(u=n.jsviews={},u.isArray=Array&&Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"}),u.render=tt,u.views=r,u.templates=e=r.templates,yi({"else":function(){},"if":{render:function(n){var t=this;return t.rendering.done||!n&&(arguments.length||!t.tagCtx.index)?"":(t.rendering.done=!0,t.selected=t.tagCtx.index,t.tagCtx.render())},onUpdate:function(n,t,i){for(var r,f,u=0;(r=this.tagCtxs[u])&&r.args.length;u++)if(r=r.args[0],f=!r!=!i[u].args[0],!!r||f)return f;return!1},flow:!0},"for":{render:function(n){var t=this,f=t.tagCtx,e=!arguments.length,r="",o=e||0;return t.rendering.done||(e?r=i:n!==i&&(r+=f.render(n),o+=u.isArray(n)?n.length:1),(t.rendering.done=o)&&(t.selected=f.index)),r},onArrayChange:function(n,t){var i,u=this,r=t.change;if(this.tagCtxs[1]&&(r==="insert"&&n.target.length===t.items.length||r==="remove"&&!n.target.length||r==="refresh"&&!t.oldItems.length!=!n.target.length))this.refresh();else for(i in u._.arrVws)i=u._.arrVws[i],i.data===n.target&&i._.onArrayChange.apply(i,arguments);n.done=!0},flow:!0},include:{flow:!0},"*":{render:function(n){return n},flow:!0}}),wt({html:function(n){return n!=i?String(n).replace(ri,pt):""},attr:function(n){return n!=i?String(n).replace(ot,pt):n===null?null:""},url:function(n){return n!=i?encodeURI(String(n)):n===null?null:""}}),ct()}})(this,this.jQuery),function(n,t,i){"use strict";function v(n){return h(n)?new nt(n):new g(n)}function g(n){return this._data=n,this}function nt(n){return this._data=n,this}function c(n){return h(n)?[n]:n}function b(n){if(typeof n!="number")throw"Invalid index.";}function ft(n,t){n=h(n)?n:[n];for(var i,u=t,e=u,s=n.length,r=[],o=0;o<s;o++){if(i=n[o],f(i)){y.apply(r,[r.length,1].concat(ft(i.call(t,t),t)));continue}else if(""+i!==i){t=e=i,e!==u&&r.push(u=e);continue}e!==u&&r.push(u=e),r.push(i)}return r}function et(n,t){var r,i;for(r in n){i=!0;break}i||delete w[t]}function k(n,t){if(!(n.data&&n.data.off)){var r=t.oldValue,i=n.data;n.type===a?i.cb.array(n,t):(i.prop==="*"||i.prop===t.path)&&(typeof r===p&&d(c(r),i.path,i.cb),typeof(r=t.value)===p&&e(c(r),i.path,i.cb),i.cb(n,t))}}function e(){function ni(i,f,e,o){var h=ut(n),y=c(n);if(u=0,b||o)h&&(t(y).off(i,k),u&&delete u[t.data(n,"obId")]);else{if(s=h&&t._data(n))for(s=s&&s.events,s=s&&s[e?a:l],yt=s&&s.length;yt--;)if((tt=s[yt].data)&&tt.cb===r){if(e)return;f==="*"&&tt.prop!==f&&(t(n).off(i+"."+tt.prop,k),u&&delete u[t.data(n,"obId")])}t(y).on(i,null,e?{cb:r}:{path:f,prop:v,cb:r},k);kt&&(kt[t.data(n,"obId")||t.data(n,"obId",ht++)]=n)}}function fi(n,t){n._ob=it(n,lt);var i=lt;return function(){var u=n._ob,f=t.length;typeof u===p&&(gt(u,!0),f&&d(c(u),t,r,it)),u=n._ob=it(n,i),typeof u===p&&(gt(u),f&&e(c(u),t,r,it,i))}}function gt(t,u){if(r&&r.array&&h(t)){var f=n;n=t,ni(a+".observe.obs"+r._bnd,i,!0,u),n=f}}var vt,nt,v,o,wt,n,b,r,bt,yt,tt,s,it,ti,kt,dt,ri,ui=1,ii=rt,g=ot.apply([],arguments),st=g.pop(),lt=g[0],pt=""+lt!==lt?g.shift():i,at=g.length;for(lt=pt,f(st)?r=st:(st===!0?b=st:st&&(lt=st,ui=0),st=g[at-1],(at&&st===i||f(st))&&(r=g.pop(),at--)),f(g[at-1])&&(it=r,r=g.pop(),at--),ii+=b?r?".obs"+r._bnd:"":".obs"+(bt=r._bnd=r._bnd||ct++),b&&at===0&&pt&&t(pt).off(rt,k),b||(kt=w[bt]=w[bt]||{}),dt=0,vt=0;vt<at;vt++){if(o=g[vt],gt(n,b),n=pt,""+o===o){if(nt=o.split("^"),nt[1]&&(dt=nt[0].split(".").length,o=nt.join("."),dt=o.split(".").length-dt),it&&(ti=it(o,pt))){at+=ti.length-1,y.apply(g,[vt--,1].concat(ti));continue}nt=o.split(".")}else ui&&!f(o)&&(o._jsvOb&&(b||(o._cb=ri=fi(o,g.slice(vt+1)),o._rt=lt,ri._bnd=r._bnd),e(o._rt,g.slice(0,vt),o._cb,it,b),o=o._ob),n=o),pt=o,nt=[pt];while(n&&typeof n=="object"&&(v=nt.shift())!==i){if(""+v===v){if(v==="")continue;if(nt.length<dt+1&&!n.nodeType){if(!b&&(s=ut(n)&&t._data(n))){for(s=s.events,s=s&&s.propertyChange,yt=s&&s.length;yt--;)if(tt=s[yt].data,tt&&tt.cb===r&&(tt.prop===v&&tt.path===nt.join(".")||tt.prop==="*"))break;if(yt>-1){n=n[v];continue}}if(v==="*"){f(n)?(wt=n.depends)&&e(wt,r,b||lt):ni(ii,v);break}else!v||f(wt=n[v])&&wt.depends||ni(ii+"."+v,nt.join("."))}v=v?n[v]:n}if(f(v)){(wt=v.depends)&&e(n,ft(wt,n),r,it,b||c(lt));break}n=v}}return gt(n,b),bt&&et(kt,bt),{cbId:bt,bnd:kt,leaf:n}}function d(){return[].push.call(arguments,!0),e.apply(this,arguments)}if(!t)throw"requires jQuery or JsRender";if(!t.observable){var u,tt,o,r,it=t.event.special,s=t.views?t.views.sub:{},y=[].splice,ot=[].concat,h=t.isArray,st=t.expando,p="object",l=s.propChng=s.propChng||"propertyChange",a=s.arrChng=s.arrChng||"arrayChange",w=s._cbBnds=s._cbBnds||{},rt=l+".observe",f=t.isFunction,ht=1,ct=1,ut=t.hasData;t.observable=v,v.Object=g,v.Array=nt,v.observe=e,v.unobserve=d,g.prototype={_data:null,data:function(){return this._data},observe:function(n,t){return e(this._data,n,t)},unobserve:function(n,t){return d(this._data,n,t)},setProperty:function(n,t,r){var u,s,o,f=this,e=f._data;if(n=n||"",e)if(h(n))for(u=n.length;u--;)s=n[u],f.setProperty(s.name,s.value,r===i||r);else if(""+n!==n)for(u in n)f.setProperty(u,n[u],t);else if(n.indexOf(st)<0){for(o=n.split(".");e&&o.length>1;)e=e[o.shift()];f._setProperty(e,o.join("."),t,r)}return f},_setProperty:function(n,t,i,r){var e,o,u=t?n[t]:n;f(u)&&u.set&&(o=u,e=u.set===!0?u:u.set,u=u.call(n)),(u!==i||r&&u!=i)&&(!(u instanceof Date)||u>i||u<i)&&(e?(e.call(n,i),i=o.call(n)):n[t]=i,this._trigger(n,{path:t,value:i,oldValue:u}))},_trigger:function(n,i){t(n).triggerHandler(l,i)}},nt.prototype={_data:null,data:function(){return this._data},insert:function(n,t){return b(n),arguments.length>1&&(t=h(t)?t:[t],t.length&&this._insert(n,t)),this},_insert:function(n,t){r=this._data,o=r.length,y.apply(r,[n,0].concat(t)),this._trigger({change:"insert",index:n,items:t})},remove:function(n,t){if(b(n),t=t===i||t===null?1:t,t&&n>-1){var r=this._data.slice(n,n+t);t=r.length,t&&this._remove(n,t,r)}return this},_remove:function(n,t,i){r=this._data,o=r.length,r.splice(n,t),this._trigger({change:"remove",index:n,items:i})},move:function(n,t,r){if(b(n),b(t),r=r===i||r===null?1:r,r){var u=this._data.slice(n,n+r);this._move(n,t,r,u)}return this},_move:function(n,t,i,u){r=this._data,o=r.length,r.splice(n,i),r.splice.apply(r,[t,0].concat(u)),this._trigger({change:"move",oldIndex:n,index:t,items:u})},refresh:function(n){var t=this._data.slice(0);return this._refresh(t,n),this},_refresh:function(n,t){r=this._data,o=r.length,y.apply(r,[0,r.length].concat(t)),this._trigger({change:"refresh",oldItems:n})},_trigger:function(n){var i=r.length,u=t([r]);u.triggerHandler(a,n),i!==o&&u.triggerHandler(l,{path:"length",value:i,oldValue:o})}},it[l]=it[a]={remove:function(n){(n=n.data)&&(n.off=1,n=n.cb)&&(u=w[tt=n._bnd])},teardown:function(){u&&(delete u[t.data(this,"obId")],et(u,tt))}}}}(this,this.jQuery||this.jsviews),function(n,t,i){"use strict";function bi(n){var p,w,v,h,f,c,a,l,b,s,k,g,tt,ut,it,rt,u,y=n.target,o=y._jsvBnd;if(o)for(g=o.slice(1).split("&"),tt=g.length;tt--;)(k=e[g[tt]])&&(o=k.to)&&(h=k.linkCtx,s=h.view,u=h.tag,b=t(y),it=s.hlp(lt,h.ctx),rt=s.hlp(at,h.ctx),v=bt(y),p=li[v],f=d(v)?v(y):p?b[p]():b.attr(v),a=o[1],o=o[0],a&&(d(a)?c=a:(c=s.tmpl.converters,c=c&&c[a]||r.converters[a])),c&&(f=c.call(u,f)),ut=s.linkCtx,s.linkCtx=h,it&&(w=it.call(s,n,f)===!1)||u&&u.onBeforeChange&&(w=u.onBeforeChange(n,f)===!1)||f===i||(u&&u.onChange&&(f=u.onChange(f)),l=o[0],f!==i&&l&&(l=l._jsvOb?l._ob:l,u&&(u._.chging=!0),nt(l).setProperty(o[2]||o[1],f),u&&delete u._.chging,rt&&rt.call(h,n))),s.linkCtx=ut,w&&n.stopImmediatePropagation())}function iu(n,u,f){var o,w,b,e,tt,s,it,rt,ut,c=this,v=c.data,l=c.elem,a=c.convert,y="attr",ft=l.parentNode,et=ft,p=t(l),h=c.view,ot=h.ctx,k=h.linkCtx,nt=h.hlp(lt);if(h.linkCtx=c,h.ctx=c.ctx,ft&&(!nt||!(u&&nt.call(c,n,u)===!1))&&!(u&&n.data.prop!=="*"&&n.data.prop!==u.path)){if(u&&(c.eventArgs=u),!n||u||c._initVal){if(delete c._initVal,e=f.call(h.tmpl,v,h,r),o=c.attr||bt(l,!0,a!==i),s=c.tag){if(s._.chging||u&&s.onUpdate&&s.onUpdate(n,u,e)===!1||o==="none"){kt(c,v,l),h.linkCtx=k;return}e=s.tagName.slice(-1)===":"?r._cnvt(s.tagName.slice(0,-1),h,e):r._tag(s,h,h.tmpl,e)}else f._ctxs&&(a=a===""?"true":a,e=a?r._cnvt(a,h,e):r._tag(f._ctxs,h,h.tmpl,e),s=h._.tag,o=c.attr||o);if(s&&(s.parentElem=c.expr||s._elCnt?l:l.parentNode,it=s._prv,rt=s._nxt,o=s.attr||o,s.refresh=or),d(e)&&g(c.expr+": missing parens"),o==="visible"&&(o="css-display",e=e?ru(l):"none"),tt=o.lastIndexOf("css-",0)===0&&o.substr(4))(b=t.style(l,tt)!==e)&&t.style(l,tt,e);else if(o!=="link"){if(o==="value")l.type==="checkbox"&&(e=e&&e!=="false",y="prop",o="checked");else if(o==="radio")if(l.value===""+e)e=!0,y="prop",o="checked";else{kt(c,v,l),h.linkCtx=k;return}else(o==="selected"||o==="disabled"||o==="multiple"||o==="readlonly")&&(e=e&&e!=="false"?o:null);if(w=li[o],w){if(b=s||p[w]()!==e)if(o==="html")if(s){if(ut=s._.inline,s.refresh(e),!ut&&s._.inline){h.linkCtx=k;return}}else p.empty(),et=l,h.link(v,et,it,rt,e,s&&{tag:s._tgId});else o!=="text"||l.children[0]?p[w](e):l.textContent!==i?l.textContent=e:l.innerText=e===null?"":e}else(b=p[y](o)!=e)&&p[y](o,e===i&&y==="attr"?null:e)}u&&b&&(nt=h.hlp(at))&&nt.call(c,n,u)}kt(c,v,l),h.linkCtx=k,h.ctx=ot}}function ki(n,t){var i=this,r=i.hlp(lt),u=i.hlp(at);if(!r||r.call(n,t)!==!1){if(t){var o=t.change,f=t.index,e=t.items;switch(o){case"insert":i.addViews(f,e);break;case"remove":i.removeViews(f,e.length);break;case"move":i.refresh();break;case"refresh":i.refresh()}}u&&u.call(this,n,t)}}function ru(t){var i,u,e=n.getComputedStyle,r=(t.currentStyle||e.call(n,t,"")).display;return r!=="none"||(r=yi[u=t.nodeName])||(i=f.createElement(u),f.body.appendChild(i),r=(e?e.call(n,i,""):i.currentStyle).display,yi[u]=r,f.body.removeChild(i)),r}function wt(n){var f,e,u=n.data,r=n._.bnd;if(!n._.useKey&&r)if((e=n._.bndArr)&&(t([e[1]]).off(ct,e[0]),n._.bndArr=i),r!==!!r&&r._.inline)u?r._.arrVws[n._.id]=n:delete r._.arrVws[n._.id];else if(u){f=function(t){t.data&&t.data.off||ki.apply(n,arguments)};t([u]).on(ct,f);n._.bndArr=[f,u]}}function bt(n,t,i){var u=n.nodeName.toLowerCase(),r=o.merge[u];return r?t?u==="input"&&n.type==="radio"?"radio":r.to.toAttr:r.from.fromAttr:t?i?"text":"html":""}function di(n,r,u,f,e,o,s){var p,c,v,w,b,l=n.parentElem,h=n._prv,a=n._nxt,y=n._elCnt;if(h&&h.parentNode!==l&&g("Missing parentNode"),s){w=n.nodes(),y&&h&&h!==a&&ti(h,a,l,n._.id,"_",!0),n.removeViews(i,i,!0),c=a,y&&(h=h?h.previousSibling:a?a.previousSibling:l.lastChild),t(w).remove();for(b in n._.bnds)ot(b)}else{if(r){if(v=f[r-1],!v)return!1;h=v._nxt}y?(c=h,h=c?c.previousSibling:l.lastChild):c=h.nextSibling}p=u.render(e,o,n,s||r,n._.useKey&&s,!0),n.link(e,l,h,c,p,v)}function it(n,t,r){var u,f,o;return r?(o="^`",f=t._.tag||{_:{inline:!0,bnd:r},tagCtx:{view:t},flow:!0},u=f._tgId,f.refresh=or,u||(e[u=pi++]=f,f._tgId=""+u)):(o="_`",l[u=t._.id]=t),"#"+u+o+(n===i?"":n)+"/"+u+o}function kt(n,r,u){var o,l,h=n.linkedElem,a=n.convertBack,c=n.tag,f=[],s=n._bndId||""+pi++,v=n._hdlr;if(delete n._bndId,c&&(f=c.depends||f,f=d(f)?c.depends(c):f),!n._depends||""+n._depends!=""+f){if(n._depends&&ei(r,n._depends,v,!0),o=ei(t.isArray(r)?[r]:r,n.fn.paths||n.fn,f,v,n._ctxCb),o.elem=u,o.linkCtx=n,o._tgId=s,u._jsvBnd=u._jsvBnd||"",u._jsvBnd+="&"+s,h)for(o.to=[[],a],l=h.length;l--;)h[l]._jsvBnd=u._jsvBnd;n._depends=f,n.view._.bnds[s]=s,e[s]=o,(h||a!==i)&&er(o,a)}}function gi(n,t,i,r,u,f){return dt(this,n,t,i,r,u,f)}function dt(n,r,u,e,o,s,c){if(n&&r){if(r=r.jquery?r:t(r),!p){p=f.body;t(p).on(si,bi)}for(var w,g,nt,d,y,b,a,k,tt,ut=it,et=e&&e.target==="replace",ft=r.length;ft--;)if(a=r[ft],""+n===n)y=v(a),k=y.ctx,y.ctx=e,rt(n,a,v(a),u),y.ctx=k;else{if(o=o||v(a),n.markup!==i)o.link===!1&&(e=e||{},e.link=ut=!1),et&&(b=a.parentNode),nt=n.render(u,e,o,i,i,ut),b?(s=a.previousSibling,c=a.nextSibling,t.cleanData([a],!0),b.removeChild(a),a=b):(s=c=i,t(a).empty());else if(n!==!0)break;if(a._dfr&&!c){for(d=h(a._dfr,!0,wi),w=0,g=d.length;w<g;w++)y=d[w],(y=l[y.id])&&y.data!==i&&y.parent.removeViews(y._.key,i,!0);a._dfr=""}tt=o.data,k=o.ctx,o.data=u,o.ctx=e,o.link(u,a,s,c,nt),o.data=tt,o.ctx=k}}return r}function uu(n,r,u,a,p,w){function ou(n,t,i,r,u,f,e,o,s,h,l,a){var v="";return b=o||s||"",r=r||i||h||a,r&&(fi&&(i||a)&&!wr[lt]&&vr("'<"+lt+"... />' in:\n"+p),bi=ft,lt=dr.shift(),ft=pt[lt],bi&&(ct+=at,at="",ft?ct+="-":(v=(h||"")+ci+"@"+ct+hi+(l||""),ct=fu.shift()))),ft?(f?at+=f:t=h||a||"",b&&(t+=b,at&&(t+=" "+c+'="'+at+'"',at=""))):t=f?t+v+u+ci+f+hi+e+b:v||n,b&&(dr.unshift(lt),lt=b.slice(1),dr[0]===pr[lt]&&g('"'+lt+'" has incorrect parent tag'),(ft=pt[lt])&&!bi&&(fu.unshift(ct),ct=""),bi=ft,ct&&ft&&(ct+="+")),t}function si(n,t){var s,a,u,o,f,v,h,c=[];if(n){for(bt=n.length,n.tokens.charAt(0)==="@"&&(t=d.previousSibling,d.parentNode.removeChild(d),d=null),bt=n.length;bt--;){if(ot=n[bt],u=ot.ch,s=ot.path)for(et=s.length-1;a=s.charAt(et--);)a==="+"?s.charAt(et)==="-"?(et--,t=t.previousSibling):t=t.parentNode:t=t.lastChild;u==="^"?(b=e[f=ot.id])&&(h=t&&(!d||d.parentNode!==t),(!d||h)&&(b.parentElem=t),ot.elCnt&&(ot.open?t&&(t._dfr="#"+f+u+(t._dfr||"")):h&&(t._dfr="/"+f+u+(t._dfr||""))),c.push([h?null:d,ot])):(nt=l[f=ot.id])&&(nt.link||(nt.parentElem=t||d&&d.parentNode||r,k(nt,st),nt._.onRender=it,nt._.onArrayChange=ki,wt(nt)),o=nt.parentElem,ot.open?(nt._elCnt=ot.elCnt,t?t._dfr="#"+f+u+(t._dfr||""):(nt._prv||(o._dfr=ut(o._dfr,"#"+f+u)),nt._prv=d)):(t&&(!d||d.parentNode!==t)?(t._dfr="/"+f+u+(t._dfr||""),nt._nxt=i):d&&(nt._nxt||(o._dfr=ut(o._dfr,"/"+f+u)),nt._nxt=d),ui=nt.linkCtx,(v=cu||nt.ctx&&nt.ctx.onAfterCreate)&&v.call(ui,nt)))}for(bt=c.length;bt--;)gi.push(c[bt])}return!n||n.elCnt}function su(n){var t,i;if(bt=n&&n.length)for(et=0;et<bt;et++)if(ot=n[et],vt.id)vt.id=vt.id!==ot.id&&vt.id;else if(i=b=e[ot.id].linkCtx.tag,!b.flow){if(!sr){for(t=1;i=i.parent;)t++;pi=pi||t}(sr||t===pi)&&(!hr||b.tagName===hr)&&or.push(b)}}function gr(){for(nr=yt?r.querySelectorAll(tt):t(tt,r).get(),ti=nr.length,u&&(li=yt?u.querySelectorAll(tt):t(tt,u).get(),u=li.length?li[li.length-1]:u),pi=0,kt=0;kt<ti;kt++)if(d=nr[kt],u&&!ru)ru=d===u;else if(a&&d===a)break;else d.parentNode&&eu(h(d,i,or&&nu))&&d.getAttribute(y)&&gi.push([d]);if(tr(u,ft),tr(a,ft),vt){dt&&dt.resolve();return}for(ft&&ct+at&&(d=a,ct&&(a?si(h(ct+"+",!0),a):si(h(ct,!0),r)),si(h(at,!0),r),a&&(ht=a.getAttribute(c),(ti=ht.indexOf(di)+1)&&(ht=ht.slice(ti+di.length-1)),a.setAttribute(c,at+ht))),ti=gi.length,kt=0;kt<ti;kt++)d=gi[kt],ni=d[1],d=d[0],ni?(b=e[ni.id],ui=b.linkCtx,b=ui?ui.tag:b,ni.open?(d&&(b.parentElem=d.parentNode,b._prv=d),b._elCnt=ni.elCnt,!b||b.onBeforeLink&&b.onBeforeLink()===!1||b._.bound||(b._.bound=!0,nt=b.tagCtx.view,rt(i,b._prv,nt,nt.data||n,ni.id)),b._.linking=!0):(b._nxt=d,b._.linking&&(lr=b.tagCtx,nt=lr.view,b.contents=rr,b.nodes=ur,b.childTags=fr,delete b._.linking,gt(b,lr),b._.bound||(b._.bound=!0,rt(i,b._prv,nt,nt.data||n,ni.id))))):(nt=v(d),rt(d.getAttribute(y),d,nt,nt.data||n));dt&&dt.resolve()}var ui,b,kt,ti,et,bt,nr,d,nt,ot,ni,li,ai,er,yi,ii,or,sr,hr,lr,pi,vt,tu,ar,iu,ei,lt,oi,wi,ht,ft,bi,ri,at,di,ru,dt,hu=o.noDomLevel0,br=this,uu=br._.id+"_",ct="",gi=[],dr=[],fu=[],cu=br.hlp(cr),eu=si;if(w&&(dt=w.lazyLink&&t.Deferred(),w.tmpl?er="/"+w._.id+"_":(vt=w.get,w.tag&&(uu=w.tag+"^",w=!0)),w=w===!0),vt&&(eu=su,or=vt.tags,sr=vt.deep,hr=vt.name),r=r?""+r===r?t(r)[0]:r.jquery?r[0]:r:br.parentElem||f.body,lt=r.tagName.toLowerCase(),ft=!!pt[lt],u=u&&ir(u,ft),a=a&&ir(a,ft)||null,p!==i){if(wi=f.createElement("div"),oi=wi,di=at="",ri=r.namespaceURI==="http://www.w3.org/2000/svg"?"svg":(ei=yr.exec(p))&&ei[1]||"",hu&&ei&&ei[2]&&g("Unsupported: "+ei[2]),ft){for(ii=a;ii&&!(yi=h(ii));)ii=ii.nextSibling;(ht=yi?yi.tokens:r._dfr)&&(ai=er||"",(w||!er)&&(ai+="#"+uu),et=ht.indexOf(ai),et+1&&(et+=ai.length,di=at=ht.slice(0,et),ht=ht.slice(et),yi?ii.setAttribute(c,ht):r._dfr=ht))}for(p=(""+p).replace(kr,ou),vi.appendChild(wi),ri=s[ri]||s.div,tu=ri[0],oi.innerHTML=ri[1]+p+ri[2];tu--;)oi=oi.lastChild;for(vi.removeChild(wi),ar=f.createDocumentFragment();iu=oi.firstChild;)ar.appendChild(iu);r.insertBefore(ar,a)}return dt?setTimeout(gr,0):gr(),dt&&dt.promise()}function rt(n,t,r,f,o){var y,l,p,h,k,d,a,v,c,s,g;if(o)s=e[o],s=s.linkCtx?s.linkCtx.tag:s,c=s.linkCtx||{data:f,elem:s._elCnt?s.parentElem:t,view:r,ctx:r.ctx,attr:"html",fn:s._.bnd,tag:s,_bndId:o},nr(c,c.fn);else if(n&&t)for(y=r.tmpl,n=fu(n,t),w.lastIndex=0;l=w.exec(n);)g=w.lastIndex,p=o?"html":l[1],a=l[3],k=l[10],h=i,c={data:f,elem:s&&s._elCnt?s.parentElem:t,view:r,ctx:r.ctx,attr:p,_initVal:!l[2]},l[6]&&(!p&&(h=/:([\w$]*)$/.exec(k))&&(h=h[1],h!==i&&(d=-h.length-1,a=a.slice(0,d-1)+b,k=k.slice(0,d))),h===null&&(h=i),c.convert=l[5]||""),c.expr=p+a,v=y.links[a],v||(y.links[a]=v=u.tmplFn(ii+a+ri,y,!0,h),u.parse(k,v.paths=[],y)),c.fn=v,p||h===i||(c.convertBack=h),nr(c,v),w.lastIndex=g}function nr(n,t){function i(i,r){iu.call(n,i,r,t)}n._ctxCb=eu(n.view),n._hdlr=i,n.tag&&n.tag.onArrayChange&&(i.array=function(t,i){n.tag.onArrayChange(t,i)}),i(!0)}function ut(n,t){var i;return n?(i=n.indexOf(t),i+1?n.slice(0,i)+n.slice(i+t.length):n):""}function ft(n){return n&&(""+n===n?n:n.tagName==="SCRIPT"?n.type.slice(3):n.nodeType===1&&n.getAttribute(c)||"")}function h(n,t,i){function e(n,t,i,r,e,o){u.push({elCnt:f,id:r,ch:e,open:t,close:i,path:o,token:n})}var f,r,u=[];if(r=t?n:ft(n))return u.elCnt=!n.type,f=r.charAt(0)==="@"||!n.type,u.tokens=r,r.replace(i||tu,e),u}function tr(n,t){n&&(n.type==="jsv"?n.parentNode.removeChild(n):t&&n.getAttribute(y)===""&&n.removeAttribute(y))}function ir(n,t){for(var i=n;t&&i&&i.nodeType!==1;)i=i.previousSibling;return i&&(i.nodeType!==1?(i=f.createElement("SCRIPT"),i.type="jsv",n.parentNode.insertBefore(i,n)):ft(i)||i.getAttribute(y)||i.setAttribute(y,"")),i}function fu(n,i){return n=t.trim(n),n.slice(-1)!==b?n=ht+":"+n+(bt(i)?":":"")+b:n}function rr(n,i){var u,r=t(this.nodes());return r[0]&&(u=n?r.filter(n):r,r=i&&n?u.add(r.find(n)):u),r}function ur(n,t,i){var r,u=this,f=u._elCnt,o=!t&&f,e=[];for(t=t||u._prv,i=i||u._nxt,r=o?t===u._nxt?u.parentElem.lastSibling:t:u._.inline===!1?t||u.linkCtx.elem.firstChild:t&&t.nextSibling;r&&(!i||r!==i);)(n||f||!ft(r))&&e.push(r),r=r.nextSibling;return e}function fr(n,t){n!==!!n&&(t=n,n=i);var r=this,o=r.link?r:r.tagCtx.view,u=r._prv,f=r._elCnt,e=[];return u&&o.link(i,r.parentElem,f?u.previousSibling:u,r._nxt,i,{get:{tags:e,deep:n,name:t,id:f&&r._tgId}}),e}function gt(n,t){var f,o,i,h,s,c,l,a,u=n.linkCtx=n.linkCtx||{tag:n,data:t.view.data};if(n.onAfterLink)n.onAfterLink(t,u);if((o=u.linkedElem)&&(i=o[0])){if(h=i.type==="radio",f=u.convert,s=f?d(f)?f(t.args[0]):r._cnvt(f,t.view,t):t.args[0],i!==u.elem)for(a=o.length;a--;){if(i=o[a],i._jsvLnkdEl=!0,n._.inline)for(i._jsvBnd=u.elem?u.elem._jsvBnd:n._prv._jsvBnd,c=i._jsvBnd.slice(1).split("&"),l=c.length;l--;)er(e[c[l]],u.convertBack);h&&(i.checked=s===i.value)}h||(i.type==="checkbox"?i.checked=s&&s!=="false":o.val(s))}}function er(n,t){var e,u,r,o,f=n.linkCtx,s=f.data,i=f.fn.paths;if(n){for((e=i.to)&&(i=e),u=i.length;u&&""+(r=i[--u])!==r;);r?(r=i[u]=r.split("^").join("."),n.to=r.charAt(0)==="."?[[o=i[u-1],r.slice(1)],t]:[f._ctxCb(i[0])||[s,i[0]],t],e&&o&&(n.to[0][0]=f._ctxCb(o,s))):n.to=[[],t]}}function or(n){var l,a,s,u=this,h=u.parentElem,c=u.tagCtx,f=c.view,e=u._prv,o=u._nxt,p=u._elCnt,v=u._.inline,y=c.props;return u.disposed&&g("Removed tag"),n===i&&(n=u._.bnd.call(f.tmpl,f.data,f,r),v&&(n=r._tag(u,f,f.tmpl,n))),(u.flow||u.render||u.tagCtx.tmpl)&&(v?(a=u.nodes(!0),p&&(e&&e!==o&&ti(e,o,h,u._tgId,"^",!0),e=e?e.previousSibling:o?o.previousSibling:h.lastChild),t(a).remove()):(!u.flow&&y.inline&&(f._.tag=u,n=it(n,f,!0),f._.tag=i,l=u._.inline=!0),t(h).empty())),!l&&u.onBeforeLink&&u.onBeforeLink(),s=f.link(f.data,h,e,o,n,u&&{tag:u._tgId,lazyLink:y.lazyLink}),!l&&(u.onAfterLink||u.onLinkedInit)&&(s?s.then(function(){gt(u,c)}):gt(u,c)),s||u}function et(n){for(var e,o,c,r,s,t,u,a=[],v=n.length,f=v;f--;)a.push(n[f]);for(f=v;f--;)if(r=a[f],r.parentNode){if((u=r._jsvBnd)&&!r._jsvLnkdEl)for(u=u.slice(1).split("&"),r._jsvBnd="",o=u.length;o--;)ot(u[o]);if(s=h(ft(r)+(r._dfr||""),!0,dr))for(e=0,c=s.length;e<c;e++)t=s[e],t.ch==="_"?(t=l[t.id])&&t.data!==i&&t.parent.removeViews(t._.key,i,!0):ot(t.id)}}function ot(n){var s,h,i,f,o,r=e[n];if(r){for(s in r.bnd)f=r.bnd[s],o=".obs"+r.cbId,t.isArray(f)?t([f]).off(ct+o).off(oi+o):t(f).off(oi+o),delete r.bnd[s];h=r.linkCtx,(i=h.tag)&&(i.onDispose&&i.onDispose(),i._elCnt||(i._prv&&i._prv.parentNode.removeChild(i._prv),i._nxt&&i._nxt.parentNode.removeChild(i._nxt)),i.disposed=!0),delete h.view._.bnds[n],delete e[n],delete u._cbBnds[r.cbId]}}function ni(n,r){return arguments.length?r&&(r=r.jquery?r:t(r),n===!0?t.each(r,function(){for(var n;(n=v(this,!0))&&n.parent;)n.parent.removeViews(n._.key,i,!0);et(this.getElementsByTagName("*"))}):n===i&&et(r)):(p&&(t(p).off(si,bi),p=i),n=!0,a.removeViews(),et(f.body.getElementsByTagName("*"))),r}function sr(n,t){return ni(this,n,t)}function eu(n){return n=n||t.view(),function(t,i){var f,u,e=[i];if(n&&t){if(t._jsvOb)return t._jsvOb.call(n.tmpl,i,n,r);if(t.charAt(0)==="~")return t.slice(0,4)==="~tag"&&(u=n.ctx,t.charAt(4)==="."&&(f=t.slice(5).split("."),u=u.tag),f)?u?[u,f.join("."),i]:[]:(t=t.slice(1).split("."),(i=n.hlp(t.shift()))&&(t.length&&e.unshift(t.join(".")),e.unshift(i)),i?e:[]);if(t.charAt(0)==="#")return t==="#data"?[]:[n,t.replace(br,""),i]}}}function ou(n){return n.type==="checkbox"?n.checked:n.value}function ti(n,t,i,r,u,f){var y,a,p,s,b,v,o,w=0,k=n===t;if(n){for(p=h(n)||[],y=0,a=p.length;y<a;y++){if(s=p[y],v=s.id,v===r&&s.ch===u)if(f)a=0;else break;k||(b=s.ch==="_"?l[v]:e[v].linkCtx.tag,s.open?b._prv=t:s.close&&(b._nxt=t)),w+=v.length+2}w&&n.setAttribute(c,n.getAttribute(c).slice(w)),o=t?t.getAttribute(c):i._dfr,(a=o.indexOf("/"+r+u)+1)&&(o=p.tokens.slice(0,w)+o.slice(a+(f?-1:r.length+1))),o&&(t?t.setAttribute(c,o):i._dfr=o)}else i._dfr=ut(i._dfr,"#"+r+u),f||t||(i._dfr=ut(i._dfr,"/"+r+u))}if(!t)throw"requires jQuery";if(!t.views)throw"requires JsRender";if(!t.observable)throw"requires jquery.observable";if(!t.link){var st,p,v,w,ii,ht,b,ri,ui,fi,f=n.document,r=t.views,u=r.sub,o=r.settings,k=u.extend,a=u.View(i,"top"),d=t.isFunction,hr=r.templates,nt=t.observable,ei=nt.observe,c="data-jsv",y=o.linkAttr||"data-link",oi=o.propChng=o.propChng||"propertyChange",ct=u.arrChng=u.arrChng||"arrayChange",su=u._cbBnds=u._cbBnds||{},si="change.jsv",lt="onBeforeChange",at="onAfterChange",cr="onAfterCreate",hi='"><\/script>',ci='<script type="jsv',vt="script,["+c+"]",tt=vt+",["+y+"]",li={value:"val",input:"val",html:"html",text:"text"},ai={from:{fromAttr:"value"},to:{toAttr:"value"}},lr=t.cleanData,ar=o.delimiters,g=u.error,vr=u.syntaxError,yr=/<(?!script)(\w+)(?:[^>]*(on\w+)\s*=)?[^>]*>/,vi=f.createDocumentFragment(),yt=f.querySelector,pt={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1},pr={tr:"table"},s=o.wrapMap={option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],area:[1,"<map>","<\/map>"],svg:[1,"<svg>","<\/svg>"],div:[1,"x<div>","<\/div>"]},wr={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},yi={},l={0:a},e={},pi=1,br=/^#(view\.?)?/,kr=/(^|(\/>)|(<\/\w+>)|>|)(\s*)([#\/]\d+[_^])`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|(<\/\w+>)(\s*)|(\/>)\s*)/g,wi=/(#)()(\d+)(_)/g,dr=/(#)()(\d+)([_^])/g,gr=/(?:(#)|(\/))(\d+)(_)/g,nu=/(#)()(\d+)(\^)/g,tu=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g;s.optgroup=s.option,s.tbody=s.tfoot=s.colgroup=s.caption=s.thead,s.th=s.td,u.onStoreItem=function(n,i,r){r&&n===hr&&(r.link=gi,r.unlink=sr,i&&(t.link[i]=function(){return gi.apply(r,arguments)},t.unlink[i]=function(){return sr.apply(r,arguments)}))},(o.delimiters=function(){var n=ar.apply(r,arguments);return ii=n[0],ht=n[1],b=n[2],ri=n[3],ui=n[4],w=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+ui+")?(\\"+ht+u.rTag+"\\"+b+")","g"),this})(),u.viewInfos=h,st={addViews:function(n,t,i){var u,o,r=this,f=t.length,e=r.views;if(!r._.useKey&&f&&(i=r.tmpl)&&(o=e.length+f,di(r,n,i,e,t,r.ctx)!==!1))for(u=n+f;u<o;u++)nt(e[u]).setProperty("index",u);return r},removeViews:function(n,r,u){function o(n){var h,c,e,o,s,a,r=f[n];if(r&&r.link){h=r._.id,u||(a=r.nodes()),r.removeViews(i,i,!0),r.data=i,o=r._prv,s=r._nxt,e=r.parentElem,u||(r._elCnt&&ti(o,s,e,h,"_"),t(a).remove()),r._elCnt||(o.parentNode&&e.removeChild(o),s.parentNode&&e.removeChild(s)),wt(r);for(c in r._.bnds)ot(c);delete l[h]}}var e,a,s,h=this,c=!h._.useKey,f=h.views;if(c&&(s=f.length),n===i)if(c){for(e=s;e--;)o(e);h.views=[]}else{for(a in f)o(a);h.views={}}else if(r===i&&(c?r=1:(o(n),delete f[n])),c&&r){for(e=n+r;e-->n;)o(e);if(f.splice(n,r),s=f.length)while(n<s)nt(f[n]).setProperty("index",n++)}return this},refresh:function(n){var t=this,i=t.parent;return i&&(di(t,t.index,t.tmpl,i.views,t.data,n,!0),wt(t)),t},nodes:ur,contents:rr,childTags:fr,link:uu},o.merge={input:{from:{fromAttr:ou},to:{toAttr:"value"}},textarea:ai,select:ai,optgroup:{from:{fromAttr:"label"},to:{toAttr:"label"}}},o.debugMode&&(fi=!o.noValidate,n._jsv={views:l,bindings:e}),k(t,{view:r.view=v=function(n,r,u){r!==!!r&&(u=r,r=i);var e,o,c,v,w,s,b,y,p=0,k=f.body;if(n&&n!==k&&a._.useKey>1&&(n=""+n===n?t(n)[0]:n.jquery?n[0]:n,n))if(r){for(y=yt?n.querySelectorAll(vt):t(vt,n).get(),s=y.length,c=0;c<s;c++)for(b=y[c],o=h(b,i,wi),v=0,w=o.length;v<w;v++)if(e=o[v],(e=l[e.id])&&(e=e&&u?e.get(!0,u):e,e))return e}else while(n){if(o=h(n,i,gr))for(s=o.length;s--;)if(e=o[s],e.open){if(p<1)return e=l[e.id],e&&u?e.get(u):e||a;p--}else p++;n=n.previousSibling||n.parentNode}return r?i:a},link:r.link=dt,unlink:r.unlink=ni,cleanData:function(n){n.length&&(et(n),lr.call(t,n))}}),k(t.fn,{link:function(n,t,i,r,u,f){return dt(n,this,t,i,r,u,f)},unlink:function(n){return ni(n,this)},view:function(n){return v(this[0],n)}}),k(a,{tmpl:{links:{},tags:{}}}),k(a,st),a._.onRender=it}}(this,this.jQuery);
//jsviews.js v1.0.0-alpha: http://jsviews.com
