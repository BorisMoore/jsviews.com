/*! jsviews.js v1.0.0-alpha single-file version:
includes JsRender, JsObservable and JsViews  http://github.com/BorisMoore/jsrender and http://jsviews.com/jsviews
informal pre V1.0 commit counter: 46 (Beta Candidate) */
(function(n,t,i){"use strict";function it(n,t){t&&t.onError&&t.onError(n)===!1||(this.name="JsRender Error",this.message=n||"JsRender error")}function o(n,t){var i;n=n||{};for(i in t)n[i]=t[i];return n}function ct(n,t,i){return(!w.rTag||n)&&(v=n?n.charAt(0):v,y=n?n.charAt(1):y,f=t?t.charAt(0):f,c=t?t.charAt(1):c,k=i||k,n="\\"+v+"(\\"+k+")?\\"+y,t="\\"+f+"\\"+c,a="(?:(?:(\\w+(?=[\\/\\s\\"+f+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+f+"]|\\"+f+"(?!\\"+c+"))*?)",w.rTag=a+")",a=new RegExp(n+a+"(\\/)?|(?:\\/(\\w+)))"+t,"g"),et=new RegExp("<.*>|([^\\\\]|^)[{}]|"+n+".*"+t)),[v,y,f,c,k]}function si(n,t){t||(t=n,n=i);var e,f,o,u,r=this,s=!t||t==="root";if(n){if(u=r.type===t?r:i,!u)if(e=r.views,r._.useKey){for(f in e)if(u=e[f].get(n,t))break}else for(f=0,o=e.length;!u&&f<o;f++)u=e[f].get(n,t)}else if(s)while(r.parent.parent)u=r=r.parent;else while(r&&!u)u=r.type===t?r:i,r=r.parent;return u}function lt(){var n=this.get("item");return n?n.index:i}function at(){return this.index}function hi(n){var r,u=this,f=u.linkCtx,t=(u.ctx||{})[n];return t===i&&f&&f.ctx&&(t=f.ctx[n]),t===i&&(t=wi[n]),t&&typeof t=="function"&&(r=function(){return t.apply(this||u,arguments)},o(r,t)),r||t}function ci(n,t,u){var c,f,s,e=+u===u&&u,o=t.linkCtx;return e&&(u=(e=t.tmpl.bnds[e-1])(t.data,t,r)),s=u.args[0],(n||e)&&(f=o&&o.tag||{_:{inline:!o,bnd:e},tagName:n+":",flow:!0,_is:"tag"},o&&(o.tag=f,f.linkCtx=f.linkCtx||o,u.ctx=h(u.ctx,o.view.ctx)),f.tagCtx=u,u.view=t,f.ctx=u.ctx||{},delete u.ctx,t._.tag=f,n=n!=="true"&&n,n&&((c=t.getRsc("converters",n))||l("Unknown converter: {{"+n+":"))&&(f.depends=c.depends,s=c.apply(f,u.args)),s=e&&t._.onRender?t._.onRender(s,t,e):s,t._.tag=i),s}function li(n,t){for(var f,e,u=this;f===i&&u;)e=u.tmpl[n],f=e&&e[t],u=u.parent;return f||r[n][t]}function ai(n,t,u,f,s){var et,c,ot,it,g,v,ut,p,a,nt,k,st,w,ft,b="",tt=+f===f&&f,y=t.linkCtx||0,d=t.ctx,ht=u||t.tmpl,ct=t._;for(n._is==="tag"&&(c=n,n=c.tagName),tt&&(f=(st=ht.bnds[tt-1])(t.data,t,r)),ut=f.length,c=c||y.tag,v=0;v<ut;v++)a=f[v],k=a.tmpl,k=a.content=k&&ht.tmpls[k-1],u=a.props.tmpl,v||u&&c||(w=t.getRsc("tags",n)||l("Unknown tag: {{"+n+"}}")),u=u||(c?c:w).template||k,u=""+u===u?t.getRsc("templates",u)||e(u):u,o(a,{tmpl:u,render:rt,index:v,view:t,ctx:h(a.ctx,d)}),c||(w._ctr?(c=new w._ctr,ft=!!c.init,c.attr=c.attr||w.attr||i):c={render:w.render},c._={inline:!y},y&&(y.attr=c.attr=y.attr||c.attr,y.tag=c,c.linkCtx=y),(c._.bnd=st||y.fn)?c._.arrVws={}:c.dataBoundOnly&&l("{^{"+n+"}} tag must be data-bound"),c.tagName=n,c.parent=g=d&&d.tag,c._is="tag",c._def=w),ct.tag=c,a.tag=c,c.tagCtxs=f,c.flow||(nt=a.ctx=a.ctx||{},ot=c.parents=nt.parentTags=d&&h(nt.parentTags,d.parentTags)||{},g&&(ot[g.tagName]=g),nt.tag=c);for(c.rendering={},v=0;v<ut;v++)a=c.tagCtx=f[v],c.ctx=a.ctx,!v&&ft&&(c.init(a,y,c.ctx),ft=i),p=i,(et=c.render)&&(p=et.apply(c,a.args)),p=p!==i?p:a.tmpl&&a.render()||(s?i:""),b=b?b+(p||""):p;return delete c.rendering,c.tagCtx=c.tagCtxs[0],c.ctx=c.tagCtx.ctx,c._.inline&&(it=c.attr)&&it!=="html"&&(b=it==="text"?bt.html(b):""),tt&&t._.onRender?t._.onRender(b,t,tt):b}function d(n,t,i,r,u,f,e,o){var a,h,c,v=t==="array",l={key:0,useKey:v?0:1,id:""+oi++,onRender:o,bnds:{}},s={data:r,tmpl:u,content:e,views:v?[]:{},parent:i,type:t,get:si,getIndex:at,getRsc:li,hlp:hi,_:l,_is:"view"};return i?(a=i.views,h=i._,h.useKey?(a[l.key="_"+h.useKey++]=s,s.index=b.debugMode?ki:"",s.getIndex=lt,c=h.tag,l.bnd=v&&(!c||!!c._.bnd&&c)):a.splice(l.key=s.index=f,0,s),s.ctx=n||i.ctx):s.ctx=n,s}function vi(n){var t,i,r,u,f;for(t in p)if(u=p[t],(f=u.compile)&&(i=n[t+"s"]))for(r in i)i[r]=f(r,i[r],n,t,u)}function yi(n,t,i){var u,r;return typeof t=="function"?t={depends:t.depends,render:t}:((r=t.template)&&(t.template=""+r===r?e[r]||e(r):r),t.init!==!1&&(u=t._ctr=function(){},(u.prototype=t).constructor=u)),i&&(t._parentTmpl=i),t}function vt(r,u,f,o,s,c){function v(i){if(""+i===i||i.nodeType>0){try{a=i.nodeType>0?i:!et.test(i)&&t&&t(n.document).find(i)[0]}catch(u){}return a&&(i=a.getAttribute(ht),r=r||i,i=e[i],i||(r=r||"_"+ei++,a.setAttribute(ht,r),i=e[r]=vt(r,a.innerHTML,f,o,s,c))),i}}var l,a;return u=u||"",l=v(u),c=c||(u.markup?u:{}),c.tmplName=r,f&&(c._parentTmpl=f),!l&&u.markup&&(l=v(u.markup))&&l.fn&&(l.debug!==u.debug||l.allowCode!==u.allowCode)&&(l=l.markup),l!==i?(r&&!f&&(tt[r]=function(){return u.render.apply(u,arguments)}),l.fn||u.fn?l.fn&&(u=r&&r!==l.tmplName?h(c,l):l):(u=yt(l,c),ut(l,u)),vi(c),u):void 0}function yt(n,t){var i,f=b.wrapMap||{},r=o({markup:n,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:rt},t);return t.htmlTag||(i=ui.exec(n),r.htmlTag=i?i[1].toLowerCase():""),i=f[r.htmlTag],i&&i!==f.div&&(r.markup=u.trim(r.markup)),r}function pi(n,t){function u(e,o,s){var l,h,a,c;if(e&&""+e!==e&&!e.nodeType&&!e.markup){for(a in e)u(a,e[a],o);return r}return o===i&&(o=e,e=i),e&&""+e!==e&&(s=o,o=e,e=i),c=s?s[f]=s[f]||{}:u,h=t.compile,(l=w.onBeforeStoreItem)&&(h=l(c,e,o,h)||h),e?o===null?delete c[e]:c[e]=h?o=h(e,o,s,n,t):o:o=h(i,o),h&&o&&(o._is=n),(l=w.onStoreItem)&&l(c,e,o,h),o}var f=n+"s";r[f]=u,p[n]=t}function rt(n,t,f,o,s,c){var w,ut,nt,y,tt,it,rt,b,p,ft,k,et,a,v=this,ot=!v.attr||v.attr==="html",g="";if(o===!0&&(rt=!0,o=0),v.tag?(b=v,v=v.tag,ft=v._,et=v.tagName,a=b.tmpl,t=h(t,v.ctx),p=b.content,b.props.link===!1&&(t=t||{},t.link=!1),f=f||b.view,n=n===i?f:n):a=v.jquery&&(v[0]||l('Unknown template: "'+v.selector+'"'))||v,a&&(!f&&n&&n._is==="view"&&(f=n),f&&(p=p||f.content,c=c||f._.onRender,n===f&&(n=f.data,s=!0),t=h(t,f.ctx)),f&&f.data!==i||((t=t||{}).root=n),a.fn||(a=e[a]||e(a)),a)){if(c=(t&&t.link)!==!1&&ot&&c,k=c,c===!0&&(k=i,c=f._.onRender),t=a.helpers?h(a.helpers,t):t,u.isArray(n)&&!s)for(y=rt?f:o!==i&&f||d(t,"array",f,n,a,o,p,c),w=0,ut=n.length;w<ut;w++)nt=n[w],tt=d(t,"item",y,nt,a,(o||0)+w,p,c),it=a.fn(nt,tt,r),g+=y._.onRender?y._.onRender(it,tt):it;else y=rt?f:d(t,et||"data",f,n,a,o,p,c),ft&&!v.flow&&(y.tag=v),g+=a.fn(n,y,r);return k?k(g,y):g}return""}function l(n){throw new w.Error(n);}function s(n){l("Syntax error\n"+n)}function ut(n,t,i,r){function v(t){t-=f,t&&h.push(n.substr(f,t).replace(nt,"\\n"))}function c(t){t&&s('Unmatched or missing tag: "{{/'+t+'}}" in template:\n'+n)}function y(e,a,y,w,b,k,d,g,tt,it,rt,ut){k&&(b=":",w="html"),it=it||i;var at,st,ht=a&&[],ot="",et="",ct="",lt=!it&&!b&&!d;y=y||b,v(ut),f=ut+e.length,g?p&&h.push(["*","\n"+tt.replace(ni,"$1")+"\n"]):y?(y==="else"&&(ri.test(tt)&&s('for "{{else if expr}}" use "{{else expr}}"'),ht=u[6],u[7]=n.substring(u[7],ut),u=o.pop(),h=u[3],lt=!0),tt&&(tt=tt.replace(nt," "),ot=ft(tt,ht,t).replace(ii,function(n,t,i){return t?ct+=i+",":et+=i+",",""})),et=et.slice(0,-1),ot=ot.slice(0,-1),at=et&&et.indexOf("noerror:true")+1&&et||"",l=[y,w||!!r||"",ot,lt&&[],'params:"'+tt+'",props:{'+et+"}"+(ct?",ctx:{"+ct.slice(0,-1)+"}":""),at,ht||0],h.push(l),lt&&(o.push(u),u=l,u[7]=f)):rt&&(st=u[0],c(rt!==st&&st!=="else"&&rt),u[7]=n.substring(u[7],ut),u=o.pop()),c(!u&&rt),h=u[3]}var l,p=t&&t.allowCode,e=[],f=0,o=[],h=e,u=[,,,e];return n=n.replace(ti,"\\$&"),c(o[0]&&o[0][3].pop()[0]),n.replace(a,y),v(n.length),(f=e[e.length-1])&&c(""+f!==f&&+f[7]===f[7]&&f[0]),pt(e,i?n:t,i)}function pt(n,i,r){var c,f,e,l,a,y,st,ht,ct,lt,ft,p,o,et,v,tt,w,it,at,k,vt,wt,ot,rt,d,h=0,u="",g="",ut={},bt=n.length;for(""+i===i?(v=r?'data-link="'+i.replace(nt," ").slice(1,-1)+'"':i,i=0):(v=i.tmplName||"unnamed",i.allowCode&&(ut.allowCode=!0),i.debug&&(ut.debug=!0),p=i.bnds,et=i.tmpls),c=0;c<bt;c++)if(f=n[c],""+f===f)u+='\nret+="'+f+'";';else if(e=f[0],e==="*")u+=""+f[1];else{if(l=f[1],a=f[2],it=f[3],y=f[4],g=f[5],at=f[7],(wt=e==="else")||(h=0,p&&(o=f[6])&&(h=p.push(o))),(ot=e===":")?(l&&(e=l==="html"?">":l+e),g&&(rt="prm"+c,g="try{var "+rt+"=["+a+"][0];}catch(e){"+rt+'="";}\n',a=rt)):(it&&(tt=yt(at,ut),tt.tmplName=v+"/"+e,pt(it,tt),et.push(tt)),wt||(w=e,vt=u,u=""),k=n[c+1],k=k&&k[0]==="else"),y+=",args:["+a+"]}",ot&&o||l&&e!==">"){if(d=new Function("data,view,j,u"," // "+v+" "+h+" "+e+"\n"+g+"return {"+y+";"),d.paths=o,d._ctxs=e,r)return d;ft=1}if(u+=ot?"\n"+(o?"":g)+(r?"return ":"ret+=")+(ft?(ft=0,lt=!0,'c("'+l+'",view,'+(o?(p[h-1]=d,h):"{"+y)+");"):e===">"?(ht=!0,"h("+a+");"):(ct=!0,"(v="+a+")!="+(r?"=":"")+'u?v:"";')):(st=!0,"{view:view,tmpl:"+(it?et.length:"0")+","+y+","),w&&!k){if(u="["+u.slice(0,-1)+"]",(r||o)&&(u=new Function("data,view,j,u"," // "+v+" "+h+" "+w+"\nreturn "+u+";"),o&&((p[h-1]=u).paths=o),u._ctxs=e,r))return u;u=vt+'\nret+=t("'+w+'",view,this,'+(h||u)+");",o=0,w=0}}u="// "+v+"\nvar j=j||"+(t?"jQuery.":"js")+"views"+(ct?",v":"")+(st?",t=j._tag":"")+(lt?",c=j._cnvt":"")+(ht?",h=j.converters.html":"")+(r?";\n":',ret="";\n')+(b.tryCatch?"try{\n":"")+(ut.debug?"debugger;":"")+u+(r?"\n":"\nreturn ret;\n")+(b.tryCatch?"\n}catch(e){return j._err(e);}":"");try{u=new Function("data,view,j,u",u)}catch(kt){s("Compiled template code:\n\n"+u,kt)}return i&&(i.fn=u),u}function ft(n,t,i){function b(n){t&&(n?t[n]=t.pop():t.push(u=[]))}function d(d,g,nt,tt,it,rt,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,gt){function ti(n,i,r,f,s,h,c,l){if(r&&(t&&(!e||o)&&(o?u=u[o]=[]:u.push(u=[]),u.push(it.slice(i.length))),r!==".")){var a=(f?'view.hlp("'+f+'")':s?"view":"data")+(l?(h?"."+h:f?"":s?"":"."+r)+(c||""):(l=f?"":s?h||"":r,""));return a=a+(l?"."+l:""),i+(a.slice(0,9)==="view.data"?a.slice(5):a)}return n}var ni;if(rt=rt||"",nt=nt||g||lt,it=it||st,ht=ht||wt||"",et)s(n);else return t&&pt&&!l&&!h&&(!e||o||p)&&(ni=w[r],gt.length-1>kt-ni&&(ni=gt.slice(ni,kt+1),pt=y+":"+ni+f,pt=k[pt]=k[pt]||ut(v+pt+c,i,!0),pt.paths||ft(ni,pt.paths=[],i),(p||u).push({_jsvOb:pt}))),l?(l=!at,l?d:'"'):h?(h=!vt,h?d:'"'):(nt?(r++,w[r]=kt++,nt):"")+(bt?r?"":(b(e),e)?(e=o=p=!1,"\b"):",":ot?(r&&s(n),e=it,o=tt,b(e,tt),"\b"+it+":"):it?it.split("^").join(".").replace(dt,ti)+(ht?(a[++r]=!0,it.charAt(0)!=="."&&(w[r]=kt),ht):rt):rt?rt:yt?(a[r--]=!1,yt)+(ht?(a[++r]=!0,ht):""):ct?(a[r]||s(n),","):g?"":(l=at,h=vt,'"'))}u=t;var e,p,o,u,k=i.links,a={},w={0:-1},r=0,h=!1,l=!1;return(n+" ").replace(/\)\^/g,").").replace(gt,d)}function h(n,t){return n&&n!==t?t?o(o({},t),n):n:t&&o({},t)}function wt(n){return st[n]||(st[n]="&#"+n.charCodeAt(0)+";")}function kt(n){var t=this,f=t.tagCtx,e=!arguments.length,r="",o=e||0;return t.rendering.done||(e?r=i:n!==i&&(n=t.prep?t.prep(n):n,r+=f.render(n),o+=u.isArray(n)?n.length:1),(t.rendering.done=o)&&(t.selected=f.index)),r}if((!t||!t.views)&&!n.jsviews){var u,g,a,et,v="{",y="{",f="}",c="}",k="^",dt=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,gt=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g,nt=/[ \t]*(\r\n|\n|\r)/g,ni=/\\(['"])/g,ti=/['"\\]/g,ii=/\x08(~)?([^\x08]+)\x08/g,ri=/^if\s/,ui=/<(\w+)[>\s]/,ot=/[\x00`><"'&]/g,fi=ot,ei=0,oi=0,st={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},ht="data-jsv-tmpl",tt={},p={template:{compile:vt},tag:{compile:yi},helper:{},converter:{}},r={jsviews:"v1.0.0-beta",render:tt,settings:{delimiters:ct,debugMode:!0,tryCatch:!0},sub:{View:d,Error:it,tmplFn:ut,parse:ft,extend:o,error:l,syntaxError:s},_cnvt:ci,_tag:ai,_err:function(n){return b.debugMode?"Error: "+(n.message||n)+". ":""}};(it.prototype=new Error).constructor=it,lt.depends=function(){return[this.get("item"),"index"]},at.depends=function(){return["index"]};for(g in p)pi(g,p[g]);var e=r.templates,bt=r.converters,wi=r.helpers,bi=r.tags,w=r.sub,b=r.settings,ki="Error: #index in nested view: use #getIndex()";t?(u=t,u.fn.render=rt):(u=n.jsviews={},u.isArray=Array&&Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"}),u.render=tt,u.views=r,u.templates=e=r.templates,bi({"else":function(){},"if":{render:function(n){var t=this;return t.rendering.done||!n&&(arguments.length||!t.tagCtx.index)?"":(t.rendering.done=!0,t.selected=t.tagCtx.index,t.tagCtx.render())},onUpdate:function(n,t,i){for(var r,f,u=0;(r=this.tagCtxs[u])&&r.args.length;u++)if(r=r.args[0],f=!r!=!i[u].args[0],!!r||f)return f;return!1},flow:!0},"for":{render:kt,onArrayChange:function(n,t){var i,u=this,r=t.change;if(this.tagCtxs[1]&&(r==="insert"&&n.target.length===t.items.length||r==="remove"&&!n.target.length||r==="refresh"&&!t.oldItems.length!=!n.target.length))this.refresh();else for(i in u._.arrVws)i=u._.arrVws[i],i.data===n.target&&i._.onArrayChange.apply(i,arguments);n.done=!0},flow:!0},props:{prep:function(n){var t,i=[];for(t in n)i.push({key:t,prop:n[t]});return i},render:kt,flow:!0},include:{flow:!0},"*":{render:function(n){return n},flow:!0}}),bt({html:function(n){return n!=i?String(n).replace(fi,wt):""},attr:function(n){return n!=i?String(n).replace(ot,wt):n===null?n:""},url:function(n){return n!=i?encodeURI(String(n)):n===null?n:""}}),ct()}})(this,this.jQuery),function(n,t,i){"use strict";function e(n){return s(n)?new k(n):new b(n)}function b(n){return this._data=n,this}function k(n){return this._data=n,this}function d(n){return s(n)?[n]:n}function rt(n,t){n=s(n)?n:[n];for(var i,u=t,e=u,h=n.length,r=[],o=0;o<h;o++){if(i=n[o],f(i)){r=r.concat(rt(i.call(t,t),t));continue}else if(""+i!==i){t=e=i,e!==u&&r.push(u=e);continue}e!==u&&r.push(u=e),r.push(i)}return r}function ut(n,t){var r,i;for(r in n){i=!0;break}i||delete p[t]}function g(n,t){if(!(n.data&&n.data.off)){var r=t.oldValue,i=n.data,u=i.paths;n.type===v?(i.cb.array||i.cb)(n,t):(i.prop===t.path||i.prop==="*")&&(typeof r===c&&(u[0]||s(r))&&o(d(r),u,i.cb,!0),typeof(r=t.value)===c&&(u[0]||s(r))&&o(d(r),u,i.cb),i.cb(n,t))}}function y(){function yt(i,f,o,c){var y=it(n),p=d(n);if(u=0,l||c)y&&(t(p).off(i,g),u&&delete u[t.data(n,"obId")]);else{if(e=y&&t._data(n))for(e=e&&e.events,e=e&&e[o?v:a],vt=e&&e.length;vt--;)if((k=e[vt].data)&&k.cb._bnd===s._bnd){if(o)return;(f==="*"&&k.prop!==f||k.prop===h)&&(t(n).off(i,g),u&&delete u[t.data(n,"obId")])}t(p).on(i,null,o?{cb:s}:{fullPath:r,paths:f?[f]:[],prop:h,cb:s},g);wt&&(wt[t.data(n,"obId")||t.data(n,"obId",ct++)]=n)}}function ui(n,i){n._ob=nt(n,st);var r=st;return function(u,f){var e=n._ob,h=i.length;typeof e===c&&(pt(e,!0),(h||t.isArray(e))&&o(e,i,s,nt,!0)),e=n._ob=nt(n,r),typeof e===c&&(pt(e),(h||t.isArray(e))&&o(e,i,s,nt,r)),s(u,f)}}function pt(r,u,f){if(f||t.isArray(r)){var e=n;n=r,yt(v+".observe"+(s?".obs"+s._bnd:""),i,!0,u),n=e}}var ot,dt,ni,b,h,r,gt,l,s,at,vt,k,e,nt,ti,wt,bt,ii,ri=1,kt=ht,y=Array.apply(0,arguments),tt=y.pop(),st=y.shift(),et=st,n=et,ft=y.length;for(f(tt)?s=tt:(tt===!0?l=tt:tt&&(st=tt,ri=0),tt=y[ft-1],(ft&&tt===i||f(tt))&&(s=y.pop(),ft--)),ft&&f(y[ft-1])&&(nt=s,s=y.pop(),ft--),t.isArray(et)?pt(et,l,!0):(kt+=l?s?".obs"+s._bnd:"":".obs"+(at=s._bnd=s._bnd||lt++),l&&ft===0&&et&&yt(kt,"")),l||(wt=p[at]=p[at]||{}),bt=0,ot=0;ot<ft;ot++)if(r=y[ot],r!==""){if(n=et,""+r===r){if(b=r.split("^"),b[1]&&(bt=b[0].split(".").length,r=b.join("."),bt=r.split(".").length-bt),nt&&(ti=nt(r,et))){ft+=ti.length-1,w.apply(y,[ot--,1].concat(ti));continue}b=r.split(".")}else ri&&!f(r)&&(r._jsvOb&&(l||(r._cb=ii=ui(r,y.slice(ot+1)),r._rt=st,ii._bnd=s._bnd),o(r._rt,y.slice(0,ot),r._cb,nt,l),r=r._ob),n=r),et=r,b=[et];while(n&&(h=b.shift())!==i)if(typeof n===c){if(""+h===h){if(h==="")continue;if(b.length<bt+1&&!n.nodeType){if(!l&&(e=it(n)&&t._data(n))){for(e=e.events,e=e&&e.propertyChange,vt=e&&e.length,ni=0;vt--;)k=e[vt].data,k&&k.cb===s&&(k.prop===h||k.prop==="*")&&((dt=b.join("."))&&k.paths.push(dt),ni++);if(ni){n=n[h];continue}}if(h==="*"){!l&&e&&e.length&&yt(kt,"",!1,!0),f(n)?(gt=n.depends)&&o(gt,s,l||st):yt(kt,"");for(dt in n)pt(n[dt],l);break}else h&&yt(kt+"."+h,b.join("."))}h=n[h]}if(f(h)){(gt=h.depends)&&o(n,rt(gt,n),s,nt,l||st);break}n=h}pt(n,l)}return at&&ut(wt,at),{cbId:at,bnd:wt,leaf:n}}function vt(){return[].push.call(arguments,!0),y.apply(this,arguments)}function o(){return y.apply(0,[].concat.apply([],arguments))}function ft(n){r(this._data,n)}function et(n){r(this._data,n,!0)}function r(n,u,f,o){function l(n,t){switch(t.change){case"insert":r(t.items,u,!1,0);break;case"remove":r(t.items,u,!0,0);break;case"refresh":r(t.oldItems,u,!0,0),r(n.target,u,!1,0);break;case"set":r(t.oldValue,u,!0,0),r(t.value,u,!1,0)}u.apply(this,arguments)}var s,h=t.isArray(n)?"":"*";if(typeof n===c)if(u?(h||o!==0)&&(l._bnd=u._bnd,y(n,h,l,f),u._bnd=l._bnd):y(n,h,i,f),h){o=o||e.filter;for(s in n)r((o||ot)(s,n),u,f,0)}else for(s=n.length;s--;)r(n[s],u,f,0)}function ot(n,i){if(!at.test(n)){var r=i[n];return r+""!==r&&t.isFunction(r)?r.set&&r.call(i):r}}if(!t)throw"requires jQuery or JsRender";if(!t.observable){var u,nt,tt=t.event.special,h=t.views?t.views.sub:{},w=[].splice,s=t.isArray,st=t.expando,c="object",l=parseInt,a=h.propChng=h.propChng||"propertyChange",v=h.arrChng=h.arrChng||"arrayChange",p=h._cbBnds=h._cbBnds||{},ht=a+".observe",f=t.isFunction,ct=1,lt=1,it=t.hasData,at=/^_|^jquery/i;t.observable=e,e.filter=ot,e.Object=b,e.Array=k,t.observe=e.observe=y,t.unobserve=e.unobserve=vt,e._apply=o,b.prototype={_data:null,observeAll:ft,unobserveAll:et,data:function(){return this._data},setProperty:function(n,t,r){var u,h,o,f=this,e=f._data;if(n=n||"",e)if(s(n))for(u=n.length;u--;)h=n[u],f.setProperty(h.name,h.value,r===i||r);else if(""+n!==n)for(u in n)f.setProperty(u,n[u],t);else if(n.indexOf(st)<0){for(o=n.split(".");e&&o.length>1;)e=e[o.shift()];f._setProperty(e,o.join("."),t,r)}return f},_setProperty:function(n,t,i,r){var e,o,u=t?n[t]:n;f(u)&&u.set&&(o=u,e=u.set===!0?u:u.set,u=u.call(n)),(u!==i||r&&u!=i)&&(!(u instanceof Date)||u>i||u<i)&&(e?(e.call(n,i),i=o.call(n)):n[t]=i,this._trigger(n,{change:"set",path:t,value:i,oldValue:u}))},_trigger:function(n,i){t(n).triggerHandler(a,i)}},k.prototype={_data:null,observeAll:ft,unobserveAll:et,data:function(){return this._data},insert:function(n,t){var i=this._data;return arguments.length===1&&(t=n,n=i.length),n=l(n),n>-1&&n<=i.length&&(t=s(t)?t:[t],t.length&&this._insert(n,t)),this},_insert:function(n,t){var i=this._data,r=i.length;w.apply(i,[n,0].concat(t)),this._trigger({change:"insert",index:n,items:t},r)},remove:function(n,t){var r,u=this._data;return n===i&&(n=u.length-1),n=l(n),t=t?l(t):t===0?0:1,t>-1&&n>-1&&(r=u.slice(n,n+t),t=r.length,t&&this._remove(n,t,r)),this},_remove:function(n,t,i){var r=this._data,u=r.length;r.splice(n,t),this._trigger({change:"remove",index:n,items:i},u)},move:function(n,t,i){if(i=i?l(i):i===0?0:1,n=l(n),t=l(t),i>0&&n>-1&&t>-1&&n!==t){var r=this._data.slice(n,n+i);i=r.length,i&&this._move(n,t,i,r)}return this},_move:function(n,t,i,r){var u=this._data,f=u.length;u.splice(n,i),u.splice.apply(u,[t,0].concat(r)),this._trigger({change:"move",oldIndex:n,index:t,items:r},f)},refresh:function(n){var t=this._data.slice(0);return this._refresh(t,n),this},_refresh:function(n,t){var i=this._data,r=i.length;w.apply(i,[0,i.length].concat(t)),this._trigger({change:"refresh",oldItems:n},r)},_trigger:function(n,i){var r=this._data,u=r.length,f=t([r]);f.triggerHandler(v,n),u!==i&&f.triggerHandler(a,{change:"set",path:"length",value:u,oldValue:i})}},tt[a]=tt[v]={remove:function(n){(n=n.data)&&(n.off=1,n=n.cb)&&(u=p[nt=n._bnd])},teardown:function(){u&&(delete u[t.data(this,"obId")],ut(u,nt))}}}}(this,this.jQuery||this.jsviews),function(n,t,i){"use strict";function ur(n){var i=this.linkedElem;i&&ti({target:i[0],stopImmediatePropagation:t.noop},n)}function ti(n,r){var p,w,c,f,k,l,e,d,s,a,it,g,tt,u,h,v,y=n.target,rt=y._jsvBnd,ft=/&(\d+)\+?/g;if(rt)while(a=ft.exec(rt))if((a=o[a[1]])&&(h=a.to)){if(f=a.linkCtx,s=f.view,u=f.tag,d=t(y),g=s.hlp(yt),tt=s.hlp(pt),c=ut(y),p=kt[c],r===i&&(r=nt(c)?c(y):p?d[p]():d.attr(c)),l=h[1],h=h[0],l&&(k=nt(l)?l:s.getRsc("converters",l)),k&&(r=k.call(u,r)),it=s.linkCtx,s.linkCtx=f,v={change:"change",oldValue:f._val,value:r},(!g||!(w=g.call(f,n,v)===!1))&&(!u||!u.onBeforeChange||!(w=u.onBeforeChange(n,v)===!1))&&r!==i&&(e=h[0],r!==i&&e&&(e=e._jsvOb?e._ob:e,u&&(u._.chging=!0),b(e).setProperty(h[2]||h[1],r),tt&&tt.call(f,n,v),u))){if(u.onAfterChange)u.onAfterChange(n,v);delete u._.chging}s.linkCtx=it,w&&n.stopImmediatePropagation()}}function su(n,u,f){var c,h,e,o=this,y=o.data,a=o.elem,l=o.convert,p=a.parentNode,b=p,s=o.view,k=s.ctx,w=s.linkCtx,v=s.hlp(yt);if(s.linkCtx=o,p&&(!v||!(u&&v.call(o,n,u)===!1))&&!(u&&n.data.prop!=="*"&&n.data.prop!==u.path)){if(u&&(o.eventArgs=u),u||o._initVal){if(delete o._initVal,h=f.call(s.tmpl,y,s,r),c=hu(h,o,e,o.attr||ut(a,!0,l!==i)),e=o.tag){if(u&&e.onUpdate&&e.onUpdate(n,u,h)===!1||c==="none"){e.tagCtxs=h=h[0]?h:[h],e.tagCtx=h[0],c==="html"&&e.onBeforeLink&&e.onBeforeLink(),ot(e,e.tagCtx),ui(o,y,a),s.linkCtx=w;return}if(e._.chging)return;h=e.tagName.slice(-1)===":"?r._cnvt(e.tagName.slice(0,-1),s,h):r._tag(e,s,s.tmpl,h,!0)}else f._ctxs&&(l=l===""?"true":l,h=l?r._cnvt(l,s,h):r._tag(f._ctxs,s,s.tmpl,h,!0),e=s._.tag,c=o.attr||c);fr(h,o,c,e)&&u&&(v=s.hlp(pt))&&v.call(o,n,u)}e&&(e.contents=oi,e.nodes=si,e.childTags=hi,e.currentCtxs=ar,e.update=ur,e.refresh=yr,ot(e,e.tagCtx)),(e=o.tag)&&e.tagName.slice(-1)!==":"&&(o._hdlr.array=e.onArrayChange?function(n,t){o.tag.onArrayChange(n,t)}:t.noop),ui(o,y,a),s.linkCtx=w}}function hu(n,r,u,f){var e,h,c,o,s=u&&u.parentElem||r.elem;if(n!==i){if(o=t(s),f=u&&u.attr||f,nt(n)&&it(r.expr+": missing parens"),f==="visible"&&(f="css-display"),c=/^css-/.test(f)&&f.slice(4))e=t.style(s,c),+n===n&&(e=parseInt(e)),e=t.style(s,c);else if(f!=="link"){if(f==="value")s.type===wt&&(e=o.prop(f=p));else if(f===tt)if(s.value===""+n)e=o.prop(p);else return f;e===i&&(h=kt[f],e=h?o[h]():o.attr(f))}r._val=e}return f}function fr(n,r,u,f){var b,o,h,a,k,l,v=n!==i,d=r.data,e=f&&f.parentElem||r.elem,y=t(e),s=r.view,w=r._val,g=s.ctx,nt=s.linkCtx,c=f||u==="html";if(f&&(f.parentElem=f.parentElem||r.expr||f._elCnt?e:e.parentNode,o=f._prv,h=f._nxt),!v){u==="html"&&f&&f.onBeforeLink&&f.onBeforeLink();return}if(/^css-/.test(u))u==="css-display"&&(n=n?cu(e):"none"),(c=c||w!==n)&&t.style(e,u.slice(4),n);else if(u!=="link"){if(u===p)l=1,n=n&&n!=="false";else if(u===tt)if(e.value===""+n)n=!0,l=1,u=p;else{ui(r,d,e);return}else(u==="selected"||u==="disabled"||u==="multiple"||u==="readlonly")&&(n=n&&n!=="false"?u:null);(b=kt[u])?u==="html"?(s.linkCtx=r,s.ctx=r.ctx,f&&f._.inline?(k=f.nodes(!0),f._elCnt&&(o&&o!==h&&li(o,h,e,f._tgId,"^",!0),o=o?o.previousSibling:h?h.previousSibling:e.lastChild),t(k).remove(),f&&f.onBeforeLink&&f.onBeforeLink(),a=s.link(s.data,e,o,h,n,f&&{tag:f._tgId,lazyLink:f.tagCtx.props.lazyLink})):(v&&y.empty(),f&&f.onBeforeLink&&f.onBeforeLink(),v&&(a=s.link(d,e,o,h,n,f&&{tag:f._tgId}))),s.linkCtx=nt,s.ctx=g):(c=c||w!==n)&&(u==="text"&&e.children&&!e.children[0]?e.textContent!==i?e.textContent=n:e.innerText=n===null?"":n:y[b](n)):(c=c||w!==n)&&y[l?"prop":"attr"](u,n===i&&!l?null:n),r._val=n}return a||c}function er(n,t){var i=this,r=i.hlp(yt),u=i.hlp(pt);if(!r||r.call(this,n,t)!==!1){if(t){var o=t.change,f=t.index,e=t.items;switch(o){case"insert":i.addViews(f,e);break;case"remove":i.removeViews(f,e.length);break;case"move":i.refresh();break;case"refresh":i.refresh()}}u&&u.call(this,n,t)}}function cu(t){var i,u,e=n.getComputedStyle,r=(t.currentStyle||e.call(n,t,"")).display;return r!=="none"||(r=tr[u=t.nodeName])||(i=f.createElement(u),f.body.appendChild(i),r=(e?e.call(n,i,""):i.currentStyle).display,tr[u]=r,f.body.removeChild(i)),r}function ii(n){var f,e,u=n.data,r=n._.bnd;if(!n._.useKey&&r)if((e=n._.bndArr)&&(t([e[1]]).off(vt,e[0]),n._.bndArr=i),r!==!!r&&r._.inline)u?r._.arrVws[n._.id]=n:delete r._.arrVws[n._.id];else if(u){f=function(t){t.data&&t.data.off||er.apply(n,arguments)};t([u]).on(vt,f);n._.bndArr=[f,u]}}function ut(n,t,i){var u=n.nodeName.toLowerCase(),r=c.merge[u];return r?t?u==="input"&&n.type===tt?tt:r.to:r.from:t?i?"text":"html":""}function or(n,r,u,f,e,o,s){var p,c,v,w,b,l=n.parentElem,h=n._prv,a=n._nxt,y=n._elCnt;if(h&&h.parentNode!==l&&it("Missing parentNode"),s){w=n.nodes(),y&&h&&h!==a&&li(h,a,l,n._.id,"_",!0),n.removeViews(i,i,!0),c=a,y&&(h=h?h.previousSibling:a?a.previousSibling:l.lastChild),t(w).remove();for(b in n._.bnds)ht(b)}else{if(r){if(v=f[r-1],!v)return!1;h=v._nxt}y?(c=h,h=c?c.previousSibling:l.lastChild):c=h.nextSibling}p=u.render(e,o,n,s||r,n._.useKey&&s,!0),n.link(e,l,h,c,p,v)}function ri(n,t,r){var u,f,e;return r?(e="^`",f=t._.tag||{_:{inline:!0,bnd:r},tagCtx:{view:t},flow:!0},u=f._tgId,u||(o[u=ir++]=f,f._tgId=""+u)):(e="_`",l[u=t._.id]=t),"#"+u+e+(n===i?"":n)+"/"+u+e}function ui(n,t,r){var f,l,c,a=n.convertBack,u=n.tag,s=[],h=n._bndId||""+ir++,v=n._hdlr;if(delete n._bndId,u&&(c=u.linkedElem,s=u.depends||s,s=nt(s)?u.depends(u):s),!n._depends||""+n._depends!=""+s){if(n._depends&&b._apply(t,n._depends,v,!0),f=b._apply(t,n.fn.paths,s,v,n._ctxCb),f.elem=r,f.linkCtx=n,f._tgId=h,r._jsvBnd=r._jsvBnd||"",r._jsvBnd+="&"+h,c)for(f.to=[[],a],l=c.length;l--;)c[l]._jsvBnd=r._jsvBnd+"+";if(n._depends=s,n.view._.bnds[h]=h,o[h]=f,u){if(u.onAfterBind)u.onAfterBind(f);u.flow||u._.inline||(r.setAttribute(e,(r.getAttribute(e)||"")+"#"+h+"^/"+h+"^"),u._tgId=""+h)}(c||a!==i)&&vr(f,a)}}function sr(n,t,i,r,u,f){return fi(this,n,t,i,r,u,f)}function fi(n,r,u,e,o,s,c){if(n&&r){if(r=r.jquery?r:t(r),!w){w=f.body;t(w).on(wi,ti)}for(var p,d,g,k,y,b,a,nt,tt=ri,rt=e&&e.target==="replace",it=r.length;it--;)if(a=r[it],""+n===n)y=v(a),nt=y.ctx,y.ctx=e,ft(n,a,v(a),u),y.ctx=nt;else{if(o=o||v(a),n.markup!==i)o.link===!1&&(e=e||{},e.link=tt=!1),rt&&(b=a.parentNode),g=n.render(u,e,o,i,i,tt),b?(s=a.previousSibling,c=a.nextSibling,t.cleanData([a],!0),b.removeChild(a),a=b):(s=c=i,t(a).empty());else if(n!==!0)break;if(a._dfr&&!c){for(k=h(a._dfr,!0,rr),p=0,d=k.length;p<d;p++)y=k[p],(y=l[y.id])&&y.data!==i&&y.parent.removeViews(y._.key,i,!0);a._dfr=""}o.link(u,a,s,c,g,i,e)}}return r}function lu(n,r,u,a,p,w,b){function au(n,t,r,u,f,o,s,h,c,l,a,v){var y,w="";return k=h||c||"",u=u||l,r=r||v,vi&&!r&&(u||k||o)&&(vi=i,tt=ui.shift()),u=u||r,u&&(vi=i,at&&(r||v?ni[tt]||(y="'<"+tt+".../"):ni[u]?y="'<\/"+u:ui.length&&u===tt||(y="Mismatch: '<\/"+u),y&&gi(y+">' in:\n"+p)),fr=ut,tt=ui.shift(),ut=gt[tt],l=l?"<\/"+l+">":"",fr&&(vt+=pt,pt="",ut?vt+="-":(w=l+ki+"@"+vt+bi+(a||""),vt=cu.shift()))),ut?(o?pt+=o:t=l||v||"",k&&(t+=k,pt&&(t+=" "+e+'="'+pt+'"',pt=""))):t=o?t+w+f+ki+o+bi+s+k:w||n,k&&(ui.unshift(tt),tt=k.slice(1),ui[0]&&ui[0]===tu[tt]&&it("Parent of <tr> must be <tbody>"),vi=ni[tt],(ut=gt[tt])&&!fr&&(cu.unshift(vt),vt=""),fr=ut,vt&&ut&&(vt+="+")),t}function pi(n,t){var s,a,u,e,f,v,h,c=[];if(n){for(n._tkns.charAt(0)==="@"&&(t=d.previousSibling,d.parentNode.removeChild(d),d=null),bt=n.length;bt--;){if(ht=n[bt],u=ht.ch,s=ht.path)for(st=s.length-1;a=s.charAt(st--);)a==="+"?s.charAt(st)==="-"?(st--,t=t.previousSibling):t=t.parentNode:t=t.lastChild;u==="^"?(k=o[f=ht.id])&&(h=t&&(!d||d.parentNode!==t),(!d||h)&&(k.parentElem=t),ht.elCnt&&h&&(t._dfr=(ht.open?"#":"/")+f+u+(t._dfr||"")),c.push([h?null:d,ht])):(nt=l[f=ht.id])&&(nt.link||(nt.parentElem=t||d&&d.parentNode||r,g(nt,ct),nt._.onRender=ri,nt._.onArrayChange=er,ii(nt)),e=nt.parentElem,ht.open?(nt._elCnt=ht.elCnt,t?t._dfr="#"+f+u+(t._dfr||""):(nt._prv||(e._dfr=et(e._dfr,"#"+f+u)),nt._prv=d)):(t&&(!d||d.parentNode!==t)?(t._dfr="/"+f+u+(t._dfr||""),nt._nxt=i):d&&(nt._nxt||(e._dfr=et(e._dfr,"/"+f+u)),nt._nxt=d),li=nt.linkCtx,(v=nt.ctx&&nt.ctx.onAfterCreate||pu)&&v.call(li,nt)))}for(bt=c.length;bt--;)sr.push(c[bt])}return!n||n.elCnt}function vu(n){var t,i;if(n)for(bt=n.length,st=0;st<bt;st++)if(ht=n[st],yt.id)yt.id=yt.id!==ht.id&&yt.id;else if(i=k=o[ht.id].linkCtx.tag,!k.flow){if(!wr){for(t=1;i=i.parent;)t++;ir=ir||t}(wr||t===ir)&&(!br||k.tagName===br)&&pr.push(k)}}function uu(){for(hr=dt?r.querySelectorAll(rt):t(rt,r).get(),fi=hr.length,u&&u.innerHTML&&(wi=dt?u.querySelectorAll(rt):t(rt,u).get(),u=wi.length?wi[wi.length-1]:u),ir=0,wt=0;wt<fi;wt++)if(d=hr[wt],u&&!su)su=d===u;else if(a&&d===a)break;else d.parentNode&&lu(h(d,i,pr&&eu))&&!yt&&d.getAttribute(y)&&sr.push([d]);if(cr(u,ut),cr(a,ut),yt){kt&&kt.resolve();return}for(ut&&vt+pt&&(d=a,vt&&(a?pi(h(vt+"+",!0),a):pi(h(vt,!0),r)),pi(h(pt,!0),r),a&&(lt=a.getAttribute(e),(fi=lt.indexOf(or)+1)&&(lt=lt.slice(fi+or.length-1)),a.setAttribute(e,pt+lt))),fi=sr.length,wt=0;wt<fi;wt++)d=sr[wt],ti=d[1],d=d[0],ti?(k=o[ti.id],(li=k.linkCtx)&&(k=li.tag,k.linkCtx=li),ti.open?(d&&(k.parentElem=d.parentNode,k._prv=d),k._elCnt=ti.elCnt,!k||k.onBeforeLink&&k.onBeforeLink()===!1||k._.bound||(k._.bound=!0,nt=k.tagCtx.view,ft(i,k._prv,nt,nt.data||n,ti.id)),k._.linking=!0):(k._nxt=d,k._.linking&&(dr=k.tagCtx,nt=dr.view,k.contents=oi,k.nodes=si,k.childTags=hi,k.currentCtxs=ar,k.update=ur,k.refresh=yr,delete k._.linking,k._.bound||(k._.bound=!0,ft(i,k._prv,nt,nt.data||n,ti.id)),ot(k,dr)))):(nt=v(d),ft(d.getAttribute(y),d,nt,nt.data||n,i,b));kt&&kt.resolve()}var li,k,wt,fi,st,bt,hr,d,nt,ht,ti,wi,di,vr,tr,ei,pr,wr,br,dr,ir,yt,fu,gr,ou,ai,tt,vi,yi,rr,lt,ut,fr,ci,pt,or,su,kt,yu=c.noDomLevel0,iu=this,hu=iu._.id+"_",vt="",sr=[],ui=[],cu=[],pu=iu.hlp(kr),lu=pi;if(w&&(kt=w.lazyLink&&t.Deferred(),w.tmpl?vr="/"+w._.id+"_":(yt=w.get,w.tag&&(hu=w.tag+"^",w=!0)),w=w===!0),yt&&(lu=vu,pr=yt.tags,wr=yt.deep,br=yt.name),r=r?""+r===r?t(r)[0]:r.jquery?r[0]:r:iu.parentElem||f.body,tt=r.tagName.toLowerCase(),ut=!!gt[tt],u=u&&lr(u,ut),a=a&&lr(a,ut)||null,p!==i){if(rr=f.createElement("div"),yi=rr,or=pt="",ci=r.namespaceURI==="http://www.w3.org/2000/svg"?"svg_ns":(ai=nu.exec(p))&&ai[1]||"",yu&&ai&&ai[2]&&it("Unsupported: "+ai[2]),ut){for(ei=a;ei&&!(tr=h(ei));)ei=ei.nextSibling;(lt=tr?tr._tkns:r._dfr)&&(di=vr||"",(w||!vr)&&(di+="#"+hu),st=lt.indexOf(di),st+1&&(st+=di.length,or=pt=lt.slice(0,st),lt=lt.slice(st),tr?ei.setAttribute(e,lt):r._dfr=lt))}for(vi=i,p=(""+p).replace(ru,au),at&&ui.length&&gi("Mismatched '<"+tt+"...>' in:\n"+p),nr.appendChild(rr),ci=s[ci]||s.div,fu=ci[0],yi.innerHTML=ci[1]+p+ci[2];fu--;)yi=yi.lastChild;for(nr.removeChild(rr),gr=f.createDocumentFragment();ou=yi.firstChild;)gr.appendChild(ou);r.insertBefore(gr,a)}return kt?setTimeout(uu,0):uu(),kt&&kt.promise()}function ft(n,t,r,f,e,s){var p,a,w,c,b,g,v,y,l,h,nt;if(e)h=o[e],h=h.linkCtx?h.linkCtx.tag:h,l=h.linkCtx||{data:f,elem:h._elCnt?h.parentElem:t,view:r,ctx:r.ctx,attr:"html",fn:h._.bnd,tag:h,_bndId:e},hr(l,l.fn);else if(n&&t)for(p=r.tmpl,n=au(n,ut(t)),k.lastIndex=0;a=k.exec(n);)nt=k.lastIndex,w=e?"html":a[1],v=a[3],b=a[10],c=i,l={data:f,elem:h&&h._elCnt?h.parentElem:t,view:r,ctx:s||r.ctx,attr:w,_initVal:!a[2]},a[6]&&(!w&&(c=/:([\w$]*)$/.exec(b))&&(c=c[1],c!==i&&(g=-c.length-1,v=v.slice(0,g-1)+d,b=b.slice(0,g))),c===null&&(c=i),l.convert=a[5]||""),l.expr=w+v,y=p.links[v],y||(p.links[v]=y=u.tmplFn(ai+v+vi,p,!0,c),u.parse(b,y.paths=[],p)),l.fn=y,w||c===i||(l.convertBack=c),hr(l,y),k.lastIndex=nt}function hr(n,t){function i(i,r){su.call(n,i,r,t)}n._ctxCb=vu(n.view),n._hdlr=i,i(!0)}function et(n,t){var i;return n?(i=n.indexOf(t),i+1?n.slice(0,i)+n.slice(i+t.length):n):""}function ei(n){return n&&(""+n===n?n:n.tagName==="SCRIPT"?n.type.slice(3):n.nodeType===1&&n.getAttribute(e)||"")}function h(n,t,i){function e(n,t,i,r,e,o){u.push({elCnt:f,id:r,ch:e,open:t,close:i,path:o,token:n})}var f,r,u=[];if(r=t?n:ei(n))return u.elCnt=!n.type,f=r.charAt(0)==="@"||!n.type,u._tkns=r,r.replace(i||ou,e),u}function cr(n,t){n&&(n.type==="jsv"?n.parentNode.removeChild(n):t&&n.getAttribute(y)===""&&n.removeAttribute(y))}function lr(n,t){for(var i=n;t&&i&&i.nodeType!==1;)i=i.previousSibling;return i&&(i.nodeType!==1?(i=f.createElement("SCRIPT"),i.type="jsv",n.parentNode.insertBefore(i,n)):ei(i)||i.getAttribute(y)||i.setAttribute(y,"")),i}function au(n,i){return n=t.trim(n),n.slice(-1)!==d?n=lt+":"+n+(i?":":"")+d:n}function oi(n,r){n!==!!n&&(r=n,n=i);var f,u=t(this.nodes());return u[0]&&(f=r?u.filter(r):u,u=n&&r?f.add(u.find(r)):f),u}function si(n,t,i){var r,u=this,f=u._elCnt,o=!t&&f,e=[];for(t=t||u._prv,i=i||u._nxt,r=o?t===u._nxt?u.parentElem.lastSibling:t:u._.inline===!1?t||u.linkCtx.elem.firstChild:t&&t.nextSibling;r&&(!i||r!==i);)(n||f||r.tagName!=="SCRIPT")&&e.push(r),r=r.nextSibling;return e}function hi(n,t){n!==!!n&&(t=n,n=i);var r=this,o=r.link?r:r.tagCtx.view,u=r._prv,f=r._elCnt,e=[];return u&&o.link(i,r.parentElem,f?u.previousSibling:u,r._nxt,i,{get:{tags:e,deep:n,name:t,id:f&&r._tgId}}),e}function ar(){var n=this.tagCtx.view;return this._.bnd.call(n.tmpl,n.data,n,r)}function ot(n,t){var s,h,u,a,f,v,y,w,c,l=t.view,e=n.linkCtx=n.linkCtx||{tag:n,data:l.data,view:l,ctx:l.ctx};if(n.onAfterLink)n.onAfterLink(t,e);if(h=n.targetTag?n.targetTag.linkedElem:n.linkedElem,!n._.chging&&h&&(u=h[0])){if(a=u.type===tt,s=e.convert,f=s?nt(s)?s(t.args[0]):r._cnvt(s,l,t):t.args[0],u!==e.elem)for(w=h.length;w--;){if(u=h[w],c=u._jsvLnkdEl,n._.inline&&(!c||c!==n&&c.targetTag!==n))for(u._jsvLnkdEl=n,u._jsvBnd=e.elem?e.elem._jsvBnd:n._prv._jsvBnd,v=u._jsvBnd.slice(1).split("&"),y=v.length;y--;)vr(o[v[y]],e.convertBack);a&&(u[p]=f===u.value)}a||u.value===i||f===i||(u.type===wt?u[p]=f&&f!=="false":u.value=f)}}function vr(n,t){var e,f,r,o,u=n.linkCtx,s=u.data,i=u.fn.paths;if(n){for((e=i._jsvto)&&(i=e),f=i.length;f&&""+(r=i[--f])!==r;);r&&(!u.tag||u.tag.tagCtx.args.length)?(r=i[f]=r.split("^").join("."),n.to=r.charAt(0)==="."?[[o=i[f-1],r.slice(1)],t]:[u._ctxCb(i[0])||[s,i[0]],t],e&&o&&(n.to[0][0]=u._ctxCb(o,s))):n.to=[[],t]}}function yr(n){var u,f,t=this,e=t.linkCtx,o=t.tagCtx.view;return t.disposed&&it("Removed tag"),n===i&&(n=r._tag(t,o,o.tmpl,t.currentCtxs?t.currentCtxs():t.tagCtxs,!0)),n+""===n&&(f=t._.inline?"html":e.attr||ut(t.parentElem,!0),u=fr(n,e,f,t)),ot(t,t.tagCtx),u||t}function st(n){for(var e,o,c,r,s,t,u,a=[],v=n.length,f=v;f--;)a.push(n[f]);for(f=v;f--;)if(r=a[f],r.parentNode){if(u=r._jsvBnd)for(u=u.slice(1).split("&"),r._jsvBnd="",o=u.length;o--;)ht(u[o],r._jsvLnkdEl);if(s=h(ei(r)+(r._dfr||""),!0,uu))for(e=0,c=s.length;e<c;e++)t=s[e],t.ch==="_"?(t=l[t.id])&&t.data!==i&&t.parent.removeViews(t._.key,i,!0):ht(t.id)}}function ht(n,i){var c,e,r,s,h,f=o[n];if(f)if(e=f.linkCtx,r=e.tag,i)delete r.linkedElem;else{for(c in f.bnd)s=f.bnd[c],h=".obs"+f.cbId,t.isArray(s)?t([s]).off(vt+h).off(pi+h):t(s).off(pi+h),delete f.bnd[c];e=f.linkCtx,r&&(r.onDispose&&r.onDispose(),r._elCnt||(r._prv&&r._prv.parentNode.removeChild(r._prv),r._nxt&&r._nxt.parentNode.removeChild(r._nxt)),r.disposed=!0),delete e.view._.bnds[n],delete o[n],delete u._cbBnds[f.cbId]}}function ci(n,r){return n===i?(w&&(t(w).off(wi,ti),w=i),n=!0,a.removeViews(),st(f.body.getElementsByTagName("*"))):r&&(r=r.jquery?r:t(r),n===!0?r.each(function(){for(var n;(n=v(this,!0))&&n.parent;)n.parent.removeViews(n._.key,i,!0);st(this.getElementsByTagName("*"))}):n===i&&st(r)),r}function pr(n,t){return ci(this,n,t)}function vu(n){return n=n||t.view(),function(t,i){var f,u,e=[i];if(n&&t){if(t._jsvOb)return t._jsvOb.call(n.tmpl,i,n,r);if(t.charAt(0)==="~")return t.slice(0,4)==="~tag"&&(u=n.ctx,t.charAt(4)==="."&&(f=t.slice(5).split("."),u=u.tag),f)?u?[u,f.join("."),i]:[]:(t=t.slice(1).split("."),(i=n.hlp(t.shift()))&&(t.length&&e.unshift(t.join(".")),e.unshift(i)),i?e:[]);if(t.charAt(0)==="#")return t==="#data"?[]:[n,t.replace(iu,""),i]}}}function yu(n){return n.type===wt?n[p]:n.value}function li(n,t,i,r,u,f){var y,a,p,c,b,v,s,w=0,k=n===t;if(n){for(p=h(n)||[],y=0,a=p.length;y<a;y++){if(c=p[y],v=c.id,v===r&&c.ch===u)if(f)a=0;else break;k||(b=c.ch==="_"?l[v]:o[v].linkCtx.tag,c.open?b._prv=t:c.close&&(b._nxt=t)),w+=v.length+2}w&&n.setAttribute(e,n.getAttribute(e).slice(w)),s=t?t.getAttribute(e):i._dfr,(a=s.indexOf("/"+r+u)+1)&&(s=p._tkns.slice(0,w)+s.slice(a+(f?-1:r.length+1))),s&&(t?t.setAttribute(e,s):i._dfr=s)}else i._dfr=et(i._dfr,"#"+r+u),f||t||(i._dfr=et(i._dfr,"/"+r+u))}if(!t)throw"requires jQuery";if(!t.views)throw"requires JsRender";if(!t.observable)throw"requires jquery.observable";if(!t.link){var ct,w,v,k,ai,lt,d,vi,yi,at,f=n.document,r=t.views,u=r.sub,c=r.settings,g=u.extend,a=u.View(i,"top"),nt=t.isFunction,wr=r.templates,br=r.converters,b=t.observable,pu=b.observe,e="data-jsv",y=c.linkAttr||"data-link",pi=u.propChng=u.propChng||"propertyChange",vt=u.arrChng=u.arrChng||"arrayChange",wu=u._cbBnds=u._cbBnds||{},wi="change.jsv",yt="onBeforeChange",pt="onAfterChange",kr="onAfterCreate",p="checked",wt="checkbox",tt="radio",bi='"><\/script>',ki='<script type="jsv',bt="script,["+e+"]",rt=bt+",["+y+"]",kt={value:"val",input:"val",html:"html",text:"text"},di={from:"value",to:"value"},dr=t.cleanData,gr=c.delimiters,it=u.error,gi=u.syntaxError,nu=/<(?!script)(\w+)(?:[^>]*(on\w+)\s*=)?[^>]*>/,nr=f.createDocumentFragment(),dt=f.querySelector,gt={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},tu={tr:"table"},s=c.wrapMap={option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],area:[1,"<map>","<\/map>"],param:[1,"<object>","<\/object>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],svg_ns:[1,"<svg>","<\/svg>"],div:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","<\/div>"]},ni={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},tr={},l={0:a},o={},ir=1,iu=/^#(view\.?)?/,ru=/(^|(\/>)|<\/(\w+)>|>|)(\s*)([#\/]\d+[_^])`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*)/g,rr=/(#)()(\d+)(_)/g,uu=/(#)()(\d+)([_^])/g,fu=/(?:(#)|(\/))(\d+)(_)/g,eu=/(#)()(\d+)(\^)/g,ou=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g;s.optgroup=s.option,s.tbody=s.tfoot=s.colgroup=s.caption=s.thead,s.th=s.td,u.onStoreItem=function(n,i,r){r&&n===wr&&(r.link=sr,r.unlink=pr,i&&(t.link[i]=function(){return sr.apply(r,arguments)},t.unlink[i]=function(){return pr.apply(r,arguments)}))},(c.delimiters=function(){var n=gr.apply(r,arguments);return ai=n[0],lt=n[1],d=n[2],vi=n[3],yi=n[4],k=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+yi+")?(\\"+lt+u.rTag+"\\"+d+")","g"),this})(),u.viewInfos=h,ct={addViews:function(n,t,i){var u,o,r=this,f=t.length,e=r.views;if(!r._.useKey&&f&&(i=r.tmpl)&&(o=e.length+f,or(r,n,i,e,t,r.ctx)!==!1))for(u=n+f;u<o;u++)b(e[u]).setProperty("index",u);return r},removeViews:function(n,r,u){function o(n){var h,c,e,o,s,a,r=f[n];if(r&&r.link){h=r._.id,u||(a=r.nodes()),r.removeViews(i,i,!0),r.data=i,o=r._prv,s=r._nxt,e=r.parentElem,u||(r._elCnt&&li(o,s,e,h,"_"),t(a).remove()),r._elCnt||(o.parentNode&&e.removeChild(o),s.parentNode&&e.removeChild(s)),ii(r);for(c in r._.bnds)ht(c);delete l[h]}}var e,a,s,h=this,c=!h._.useKey,f=h.views;if(c&&(s=f.length),n===i)if(c){for(e=s;e--;)o(e);h.views=[]}else{for(a in f)o(a);h.views={}}else if(r===i&&(c?r=1:(o(n),delete f[n])),c&&r){for(e=n+r;e-->n;)o(e);if(f.splice(n,r),s=f.length)while(n<s)b(f[n]).setProperty("index",n++)}return this},refresh:function(n){var t=this,i=t.parent;return i&&(or(t,t.index,t.tmpl,i.views,t.data,n,!0),ii(t)),t},nodes:si,contents:oi,childTags:hi,link:lu},c.merge={input:{from:yu,to:"value"},textarea:di,select:di,optgroup:{to:"label"}},c.debugMode&&(at=!c.noValidate,n._jsv={views:l,bindings:o}),br.merge=function(n){var t,i=this.linkCtx._val||"",r=this.tagCtx.props.toggle;return r&&(t=r.replace(/[\\^$.|?*+()[{]/g,"\\$&"),t="(\\s(?="+t+"$)|(\\s))?("+t+"(\\s|$))",i=i.replace(new RegExp(t),"$2"),n=i+(n?(i&&" ")+r:"")),n},r.tags("on",{attr:"none",onAfterLink:function(n,r){var s=this,h=t(r.elem),e=n.args,f=n.props.data,u=e.pop(),c=e[1]||null,o=n.props.context;f=f!==i?f:null,u=u.fn&&o?u.fn:u;h.on(e[0],c,f,function(n){u.call(o||s.leaf,n)})},onAfterBind:function(n){this.leaf=n.leaf},flow:!0}),g(t,{view:r.view=v=function(n,r,u){r!==!!r&&(u=r,r=i);var e,o,c,v,w,s,b,y,p=0,k=f.body;if(n&&n!==k&&a._.useKey>1&&(n=""+n===n?t(n)[0]:n.jquery?n[0]:n,n))if(r){for(y=dt?n.querySelectorAll(bt):t(bt,n).get(),s=y.length,c=0;c<s;c++)for(b=y[c],o=h(b,i,rr),v=0,w=o.length;v<w;v++)if(e=o[v],(e=l[e.id])&&(e=e&&u?e.get(!0,u):e,e))return e}else while(n){if(o=h(n,i,fu))for(s=o.length;s--;)if(e=o[s],e.open){if(p<1)return e=l[e.id],e&&u?e.get(u):e||a;p--}else p++;n=n.previousSibling||n.parentNode}return r?i:a},link:r.link=fi,unlink:r.unlink=ci,cleanData:function(n){n.length&&(st(n),dr.call(t,n))}}),g(t.fn,{link:function(n,t,i,r,u,f){return fi(n,this,t,i,r,u,f)},unlink:function(n){return ci(n,this)},view:function(n){return v(this[0],n)}}),g(a,{tmpl:{links:{},tags:{}}}),g(a,ct),a._.onRender=ri}}(this,this.jQuery);
//# sourceMappingURL=jsviews.min.js.map