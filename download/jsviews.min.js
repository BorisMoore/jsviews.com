/*! jsviews.js v1.0.0-alpha single-file version: http://www.jsviews.com/
includes JsRender, JsObservable and JsViews - see: http://www.jsviews.com/#download
informal pre V1.0 commit counter: 64 (Beta Candidate)*/
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(this.jQuery)}(function(e,t){"use strict";function n(e,t){return function(){var n,r=this,i=r.base;return r.base=e,n=t.apply(r,arguments),r.base=i,n}}function r(e,t){return An(t)&&(t=n(e?e._d?e:n(o,e):o,t),t._d=1),t}function i(e,t){for(var n in t.props)fn.test(n)&&(e[n]=r(e[n],t.props[n]))}function a(e){return e}function o(){return""}function s(e){try{throw"dbg breakpoint"}catch(t){}return this.base?this.baseApply(arguments):e}function l(e){Sn._dbgMode=e!==!1}function d(t){this.name=(e.link?"JsViews":"JsRender")+" Error",this.message=t||this.name}function p(e,t){var n;for(n in t)e[n]=t[n];return e}function c(e,t,n){return(0!==this||e)&&(Xt=e?e.charAt(0):Xt,Zt=e?e.charAt(1):Zt,Gt=t?t.charAt(0):Gt,Yt=t?t.charAt(1):Yt,en=n||en,e="\\"+Xt+"(\\"+en+")?\\"+Zt,t="\\"+Gt+"\\"+Yt,Ht="(?:(?:(\\w+(?=[\\/\\s\\"+Gt+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+Gt+"]|\\"+Gt+"(?!\\"+Yt+"))*?)",Vn.rTag=Ht+")",Ht=new RegExp(e+Ht+"(\\/)?|(?:\\/(\\w+)))"+t,"g"),Kt=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+t)),[Xt,Zt,Gt,Yt,en]}function f(e,t){t||(t=e,e=void 0);var n,r,i,a,o=this,s=!t||"root"===t;if(e){if(a=o.type===t?o:void 0,!a)if(n=o.views,o._.useKey){for(r in n)if(a=n[r].get(e,t))break}else for(r=0,i=n.length;!a&&i>r;r++)a=n[r].get(e,t)}else if(s)for(;o.parent.parent;)a=o=o.parent;else for(;o&&!a;)a=o.type===t?o:void 0,o=o.parent;return a}function u(){var e=this.get("item");return e?e.index:void 0}function g(){return this.index}function v(e){var t,n=this,r=n.linkCtx,i=(n.ctx||{})[e];return void 0===i&&r&&r.ctx&&(i=r.ctx[e]),void 0===i&&(i=Tn[e]),i&&An(i)&&!i._wrp&&(t=function(){return i.apply(this&&this!==Qt?this:n,arguments)},t._wrp=!0,p(t,i)),t||i}function h(e,t,n,r){var a,o,s="number"==typeof n&&t.tmpl.bnds[n-1],l=t.linkCtx;return void 0!==r?n=r={props:{},args:[r]}:s&&(n=s(t.data,t,kn)),o=n.args[0],(e||s)&&(a=l&&l.tag,a||(a=p(new Vn._tg,{_:{inline:!l,bnd:s,unlinked:!0},tagName:":",cvt:e,flow:!0,tagCtx:n}),l&&(l.tag=a,a.linkCtx=l),n.ctx=F(n.ctx,(l?l.view:t).ctx)),a._er=r&&o,i(a,n),n.view=t,a.ctx=n.ctx||{},n.ctx=void 0,t._.tag=a,o=a.cvtArgs(a.convert||"true"!==e&&e)[0],o=s&&t._.onRender?t._.onRender(o,t,s):o,t._.tag=void 0),void 0!=o?o:""}function _(e){var t=this,n=t.tagCtx,r=n.view,i=n.args;return e=t.convert||e,e=e&&(""+e===e?r.getRsc("converters",e)||N("Unknown converter: '"+e+"'"):e),i=i.length||n.index?e?i.slice():i:[r.data],e&&(e.depends&&(t.depends=Vn.getDeps(t.depends,t,e.depends,e)),i[0]=e.apply(t,i)),i}function m(e,t){for(var n,r,i=this;void 0===n&&i;)r=i.tmpl&&i.tmpl[e],n=r&&r[t],i=i.parent;return n||kn[e][t]}function b(e,t,n,r,a,o){t=t||Jt;var s,l,d,p,c,f,u,g,v,h,_,m,b,x,y,w,k,C,A="",j=t.linkCtx||0,I=t.ctx,T=n||t.tmpl,V="number"==typeof r&&t.tmpl.bnds[r-1];for("tag"===e._is?(s=e,e=s.tagName,r=s.tagCtxs,d=s.template):(l=t.getRsc("tags",e)||N("Unknown tag: {{"+e+"}} "),d=l.template),void 0!==o?(A+=o,r=o=[{props:{},args:[]}]):V&&(r=V(t.data,t,kn)),g=r.length,u=0;g>u;u++)h=r[u],(!j||!j.tag||u&&!j.tag._.inline||s._er)&&((m=h.tmpl)&&(m=h.content=T.tmpls[m-1]),h.index=u,h.tmpl=d||m,h.render=E,h.view=t,h.ctx=F(h.ctx,I)),(n=h.props.tmpl)&&(n=""+n===n?t.getRsc("templates",n)||In(n):n,h.tmpl=n),s||(s=new l._ctr,b=!!s.init,s.parent=f=I&&I.tag,s.tagCtxs=r,j&&(s._.inline=!1,j.tag=s,s.linkCtx=j),(s._.bnd=V||j.fn)?s._.arrVws={}:s.dataBoundOnly&&N("{^{"+e+"}} tag must be data-bound")),h.tag=s,s.dataMap&&s.tagCtxs&&(h.map=s.tagCtxs[u].map),s.flow||(_=h.ctx=h.ctx||{},p=s.parents=_.parentTags=I&&F(_.parentTags,I.parentTags)||{},f&&(p[f.tagName]=f),p[s.tagName]=_.tag=s);if((V||j)&&(t._.tag=s),!(s._er=o)){for(i(s,r[0]),s.rendering={},u=0;g>u;u++)h=s.tagCtx=s.tagCtxs[u],k=h.props,w=s.cvtArgs(),(x=k.dataMap||s.dataMap)&&(w.length||k.dataMap)&&(y=h.map,(!y||y.src!==w[0]||a)&&(y&&y.src&&y.unmap(),y=h.map=x.map(w[0],k)),w=[y.tgt]),s.ctx=h.ctx,u||(b&&(C=s.template,s.init(h,j,s.ctx),b=void 0,s.template!==C&&(s._.tmpl=s.template)),j&&(j.attr=s.attr=j.attr||s.attr),c=s.attr,s._.noVws=c&&c!==_n),v=void 0,s.render&&(v=s.render.apply(s,w)),w.length||(w=[t]),void 0===v&&(v=h.render(w.length?w[0]:t,!0)||(a?void 0:"")),A=A?A+(v||""):v;s.rendering=void 0}return s.tagCtx=s.tagCtxs[0],s.ctx=s.tagCtx.ctx,s._.noVws&&s._.inline&&(A="text"===c?En.html(A):""),V&&t._.onRender?t._.onRender(A,t,V):A}function x(e,t,n,r,i,a,o,s){var l,d,p,c,f=this,g="array"===t;f.content=o,f.views=g?[]:{},f.parent=n,f.type=t||"top",f.data=r,f.tmpl=i,c=f._={key:0,useKey:g?0:1,id:""+vn++,onRender:s,bnds:{}},f.linked=!!s,n?(l=n.views,d=n._,d.useKey?(l[c.key="_"+d.useKey++]=f,f.index=xn,f.getIndex=u,p=d.tag,c.bnd=g&&(!p||!!p._.bnd&&p)):l.length===(c.key=f.index=a)?l.push(f):l.splice(a,0,f),f.ctx=e||n.ctx):f.ctx=e}function y(e){var t,n,r,i,a,o,s;for(t in wn)if(a=wn[t],(o=a.compile)&&(n=e[t+"s"]))for(r in n)i=n[r]=o(r,n[r],e,0),i._is=t,i&&(s=Vn.onStore[t])&&s(r,i,o)}function w(e,t,n){function i(){var t=this;t._={inline:!0,unlinked:!0},t.tagName=e}var a,o,s,l=new Vn._tg;if(An(t)?t={depends:t.depends,render:t}:""+t===t&&(t={template:t}),o=t.baseTag){t.flow=!!t.flow,t.baseTag=o=""+o===o?n&&n.tags[o]||Nn[o]:o,l=p(l,o);for(s in t)l[s]=r(o[s],t[s])}else l=p(l,t);return void 0!==(a=l.template)&&(l.template=""+a===a?In[a]||In(a):a),l.init!==!1&&((i.prototype=l).constructor=l._ctr=i),n&&(l._parentTmpl=n),l}function k(e){return this.base.apply(this,e)}function C(n,r,i,a){function o(r){var o;if(""+r===r||r.nodeType>0&&(s=r)){if(!s)if("@"===r.charAt(0))t?r=In[n=n||(r=t.realpathSync(r.slice(1)))]=In[n]||C(n,t.readFileSync(r,"utf8"),i,a):s=Wt.getElementById(r);else if(e.fn&&!Kt.test(r))try{s=e(Wt).find(r)[0]}catch(l){}s&&(a?r=s.innerHTML:((o=s.getAttribute(bn))&&(r=In[o])&&n!==o&&delete In[o],n=n||o||"_"+gn++,o||(r=C(n,s.innerHTML,i,a)),s.setAttribute(bn,n),In[r.tmplName=n]=r),s=void 0)}else r.fn||(r=void 0);return r}var s,l,d=r=r||"";return 0===a&&(a=void 0,d=o(d)),a=a||(r.markup?r:{}),a.tmplName=n,i&&(a._parentTmpl=i),!d&&r.markup&&(d=o(r.markup))&&d.fn&&(d=d.markup),void 0!==d?(d.fn||r.fn?d.fn&&(l=d):(r=j(d,a),S(d.replace(on,"\\$&"),r)),l||(y(a),l=p(function(){return r.render.apply(r,arguments)},r)),n&&!i&&(yn[n]=l),l):void 0}function A(e){function t(t,n){this.tgt=e.getTgt(t,n)}return An(e)&&(e={getTgt:e}),e.baseMap&&(e=p(p({},e.baseMap),e)),e.map=function(e,n){return new t(e,n)},e}function j(t,n){var r,i=Sn.wrapMap||{},a=p({tmpls:[],links:{},bnds:[],_is:"template",render:E},n);return a.markup=t,n.htmlTag||(r=dn.exec(t),a.htmlTag=r?r[1].toLowerCase():""),r=i[a.htmlTag],r&&r!==i.div&&(a.markup=e.trim(a.markup)),a}function I(e,t){function n(i,a,o){var s,l,d,p;if(i&&typeof i===mn&&!i.nodeType&&!i.markup&&!i.getTgt){for(d in i)n(d,i[d],a);return kn}return void 0===a&&(a=i,i=void 0),i&&""+i!==i&&(o=a,a=i,i=void 0),p=o?o[r]=o[r]||{}:n,l=t.compile,null===a?i&&delete p[i]:(a=l?l(i,a,o,0):a,i&&(p[i]=a)),l&&a&&(a._is=e),a&&(s=Vn.onStore[e])&&s(i,a,l),a}var r=e+"s";kn[r]=n}function E(e,t,n,r,i,a){var o,s,l,d,p,c,f,u,g=r,v="";if(t===!0?(n=t,t=void 0):typeof t!==mn&&(t=void 0),(l=this.tag)?(p=this,d=l._.tmpl||p.tmpl,g=g||p.view,arguments.length||(e=g)):d=this,d){if(!g&&e&&"view"===e._is&&(g=e),g&&e===g&&(e=g.data),d.fn||(d=l._.tmpl=In[d]||In(d)),zt=zt||(c=!g),g||((t=t||{}).root=e),!zt||d.useViews)v=T(d,e,t,n,g,i,a,l);else{if(g?(f=g.data,u=g.index,g.index=xn):(g=Jt,g.data=e,g.ctx=t),jn(e)&&!n)for(o=0,s=e.length;s>o;o++)g.index=o,g.data=e[o],v+=d.fn(e[o],g,kn);else v+=d.fn(e,g,kn);g.data=f,g.index=u}c&&(zt=void 0)}return v}function T(e,t,n,r,i,a,o,s){function l(e){y=p({},n),y[b]=e}var d,c,f,u,g,v,h,_,m,b,y,w,k="";if(s&&(m=s.tagName,w=s.tagCtx,n=n?F(n,s.ctx):s.ctx,h=w.content,w.props.link===!1&&(n=n||{},n.link=!1),(b=w.props.itemVar)&&("~"!==b.charAt(0)&&V("Use itemVar='~myItem'"),b=b.slice(1))),i&&(h=h||i.content,o=o||i._.onRender,n=n||i.ctx),a===!0&&(v=!0,a=0),o&&(n&&n.link===!1||s&&s._.noVws)&&(o=void 0),_=o,o===!0&&(_=void 0,o=i._.onRender),n=e.helpers?F(e.helpers,n):n,y=n,jn(t)&&!r)for(f=v?i:void 0!==a&&i||new x(n,"array",i,t,e,a,h,o),b&&(f.it=b),b=f.it,d=0,c=t.length;c>d;d++)b&&l(t[d]),u=new x(y,"item",f,t[d],e,(a||0)+d,h,o),g=e.fn(t[d],u,kn),k+=f._.onRender?f._.onRender(g,u):g;else b&&l(t),f=v?i:new x(y,m||"data",i,t,e,a,h,o),s&&!s.flow&&(f.tag=s),k+=e.fn(t,f,kn);return _?_(k,f):k}function N(e,t,n){var r=Sn.onError(e,t,n);if(""+e===e)throw new Vn.Err(r);return!t.linkCtx&&t.linked?En.html(r):r}function V(e){N("Syntax error\n"+e)}function S(e,t,n,r,i){function a(t){t-=u,t&&v.push(e.substr(u,t).replace(rn,"\\n"))}function o(t,n){t&&(t+="}}",V((n?"{{"+n+"}} block has {{/"+t+" without {{"+t:"Unmatched or missing {{/"+t)+", in template:\n"+e))}function s(s,l,f,_,m,b,x,y,w,k,C,A){b&&(m=":",_=_n),k=k||n&&!i;var j=(l||n)&&[[]],I="",E="",T="",N="",S="",B="",M="",$="",F=!k&&!m&&!x;f=f||(w=w||"#data",m),a(A),u=A+s.length,y?c&&v.push(["*","\n"+w.replace(/^:/,"ret+= ").replace(an,"$1")+";\n"]):f?("else"===f&&(ln.test(w)&&V('for "{{else if expr}}" use "{{else expr}}"'),j=h[7]&&[[]],h[8]=e.substring(h[8],A),h=g.pop(),v=h[2],F=!0),w&&R(w.replace(rn," "),j,t).replace(sn,function(e,t,n,r,i,a,o,s){return r="'"+i+"':",o?(E+=a+",",N+="'"+s+"',"):n?(T+=r+a+",",B+=r+"'"+s+"',"):t?M+=a:("trigger"===i&&($+=a),I+=r+a+",",S+=r+"'"+s+"',",p=p||fn.test(i)),""}).slice(0,-1),j&&j[0]&&j.pop(),d=[f,_||!!r||p||"",F&&[],L(N,S,B),L(E,I,T),M,$,j||0],v.push(d),F&&(g.push(h),h=d,h[8]=u)):C&&(o(C!==h[0]&&"else"!==h[0]&&C,h[0]),h[8]=e.substring(h[8],A),h=g.pop()),o(!h&&C),v=h[2]}var l,d,p,c=Sn.allowCode||t&&t.allowCode,f=[],u=0,g=[],v=f,h=[,,f];return c&&(t.allowCode=c),n&&(e=Xt+e+Yt),o(g[0]&&g[0][2].pop()[0]),e.replace(Ht,s),a(e.length),(u=f[f.length-1])&&o(""+u!==u&&+u[8]===u[8]&&u[0]),n?(l=$(f,e,n),B(l,[f[0][7]])):l=$(f,t),l}function B(e,t){var n,r,i=0,a=t.length;for(e.deps=[];a>i;i++){r=t[i];for(n in r)"_jsvto"!==n&&r[n].length&&(e.deps=e.deps.concat(r[n]))}e.paths=r}function L(e,t,n){return[e.slice(0,-1),t.slice(0,-1),n.slice(0,-1)]}function M(e,t){return"\n	"+(t?t+":{":"")+"args:["+e[0]+"]"+(e[1]||!t?",\n	props:{"+e[1]+"}":"")+(e[2]?",\n	ctx:{"+e[2]+"}":"")}function R(e,t,n){function r(r,_,m,b,x,y,w,k,C,A,j,I,E,T,N,B,L,M,R,$){function F(e,n,r,o,s,l,c,f){var u="."===r;if(r&&(x=x.slice(n.length),u||(e=(o?'view.hlp("'+o+'")':s?"view":"data")+(f?(l?"."+l:o?"":s?"":"."+r)+(c||""):(f=o?"":s?l||"":r,"")),e+=f?"."+f:"",e=n+("view.data"===e.slice(0,9)?e.slice(5):e)),d)){if(U="linkTo"===i?a=t._jsvto=t._jsvto||[]:p.bd,O=u&&U[U.length-1]){if(O._jsv){for(;O.sb;)O=O.sb;O.bnd&&(x="^"+x.slice(1)),O.sb=x,O.bnd=O.bnd||"^"===x.charAt(0)}}else U.push(x);h[g]=R+(u?1:0)}return e}b=d&&b,b&&!k&&(x=b+x),y=y||"",m=m||_||I,x=x||C,A=A||L||"";var P,D,U,O,q;if(!w||l||s){if(d&&B&&!l&&!s&&(!i||o||a)&&(P=h[g-1],$.length-1>R-(P||0))){if(P=$.slice(P,R+r.length),D!==!0)if(U=a||c[g-1].bd,O=U[U.length-1],O&&O.prm){for(;O.sb&&O.sb.prm;)O=O.sb;q=O.sb={path:O.sb,bnd:O.bnd}}else U.push(q={path:U.pop()});B=Zt+":"+P+" onerror=''"+Gt,D=u[B],D||(u[B]=!0,u[B]=D=S(B,n,!0)),D!==!0&&q&&(q._jsv=D,q.prm=p.bd,q.bnd=q.bnd||q.path&&q.path.indexOf("^")>=0)}return l?(l=!E,l?r:I+'"'):s?(s=!T,s?r:I+'"'):(m?(h[g]=R++,p=c[++g]={bd:[]},m):"")+(M?g?"":(f=$.slice(f,R),(i?(i=o=a=!1,"\b"):"\b,")+f+(f=R+r.length,d&&t.push(p.bd=[]),"\b")):k?(g&&V(e),d&&t.pop(),i=x,o=b,f=R+r.length,b&&(d=p.bd=t[i]=[]),x+":"):x?x.split("^").join(".").replace(tn,F)+(A?(p=c[++g]={bd:[]},v[g]=!0,A):y):y?y:N?(v[g]=!1,p=c[--g],N+(A?(p=c[++g],v[g]=!0,A):"")):j?(v[g]||V(e),","):_?"":(l=E,s=T,'"'))}V(e)}var i,a,o,s,l,d=t&&t[0],p={bd:d},c={0:p},f=0,u=n?n.links:d&&(d.links=d.links||{}),g=0,v={},h={};return(e+(n?" ":"")).replace(nn,r)}function $(e,t,n){var r,i,a,o,s,l,d,p,c,f,u,g,v,h,_,m,b,x,y,w,k,C,A,I,E,T,N,S,L,R,F=0,P=t.useViews||t.tags||t.templates||t.helpers||t.converters,D="",U={},O=e.length;for(""+t===t?(x=n?'data-link="'+t.replace(rn," ").slice(1,-1)+'"':t,t=0):(x=t.tmplName||"unnamed",t.allowCode&&(U.allowCode=!0),t.debug&&(U.debug=!0),u=t.bnds,b=t.tmpls),r=0;O>r;r++)if(i=e[r],""+i===i)D+='\n+"'+i+'"';else if(a=i[0],"*"===a)D+=";\n"+i[1]+"\nret=ret";else{if(o=i[1],k=!n&&i[2],s=M(i[3],"params")+"},"+M(v=i[4]),S=i[5],R=i[6],C=i[8]&&i[8].replace(an,"$1"),(E="else"===a)?g&&g.push(i[7]):(F=0,u&&(g=i[7])&&(g=[g],F=u.push(1))),P=P||v[1]||v[2]||g||/view.(?!index)/.test(v[0]),(T=":"===a)?o&&(a=o===_n?">":o+a):(k&&(y=j(C,U),y.tmplName=x+"/"+a,y.useViews=y.useViews||P,$(k,y),P=y.useViews,b.push(y)),E||(w=a,P=P||a&&(!Nn[a]||!Nn[a].flow),I=D,D=""),A=e[r+1],A=A&&"else"===A[0]),L=S?";\ntry{\nret+=":"\n+",h="",_="",T&&(g||R||o&&o!==_n)){if(N="return {"+s+"};",m='c("'+o+'",view,',N=new Function("data,view,j,u"," // "+x+" "+F+" "+a+"\n"+N),N._er=S,h=m+F+",",_=")",N._tag=a,n)return N;B(N,g),f=!0}if(D+=T?(n?(S?"\ntry{\n":"")+"return ":L)+(f?(f=void 0,P=c=!0,m+(g?(u[F-1]=N,F):"{"+s+"}")+")"):">"===a?(d=!0,"h("+v[0]+")"):(p=!0,"((v="+(v[0]||"data")+')!=null?v:"")')):(l=!0,"\n{view:view,tmpl:"+(k?b.length:"0")+","+s+"},"),w&&!A){if(D="["+D.slice(0,-1)+"]",m='t("'+w+'",view,this,',n||g){if(D=new Function("data,view,j,u"," // "+x+" "+F+" "+w+"\nreturn "+D+";"),D._er=S,D._tag=w,g&&B(u[F-1]=D,g),n)return D;h=m+F+",undefined,",_=")"}D=I+L+m+(F||D)+")",g=0,w=0}S&&(P=!0,D+=";\n}catch(e){ret"+(n?"urn ":"+=")+h+"j._err(e,view,"+S+")"+_+";}\n"+(n?"":"ret=ret"))}D="// "+x+"\nvar v"+(l?",t=j._tag":"")+(c?",c=j._cnvt":"")+(d?",h=j.converters.html":"")+(n?";\n":',ret=""\n')+(U.debug?"debugger;":"")+D+(n?"\n":";\nreturn ret;"),Sn._dbgMode&&(D="try {\n"+D+"\n}catch(e){\nreturn j._err(e, view);\n}");try{D=new Function("data,view,j,u",D)}catch(q){V("Compiled template code:\n\n"+D+'\n: "'+q.message+'"')}return t&&(t.fn=D,t.useViews=!!P),D}function F(e,t){return e&&e!==t?t?p(p({},t),e):e:t&&p({},t)}function P(e){return hn[e]||(hn[e]="&#"+e.charCodeAt(0)+";")}function D(e){var t,n,r=[];if(typeof e===mn)for(t in e)n=e[t],n&&n.toJSON&&!n.toJSON()||An(n)||r.push({key:t,prop:n});return r}function U(e){return void 0!=e?cn.test(e)&&(""+e).replace(un,P)||e:""}function O(e){return e._cId=e._cId||".obs"+Kn++}function q(e){return jn(e)?new K(e):new H(e)}function H(e){return this._data=e,this}function K(e){return this._data=e,this}function J(e){return jn(e)?[e]:e}function z(e,t){e=jn(e)?e:[e];var n,r,i=t,a=i,o=e.length,s=[];for(n=0;o>n;n++)r=e[n],An(r)?s=s.concat(z(r.call(t,t),t)):""+r===r?(a!==i&&s.push(i=a),s.push(r)):(t=a=r,a!==i&&s.push(i=a));return s}function Q(e,t){for(var n in e)return;On[t]=void 0}function W(e,t){function n(e){return typeof e===mn&&(c[0]||p&&jn(e))}if(!e.data||!e.data.off){var r,i,a,o=t.oldValue,s=t.value,l=e.data,d=l.observeAll,p=!l.cb.noArray,c=l.paths;e.type===Un?(l.cb.array||l.cb).call(l,e,t):(l.prop===t.path||"*"===l.prop)&&(d?(r=d._path+"."+t.path,i=d.filter,a=[e.target].concat(d.parents()),n(o)&&G(p,d.ns,[o],c,l.cb,!0,i,[a],r),n(s)&&G(p,d.ns,[s],c,l.cb,void 0,i,[a],r)):(n(o)&&G(p,[o],c,l.cb,!0),n(s)&&G(p,[s],c,l.cb)),l.cb(e,t))}}function X(){function t(){function i(t,r,i,a){var o,s,l=zn(M),d=J(M),p=j,c=I;if(t=n?t+"."+n:t,v||a)l&&e(d).off(t,W);else{if(x=l&&e._data(M))for(x=x&&x.events,x=x&&x[i?Un:Dn],m=x&&x.length;m--;)if((b=x[m].data)&&b.cb._cId===h._cId&&b.ns===n){if(i)return;"*"===r&&b.prop!==r&&e(M).off(t,W)}s=i?{}:{fullPath:u,paths:r?[r]:[],prop:f},s.ns=n,s.cb=h,I&&(s.observeAll={_path:c,path:function(){return o=p.length,c.replace(/[[.]/g,function(t){return o--,"["===t?"["+e.inArray(p[o-1],p[o]):"."})},parents:function(){return p},filter:E,ns:n}),e(d).on(t,null,s,W),k&&((On[h._cId]=k)[e.data(M,"obId")||e.data(M,"obId",Hn++)]=M)}}function o(e){var n=L;return e.ob=y(e,n),e.cb=function(i,a){var o=e.ob,l=e.sb,d=y(e,n);d!==o&&(typeof o===mn&&(s(o,!0),(l||r&&jn(o))&&t([o],l,h,y,!0)),e.ob=d,typeof d===mn&&(s(d),(l||r&&jn(d))&&t([d],l,h,y))),h(i,a)}}function s(e,t,n,a){if(r){var o=M,s=I;M=e,a&&(M=e[a],I+="."+a),E&&M&&(M=q._fltr(I,M,a?[e].concat(j):j,E)),M&&(n||jn(M))&&i(Un+".observe"+(h?_=O(h):""),void 0,!0,t),M=o,I=s}}var l,d,p,c,f,u,g,v,h,_,m,b,x,y,w,k,C,A,j,I,E,T,N,V=qn,S=1!=this?Rn.apply([],arguments):Ln.call(arguments),B=S.pop()||!1,L=S.shift(),M=L,R=S.length;for(B+""===B&&(I=B,j=S.pop(),E=S.pop(),B=!!S.pop(),R-=3),B===!!B&&(v=B,B=S[R-1],B=R&&B+""!==B?(R--,S.pop()):void 0),h=B,R&&An(S[R-1])&&(y=h,h=S.pop(),R--),V+=v?h?h._cId+(h._inId||""):"":(_=O(h))+(h._inId||""),v||(k=On[_]=On[_]||{}),T=n&&n.match(Pn)||[""],N=T.length;N--;)for(n=T[N],jn(L)?s(L,v,!0):v&&0===R&&L&&i(V,""),C=0,l=0;R>l;l++)if(u=S[l],""!==u&&void 0!==u){if(M=L,""+u===u){if(c=u.split("^"),c[1]&&(C=c[0].split(".").length,u=c.join("."),C=u.split(".").length-C),y&&(w=y(u,L))){R+=w.length-1,Mn.apply(S,[l--,1].concat(w));continue}c=u.split(".")}else An(u)||(u&&u._jsv?(A=v?u.cb:o(u),A.noArray=!r,A._cId=h._cId,A._inId=A._inId||".obIn"+Jn++,(u.bnd||u.prm&&u.prm.length||!u.sb)&&t([M],u.path,[a],u.prm,A,y,v),u.sb&&t([u.ob],u.sb,h,y,v),u=a,M=void 0):M=u),c=[L=u];for(;M&&void 0!==(f=c.shift());)if(typeof M===mn){if(""+f===f){if(""===f)continue;if(c.length<C+1&&!M.nodeType){if(!v&&(x=zn(M)&&e._data(M))){for(x=x.events,x=x&&x[Dn],m=x&&x.length,p=0;m--;)b=x[m].data,b&&b.cb===h&&b.ns===n&&(b.prop===f||"*"===b.prop)&&((d=c.join("."))&&b.paths.push(d),p++);if(p){M=M[f];continue}}if("*"===f){!v&&x&&x.length&&i(V,"",!1,!0),i(V,"");for(d in M)s(M,v,void 0,d);break}f&&i(V+"."+f,c.join("^"))}I&&(I+="."+f),f=M[f]}if(An(f)){(g=f.depends)&&t([M],z(g,M),h,y,v);break}M=f}s(M,v)}return _&&Q(k,_),{cbId:_,bnd:k}}var n,r=0!=this,i=Ln.call(arguments),a=i[0];return a+""===a&&r&&(n=a,i.shift(),a=i[0]),t.apply(1,i)}function Z(){return[].push.call(arguments,!0),X.apply(this,arguments)}function G(){var e=Rn.apply([],arguments);return X.apply(e.shift(),e)}function Y(e,t,n,r){e+""!==e&&(n=t,t=e,e=""),tt(e,this._data,t,n,[],"root",r)}function et(e,t,n){Y.call(this,e,t,n,!0)}function tt(e,t,n,r,i,a,o){function s(e,t){for(p=e.length,f=a+"[]";p--;)l(e,p,t,1)}function l(t,i,a,o){var s,l;i!==$n&&(s=q._fltr(f,t[i],u,r))&&(l=u.slice(),o&&g&&l.unshift(g),tt(e,s,n,r||(o?void 0:0),l,f,a))}function d(e,t){switch(a=e.data.observeAll._path,g=e.target,t.change){case"insert":s(t.items);break;case"remove":s(t.items,!0);break;case"refresh":s(t.oldItems,!0),s(e.target);break;case"set":f=a+"."+t.path,l(t,"oldValue",!0),l(t,"value")}g=void 0,n.apply(this,arguments)}var p,c,f,u,g;if(typeof t===mn)if(u=[t].concat(i),c=jn(t)?"":"*",n?(c||0!==r)&&(d._cId=O(n),X(e,t,c,d,o,r,u,a)):X(e,t,c,void 0,o,r,u,a),c)for(p in t)f=a+"."+p,l(t,p,o);else s(t,o)}function nt(e){return e.indexOf(".")<0&&e.indexOf("[")<0}function rt(t,n,r){var i,a,o,s,l,d,p,c,f,u,g,v,h,_,m,b,x,y=t.target,w=y._jsvBnd,k=/&(\d+)\+?/g;if(w)for(;u=k.exec(w);)if((u=Nr[u[1]])&&(m=u.to)){if(s=u.linkCtx,f=s.view,_=s.tag,c=e(y),v=f.hlp(or),h=f.hlp(sr),o=pt(y),i=br[o],void 0===r&&(r=An(o)?o(y):i?c[i]():c.attr(o)),d=m[1],m=m[0],m=m+""===m?[s.data,m]:m,d&&(l=An(d)?d:f.getRsc("converters",d)),l&&(r=l.call(_,r)),g=f.linkCtx,f.linkCtx=s,b={change:"change",oldValue:s._val,value:r},!(v&&(a=v.call(s,t,b)===!1)||_&&_.onBeforeChange&&(a=_.onBeforeChange(t,b)===!1)||void 0===r)&&(p=m[0],void 0!==r&&p)){if(p._jsv)for(x=p,p=s.data;x&&x.sb;)p=s._ctxCb(x,p),x=x.sb;_&&(_._.chging=!0),q(p).setProperty(m[2]||m[1],r),h&&h.call(s,t,b),_&&(_.onAfterChange&&_.onAfterChange(t,b),_._.chging=void 0),s._val=r}f.linkCtx=g}}function it(e,t,n){var r,i,a,o,s,l,d=this,p=d.tag,c=d.data,f=d.elem,u=d.convert,g=f.parentNode,v=d.view,h=v.linkCtx,_=v.hlp(or);if(v.linkCtx=d,!(!g||_&&t&&_.call(d,e,t)===!1||t&&"*"!==e.data.prop&&e.data.prop!==t.path)){if(t&&(d.eventArgs=t),t||d._toLk){if(d._toLk=0,n._er)try{i=n(c,v)}catch(m){s=n._er,l=N(m,v,new Function("data,view","return "+s+";")(c,v)),i=[{props:{},args:[l]}]}else i=n(c,v,kn);if(r=at(i,d,p=d.tag,d.attr||pt(f,!0,void 0!==u)),p){if(o=s||p._er,i=i[0]?i:[i],a=!o&&t&&p.onUpdate&&p.onUpdate(e,t,i)===!1,Tt(p,i,o),a||r===fr)return r===_n&&p.onBeforeLink&&p.onBeforeLink(),At(p),ut(d,c,f),void(v.linkCtx=h);if(p._.chging)return;i=":"===p.tagName?kn._cnvt(p.cvt,v,i[0]):kn._tag(p,v,v.tmpl,i,!0,l)}else n._tag&&(u=""===u?gr:u,i=u?kn._cnvt(u,v,i[0]||i):kn._tag(n._tag,v,v.tmpl,i,!0,l),p=d.tag,r=d.attr||r);st(i,d,r,p)&&t&&(_=v.hlp(sr))&&_.call(d,e,t),d._noUpd=0,p&&(p._er=s,At(p,t))}ut(d,c,f),v.linkCtx=h}}function at(t,n,r,i){var a,o,s,l,d=r&&r.parentElem||n.elem;if(void 0!==t){if(l=e(d),i=r&&r.attr||i,An(t)&&N(n.expr+": missing parens"),s=/^css-/.test(i)&&i.slice(4))a=e.style(d,s),+t===t&&(a=parseInt(a));else if("link"!==i){if("value"===i)d.type===pr&&(a=l.prop(i=dr));else if(i===cr){if(d.value!==""+t)return i;a=l.prop(dr)}void 0===a&&(o=br[i],a=o?l[o]():l.attr(i))}n._val=a}return i}function ot(e,t){e._df=t,e[(t?"set":"remove")+"Attribute"](_r,"")}function st(t,n,r,i){var a,o,s,l,d,p,c,f,u,g,v,h,_,m=void 0!==t&&!n._noUpd,b=n.data,x=i&&i.parentElem||n.elem,y=e(x),w=n.view,k=n._val,C=w.linkCtx,A=i||r===_n;if(i&&(i.parentElem=i.parentElem||n.expr||i._elCnt?x:x.parentNode,o=i._prv,s=i._nxt),!m)return void(r===_n&&i&&i.onBeforeLink&&i.onBeforeLink());if("visible"===r&&(r="css-display"),/^css-/.test(r))"visible"===n.attr&&(_=(x.currentStyle||Pr.call(Qt,x,"")).display,t?(t=x._jsvd||_,t!==fr||(t=Tr[h=x.nodeName])||(v=Wt.createElement(h),Wt.body.appendChild(v),t=Tr[h]=(v.currentStyle||Pr.call(Qt,v,"")).display,Wt.body.removeChild(v))):(x._jsvd=_,t=fr)),(A=A||k!==t)&&e.style(x,r.slice(4),t);else if(/^data-/.test(r))e.data(x,r.slice(5),t);else if("link"!==r){if(r===dr)p=!0,t=t&&"false"!==t;else if(r===cr){if(x.value!==""+t)return void ut(n,b,x);t=p=!0,r=dr}else("selected"===r||"disabled"===r||"multiple"===r||"readonly"===r)&&(t=t&&"false"!==t?r:null);(a=br[r])?r===_n?(w.linkCtx=n,i&&i._.inline?(d=i.nodes(!0),i._elCnt&&(o&&o!==s?Rt(o,s,x,i._tgId,"^",!0):(c=x._df)&&(f=i._tgId+"^",u=c.indexOf("#"+f)+1,g=c.indexOf("/"+f),u&&g>0&&(u+=f.length,g>u&&(ot(x,c.slice(0,u)+c.slice(g)),$t(c.slice(u,g))))),o=o?o.previousSibling:s?s.previousSibling:x.lastChild),e(d).remove(),i&&i.onBeforeLink&&i.onBeforeLink(),l=w.link(w.data,x,o,s,t,i&&{tag:i._tgId,lazyLink:i.tagCtx.props.lazyLink})):(m&&y.empty(),i&&i.onBeforeLink&&i.onBeforeLink(),m&&(l=w.link(b,x,o,s,t,i&&{tag:i._tgId}))),w.linkCtx=C):(A=A||k!==t)&&("text"===r&&x.children&&!x.children[0]?void 0!==x.textContent?x.textContent=t:x.innerText=null===t?"":t:y[a](t)):(A=A||k!==t)&&y[p?"prop":"attr"](r,void 0!==t||p?t:null),n._val=t}return l||A}function lt(e,t){var n=this,r=n.hlp(or),i=n.hlp(sr);if(!r||r.call(this,e,t)!==!1){if(t){var a=t.change,o=t.index,s=t.items;switch(a){case"insert":n.addViews(o,s);break;case"remove":n.removeViews(o,s.length);break;case"move":n.refresh();break;case"refresh":n.refresh()}}i&&i.call(this,e,t)}}function dt(t){var n,r,i=t.type,a=t.data,o=t._.bnd;!t._.useKey&&o&&((r=t._.bndArr)&&(e([r[1]]).off(Un,r[0]),t._.bndArr=void 0),o!==!!o?i?o._.arrVws[t._.id]=t:delete o._.arrVws[t._.id]:i&&a&&(n=function(e){e.data&&e.data.off||lt.apply(t,arguments)},e([a]).on(Un,n),t._.bndArr=[n,a]))}function pt(e,t,n){var r=e.nodeName.toLowerCase(),i=Sn.merge[r]||e.contentEditable===gr&&{to:_n,from:_n};return i?t?"input"===r&&e.type===cr?cr:i.to:i.from:t?n?"text":_n:""}function ct(t,n,r,i,a,o,s){var l,d,p,c,f,u=t.parentElem,g=t._prv,v=t._nxt,h=t._elCnt;if(g&&g.parentNode!==u&&N("Missing parentNode"),s){c=t.nodes(),h&&g&&g!==v&&Rt(g,v,u,t._.id,"_",!0),t.removeViews(void 0,void 0,!0),d=v,h&&(g=g?g.previousSibling:v?v.previousSibling:u.lastChild),e(c).remove();for(f in t._.bnds)Vt(f)}else{if(n){if(p=i[n-1],!p)return!1;g=p._nxt}h?(d=g,g=d?d.previousSibling:u.lastChild):d=g.nextSibling}l=r.render(a,o,t._.useKey&&s,t,s||n,!0),t.link(a,u,g,d,l,p)}function ft(e,t,n){var r,i,a;return n?(a="^`",i=t._.tag,r=i._tgId,r||(Nr[r=Vr++]=i,i._tgId=""+r)):(a="_`",nr[r=t._.id]=t),"#"+r+a+(void 0!=e?e:"")+"/"+r+a}function ut(e,t,n){var r,i,a,o,s,l=e.tag,d=e.convertBack,c=[],f=e._bndId||""+Vr++,u=e._hdl;if(e._bndId=void 0,l&&(c=l.depends||c,c=An(c)?l.depends(l):c,a=l.linkedElem),!e._depends||""+e._depends!=""+c){for(e._depends&&q._apply(!1,[t],e._depends,u,!0),o=e.fn.deps.slice(),i=o.length;i--;)s=o[i],s._jsv&&(o[i]=p({},s));r=q._apply(!1,[t],o,c,u,e._ctxCb),r.elem=n,r.linkCtx=e,r._tgId=f,n._jsvBnd=n._jsvBnd||"",n._jsvBnd+="&"+f,e._depends=c,e.view._.bnds[f]=f,Nr[f]=r,a&&(r.to=[[],d]),(a||void 0!==d)&&Et(r,l&&l.convertBack||d),l&&(l.onAfterBind&&l.onAfterBind(r),l.flow||l._.inline||(n.setAttribute(ir,(n.getAttribute(ir)||"")+"#"+f+"^/"+f+"^"),l._tgId=""+f))}if(a&&a[0])for(l._.radio&&(a=a.children("input[type=radio]")),i=a.length;i--;)a[i]._jsvBnd=a[i]._jsvBnd||n._jsvBnd+"+",a[i]._jsvLkEl=l}function gt(e,t,n,r,i,a,o){return vt(this,e,t,n,r,i,a,o)}function vt(t,n,r,i,a,o,s,l){if(i===!0?(a=i,i=void 0):"object"!=typeof i&&(i=void 0),t&&n){n=n.jquery?n:e(n),Wn||(Wn=Wt.body,e(Wn).on(ar,rt).on("blur","[contenteditable]",rt));for(var d,p,c,f,u,g,v,h,_,m=ft,b=i&&"replace"===i.target,x=n.length;x--;){if(v=n[x],o=o||Zn(v),(_=o===Jt)&&(Jt.data=(Jt.ctx=i||{}).root=r),""+t===t)_t(t,v,o,void 0,!0,r,i);else{if(void 0!==t.markup)o.link===!1&&(i=i||{},i.link=m=!1),b&&(g=v.parentNode),c=t.render(r,i,a,o,void 0,m),g?(s=v.previousSibling,l=v.nextSibling,e.cleanData([v],!0),g.removeChild(v),v=g):(s=l=void 0,e(v).empty());else{if(t!==!0||o!==Jt)break;h={lnk:1}}if(v._df&&!l){for(f=yt(v._df,!0,Lr),d=0,p=f.length;p>d;d++)u=f[d],(u=nr[u.id])&&void 0!==u.data&&u.parent.removeViews(u._.key,void 0,!0);ot(v)}o.link(r,v,s,l,c,h,i)}_&&(Jt.data=Jt.ctx=void 0)}}return n}function ht(t,n,r,i,a,o,s,l){function d(e,t,n,r,i,o,s,l,d,p,c,f,g,h){var _,m,b="";return h?(u=0,e):(v=d||p||"",r=r||c,n=n||g,q&&!n&&(!e||r||v||o&&!u)&&(q=void 0,O=pt.shift()),r=r||n,r&&(u=0,q=void 0,R&&(n||g?Er[O]||/;svg;|;math;/.test(";"+pt.join(";")+";")||(_="'<"+O+".../"):Er[r]?_="'</"+r:pt.length&&r===O||(_="Mismatch: '</"+r),_&&V(_+">' in:\n"+a)),Q=z,O=pt.shift(),z=jr[O],c=c?"</"+c+">":"",Q&&(at+=X,X="",z?at+="-":(b=c+hr+"@"+at+vr+(f||""),at=ct.shift()))),z?(o?X+=o:t=c||g||"",v&&(t+=v,X&&(t+=" "+ir+'="'+X+'"',X=""))):t=o?t+b+i+(u?"":hr+o+vr)+l+v:b||e,R&&s&&(u&&V("{^{ within elem markup ("+u+' ). Use data-link="..."'),"#"===o.charAt(0)?pt.unshift(o.slice(1)):o.slice(1)!==(m=pt.shift())&&V("Closing tag for {^{...}} under different elem: <"+m+">")),v&&(u=v,pt.unshift(O),O=v.slice(1),pt[0]&&pt[0]===Ir[O]&&N("Parent of <tr> must be <tbody>"),q=Er[O],(z=jr[O])&&!Q&&(ct.unshift(at),at=""),Q=z,at&&z&&(at+="+")),t)}function p(e,t){var r,i,a,o,s,l,d,p=[];if(e){for("@"===e._tkns.charAt(0)&&(t=y.previousSibling,y.parentNode.removeChild(y),y=void 0),b=e.length;b--;){if(k=e[b],a=k.ch,r=k.path)for(m=r.length-1;i=r.charAt(m--);)"+"===i?"-"===r.charAt(m)?(m--,t=t.previousSibling):t=t.parentNode:t=t.lastChild;"^"===a?(v=Nr[s=k.id])&&(d=t&&(!y||y.parentNode!==t),(!y||d)&&(v.parentElem=t),k.elCnt&&d&&ot(t,(k.open?"#":"/")+s+a+(t._df||"")),p.push([d?null:y,k])):(w=nr[s=k.id])&&(w.parentElem||(w.parentElem=t||y&&y.parentNode||n,w._.onRender=ft,w._.onArrayChange=lt,dt(w)),o=w.parentElem,k.open?(w._elCnt=k.elCnt,t&&!y?ot(t,"#"+s+a+(t._df||"")):(w._prv||ot(o,bt(o._df,"#"+s+a)),w._prv=y)):(!t||y&&y.parentNode===t?y&&(w._nxt||ot(o,bt(o._df,"/"+s+a)),w._nxt=y):(ot(t,"/"+s+a+(t._df||"")),w._nxt=void 0),g=w.linkCtx,(l=w.ctx&&w.ctx.onAfterCreate||ut)&&l.call(g,w)))}for(b=p.length;b--;)st.push(p[b])}return!e||e.elCnt}function c(e){var t,n,r;if(e)for(b=e.length,m=0;b>m;m++)if(k=e[m],n=v=Nr[k.id].linkCtx.tag,r=v.tagName===L,!v.flow||r){if(!B){for(t=1;n=n.parent;)t++;$=$||t}!B&&t!==$||L&&!r||S.push(v)}}function f(){var o,l,d="",f={},u=er+(nt?",["+_r+"]":"");for(x=Ar?n.querySelectorAll(u):e(u,n).get(),_=x.length,r&&r.innerHTML&&(A=Ar?r.querySelectorAll(u):e(u,r).get(),r=A.length?A[A.length-1]:r),$=0,h=0;_>h;h++)if(y=x[h],r&&!G)G=y===r;else{if(i&&y===i){nt&&(d+=xt(y));break}if(y.parentNode)if(nt){if(d+=xt(y),y._df){for(o=h+1;_>o&&y.contains(x[o]);)o++;f[o-1]=y._df}f[h]&&(d+=f[h]||"")}else tt&&(k=yt(y,void 0,Rr))&&(k=k[0])&&(Y=Y?k.id!==Y&&Y:k.open&&k.id),!Y&&gt(yt(y))&&y.getAttribute(Gn)&&st.push([y])}if(nt&&(d+=n._df||"",(l=d.indexOf("#"+nt.id)+1)&&(d=d.slice(l+nt.id.length)),l=d.indexOf("/"+nt.id),l+1&&(d=d.slice(0,l)),c(yt(d,void 0,$r))),void 0===a&&n.getAttribute(Gn)&&st.push([n]),wt(r,z),wt(i,z),nt)return void(et&&et.resolve());for(z&&at+X&&(y=i,at&&(i?p(yt(at+"+",!0),i):p(yt(at,!0),n)),p(yt(X,!0),n),i&&(d=i.getAttribute(ir),(_=d.indexOf(Z)+1)&&(d=d.slice(_+Z.length-1)),i.setAttribute(ir,X+d))),_=st.length,h=0;_>h;h++)y=st[h],C=y[1],y=y[0],C?(v=Nr[C.id])&&((g=v.linkCtx)&&(v=g.tag,v.linkCtx=g),C.open?(y&&(v.parentElem=y.parentNode,v._prv=y),v._elCnt=C.elCnt,v.onBeforeLink&&v.onBeforeLink(),w=v.tagCtx.view,_t(void 0,v._prv,w,C.id)):(v._nxt=y,v._.unlinked&&(M=v.tagCtx,w=M.view,At(v)))):_t(y.getAttribute(Gn),y,Zn(y),void 0,tt,t,s);et&&et.resolve()}var u,g,v,h,_,m,b,x,y,w,k,C,A,j,I,E,T,S,B,L,M,R,$,F,P,D,U,O,q,H,K,J,z,Q,W,X,Z,G,Y,et,tt,nt,rt=this,it=rt._.id+"_",at="",st=[],pt=[],ct=[],ut=rt.hlp(lr),gt=p;if(o&&(et=o.lazyLink&&e.Deferred(),o.tmpl?I="/"+o._.id+"_":(tt=o.lnk,o.tag&&(it=o.tag+"^",o=!0),(nt=o.get)&&(gt=c,S=nt.tags,B=nt.deep,L=nt.name)),o=o===!0),n=n?""+n===n?e(n)[0]:n.jquery?n[0]:n:rt.parentElem||Wt.body,R=!Sn.noValidate&&n.contentEditable!==gr,O=n.tagName.toLowerCase(),z=!!jr[O],r=r&&kt(r,z),i=i&&kt(i,z)||null,void 0!=a){if(K=Wt.createElement("div"),H=K,Z=X="",W="http://www.w3.org/2000/svg"===n.namespaceURI?"svg_ns":(U=dn.exec(a))&&U[1]||"",rr&&U&&U[2]&&N("Unsupported: "+U[2]),z){for(T=i;T&&!(E=yt(T));)T=T.nextSibling;(J=E?E._tkns:n._df)&&(j=I||"",(o||!I)&&(j+="#"+it),m=J.indexOf(j),m+1&&(m+=j.length,Z=X=J.slice(0,m),J=J.slice(m),E?T.setAttribute(ir,J):ot(n,J)))}if(q=void 0,a=(""+a).replace(Br,d),R&&pt.length&&V("Mismatched '<"+O+"...>' in:\n"+a),l)return;for(Cr.appendChild(K),W=tr[W]||tr.div,F=W[0],H.innerHTML=W[1]+a+W[2];F--;)H=H.lastChild;for(Cr.removeChild(K),P=Wt.createDocumentFragment();D=H.firstChild;)P.appendChild(D);n.insertBefore(P,i)}return et?setTimeout(f,0):f(),et&&et.promise()}function _t(e,t,n,r,i,a,o){var s,l,d,p,c,f,u,g,v,h,_,m,b=[];if(r)h=Nr[r],h=h.linkCtx?h.linkCtx.tag:h,v=h.linkCtx||{data:n.data,elem:h._elCnt?h.parentElem:t,view:n,ctx:n.ctx,attr:_n,fn:h._.bnd,tag:h,_bndId:r},mt(v,v.fn);else if(e&&t){for(a=i?a:n.data,s=n.tmpl,e=Ct(e,pt(t)),Xn.lastIndex=0;l=Xn.exec(e);)b.push(l);for(;l=b.shift();){for(_=Xn.lastIndex,d=l[1],u=l[3];b[0]&&"else"===b[0][4];)u+="}{"+b.shift()[3],m=!0;m&&(u+="}{{/"+l[4]+"}"),c=l[10],p=void 0,v={data:a,elem:t,view:n,ctx:o,attr:d,isLk:i,_toLk:1,_noUpd:l[2]},l[6]&&(!d&&(p=/:([\w$]*)$/.exec(c))&&(p=p[1],void 0!==p&&(f=-p.length-1,u=u.slice(0,f-1)+Gt)),null===p&&(p=void 0),v.convert=l[5]||""),v.expr=d+u,g=s.links[u],g||(s.links[u]=g=Vn.tmplFn(u,s,!0,p,m)),v.fn=g,d||void 0===p||(v.convertBack=p),mt(v,g),Xn.lastIndex=_}}}function mt(e,t){function n(n,r){it.call(e,n,r,t)}n.noArray=!0,e.isLk&&(e.view=new Vn.View(e.ctx,"link",Jt,e.data,Jt.tmpl,void 0,void 0,ft)),e._ctxCb=Lt(e.view),e._hdl=n,n(!0)}function bt(e,t){var n;return e?(n=e.indexOf(t),n+1?e.slice(0,n)+e.slice(n+t.length):e):""}function xt(e){return e&&(""+e===e?e:e.tagName===ur?e.type.slice(3):1===e.nodeType&&e.getAttribute(ir)||"")}function yt(e,t,n){function r(e,t,n,r,a,s){o.push({elCnt:i,id:r,ch:a,open:t,close:n,path:s,token:e})}var i,a,o=[];return(a=t?e:xt(e))?(i=o.elCnt=e.tagName!==ur,i="@"===a.charAt(0)||i,o._tkns=a,a.replace(n||Fr,r),o):void 0}function wt(e,t){e&&("jsv"===e.type?e.parentNode.removeChild(e):t&&""===e.getAttribute(Gn)&&e.removeAttribute(Gn))}function kt(e,t){for(var n=e;t&&n&&1!==n.nodeType;)n=n.previousSibling;return n&&(1!==n.nodeType?(n=Wt.createElement(ur),n.type="jsv",e.parentNode.insertBefore(n,e)):xt(n)||n.getAttribute(Gn)||n.setAttribute(Gn,"")),n}function Ct(t,n){return t=e.trim(t).replace(on,"\\$&"),t.slice(-1)!==Gt?t=Zt+":"+t+(n?":":"")+Gt:t}function At(t,n){var r,i,a,o,s,l,d,p,c=t.tagCtx,f=c.view,u=c.props,g=t.linkCtx=t.linkCtx||{tag:t,data:f.data,view:f,ctx:f.ctx};if(t.onAfterLink&&t.onAfterLink(c,g,n),t._.unlinked=void 0,r=t.targetTag?t.targetTag.linkedElem:t.linkedElem,!t.noVal&&(i=r&&r[0])){if((a=t._.radio)&&(r=r.children("input[type=radio]")),a||!t._.chging){if(o=t.cvtArgs()[0],a||i!==g.elem){for(s=r.length;s--;)i=r[s],l=i._jsvLkEl,t._.inline&&(!l||l!==t&&l.targetTag!==t)&&(i._jsvLkEl=t,Et(Nr[t._tgId],t.convertBack),i._jsvBnd="&"+t._tgId+"+"),a&&(i[dr]=o===i.value);g._val=o}void 0!==o&&(a||void 0===i.value?i.contentEditable===gr&&(i.innerHTML=o):i.type===pr?i[dr]=o&&"false"!==o:r.val(o))
}t.setSize&&(u.height&&r.height(u.height),u.width&&r.width(u.width)),u["class"]&&r.addClass(u["class"]),u.id&&(r[0].id=u.id),u.name&&r.attr("name",u.name)}(i=i||":"===t.tagName&&g.elem)&&(d=i._jsvTr,p=u.trigger,d!==p&&(i._jsvTr=p,r=r||e(i),It(r,d,"off"),It(r,p,"on")))}function jt(e){setTimeout(function(){rt(e)},0)}function It(e,t,n){t&&e[n](t===!0?"keydown":t,t===!0?jt:rt)}function Et(e,t){var n,r,i,a,o,s=e.linkCtx,l=s.data,d=s.fn.paths;if(e&&d)if(d=(n=d._jsvto)||d[0],r=d&&d.length,!r||s.tag&&!s.tag.tagCtx.args.length)e.to=[[],t];else{if(a=d[r-1],a._jsv){for(o=a;a.sb&&a.sb._jsv;)i=a=a.sb;i=a.sb||i&&i.path,a=i?i.slice(1):o.path}e.to=i?[[o,a],t]:[s._ctxCb(i=a.split("^").join("."))||[l,i],t]}}function Tt(e,t,n){var r,i,a=e.tagCtx.view,o=e.tagCtxs||[e.tagCtx],s=o.length,l=!t;if(t=t||e._.bnd.call(a.tmpl,(e.linkCtx||a).data,a,kn),n)o=e.tagCtxs=t,e.tagCtx=o[0];else for(;s--;)r=o[s],i=t[s],q(r.props).setProperty(i.props),p(r.ctx,i.ctx),r.args=i.args,l&&(r.tmpl=i.tmpl);return Vn._ths(e,o[0]),o}function Nt(e){for(var t,n,r,i=[],a=e.length,o=a;o--;)i.push(e[o]);for(o=a;o--;)if(n=i[o],n.parentNode){if(r=n._jsvBnd)for(r=r.slice(1).split("&"),n._jsvBnd="",t=r.length;t--;)Vt(r[t],n._jsvLkEl,n);$t(xt(n)+(n._df||""))}}function Vt(t,n,r){var i,a,o,s,l,d,p,c,f,u,g,v=Nr[t];if(n)r===n.linkedElem[0]&&(r._jsvLkEl=void 0,n.linkedElem=void 0);else if(v){delete Nr[t];for(i in v.bnd)s=v.bnd[i],l=v.cbId,e.isArray(s)?e([s]).off(Un+l).off(Dn+l):e(s).off(Dn+l),delete v.bnd[i];if(a=v.linkCtx){if(o=a.tag){if(d=o.tagCtxs)for(p=d.length;p--;)(c=d[p].map)&&c.unmap();f=o.linkedElem,u=f&&f[0]||a.elem,(g=u&&u._jsvTr)&&(It(f||e(u),g,"off"),u._jsvTr=void 0),o.onDispose&&o.onDispose(),o._elCnt||(o._prv&&o._prv.parentNode.removeChild(o._prv),o._nxt&&o._nxt.parentNode.removeChild(o._nxt))}delete a.view._.bnds[t]}Vn._cbBnds[v.cbId]=void 0}}function St(t,n){return void 0===t?(Wn&&(e(Wn).off(ar,rt).off("blur","[contenteditable]",rt),Wn=void 0),t=!0,Jt.removeViews(),Nt(Wt.body.getElementsByTagName("*"))):n&&t===!0&&(n=n.jquery?n:e(n),n.each(function(){for(var e;(e=Zn(this,!0))&&e.parent;)e.parent.removeViews(e._.key,void 0,!0);Nt(this.getElementsByTagName("*")),Nt([this])})),n}function Bt(e,t){return St(this,e,t)}function Lt(e){return function(t,n){var r,i,a=[n];if(e&&t){if(t._jsv)return t._jsv.call(e.tmpl,n,e,kn);if("~"===t.charAt(0))return"~tag"===t.slice(0,4)&&(i=e.ctx,"."===t.charAt(4)&&(r=t.slice(5).split("."),i=i.tag),r)?i?[i,r.join("."),n]:[]:(t=t.slice(1).split("."),(n=e.hlp(t.shift()))&&(t.length&&a.unshift(t.join(".")),a.unshift(n)),n?a:[]);if("#"===t.charAt(0))return"#data"===t?[]:[e,t.replace(Sr,""),n]}}}function Mt(e){return e.type===pr?e[dr]:e.value}function Rt(e,t,n,r,i,a){var o,s,l,d,p,c,f,u=0,g=e===t;if(e){for(l=yt(e)||[],o=0,s=l.length;s>o;o++){if(d=l[o],c=d.id,c===r&&d.ch===i){if(!a)break;s=0}g||(p="_"===d.ch?nr[c]:Nr[c].linkCtx.tag,d.open?p._prv=t:d.close&&(p._nxt=t)),u+=c.length+2}u&&e.setAttribute(ir,e.getAttribute(ir).slice(u)),f=t?t.getAttribute(ir):n._df,(s=f.indexOf("/"+r+i)+1)&&(f=l._tkns.slice(0,u)+f.slice(s+(a?-1:r.length+1))),f&&(t?t.setAttribute(ir,f):ot(n,f))}else ot(n,bt(n._df,"#"+r+i)),a||t||ot(n,bt(n._df,"/"+r+i))}function $t(e){var t,n,r,i;if(i=yt(e,!0,Mr))for(t=0,n=i.length;n>t;t++)r=i[t],"_"===r.ch?(r=nr[r.id])&&r.type&&r.parent.removeViews(r._.key,void 0,!0):Vt(r.id)}function Ft(e,t,n){if("set"===n.change){for(var r=e.tgt,i=r.length;i--&&r[i].key!==n.path;);-1===i?n.path&&!n.remove&&q(r).insert({key:n.path,prop:n.value}):n.remove?q(r).remove(i):q(r[i]).setProperty("prop",n.value)}}function Pt(e,t,n){var r,i=e.src,a=n.change;"set"===a?"prop"===n.path?q(i).setProperty(t.target.key,n.value):(q(i).setProperty(n.oldValue,null),delete i[n.oldValue],q(i).setProperty(n.value,t.target.prop)):"remove"===a?(r=n.items[0],q(i).removeProperty(r.key),delete i[r.key]):"insert"===a&&(r=n.items[0],r.key&&q(i).setProperty(r.key,r.prop))}function Dt(e){return e.indexOf(".")<0}var Ut="v1.0.0-alpha",Ot="JsViews requires ";if(!e)throw Ot+"jQuery";var qt,Ht,Kt,Jt,zt,Qt=(0,eval)("this"),Wt=Qt.document,Xt="{",Zt="{",Gt="}",Yt="}",en="^",tn=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,nn=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*[.^]|\s*$|[^\(\[])|[)\]])([([]?))|(\s+)/g,rn=/[ \t]*(\r\n|\n|\r)/g,an=/\\(['"])/g,on=/['"\\]/g,sn=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$_\.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,ln=/^if\s/,dn=/<(\w+)[>\s]/,pn=/[\x00`><"'&]/g,cn=/[\x00`><\"'&]/,fn=/^on[A-Z]|^convert(Back)?$/,un=pn,gn=0,vn=0,hn={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},_n="html",mn="object",bn="data-jsv-tmpl",xn="For #index in nested block use #getIndex().",yn={},wn={template:{compile:C},tag:{compile:w},helper:{},converter:{}},kn={jsviews:Ut,settings:function(e){p(Sn,e),l(Sn._dbgMode),Sn.jsv&&Sn.jsv()},sub:{View:x,Err:d,tmplFn:S,parse:R,extend:p,syntaxErr:V,onStore:{},_ths:i,_tg:function(){}},map:A,_cnvt:h,_tag:b,_err:N},Cn=Qt.jsviews;(d.prototype=new Error).constructor=d,u.depends=function(){return[this.get("item"),"index"]},g.depends="index",x.prototype={get:f,getIndex:g,getRsc:m,hlp:v,_is:"view"};for(qt in wn)I(qt,wn[qt]);var An,jn,In=kn.templates,En=kn.converters,Tn=kn.helpers,Nn=kn.tags,Vn=kn.sub,Sn=kn.settings;Vn._tg.prototype={baseApply:k,cvtArgs:_},Jt=Vn.topView=new x,e?(e.fn.render=function(e,t,n){var r=this.jquery&&(this[0]||N('Unknown template: "'+this.selector+'"')),i=r.getAttribute(bn);return E.call(i?In[i]:In(r),e,t,n)},e.observable&&(p(Vn,e.views.sub),kn.map=e.views.map)):(e={},isCommonJS||(Qt.jsviews=e),e.isFunction=function(e){return"function"==typeof e},e.isArray=Array.isArray||function(t){return"[object Array]"===e.toString.call(t)},e.noConflict=function(){return Qt.jsviews===e&&(Qt.jsviews=Cn),e}),An=e.isFunction,jn=e.isArray,e.render=yn,e.views=kn,e.templates=In=kn.templates,kn.compile=function(e,t){return t=t||{},t.markup=e,In(t)},Sn({debugMode:l,delimiters:c,onError:function(e,t,n){return t&&(e=void 0===n?"{Error: "+(e.message||e)+"}":An(n)?n(e,t):n),void 0==e?"":e},_dbgMode:!1}),Nn({"if":{render:function(e){var t=this,n=t.tagCtx,r=t.rendering.done||!e&&(arguments.length||!n.index)?"":(t.rendering.done=!0,t.selected=n.index,n.render(n.view,!0));return r},flow:!0},"for":{render:function(e){var t,n=!arguments.length,r=this,i=r.tagCtx,a="",o=0;return r.rendering.done||(t=n?i.view.data:e,void 0!==t&&(a+=i.render(t,n),o+=jn(t)?t.length:1),(r.rendering.done=o)&&(r.selected=i.index)),a},flow:!0},props:{baseTag:"for",dataMap:A(D),flow:!0},include:{flow:!0},"*":{render:a,flow:!0},":*":{render:a,flow:!0},dbg:Tn.dbg=En.dbg=s}),En({html:U,attr:U,url:function(e){return void 0!=e?encodeURI(""+e):null===e?e:""}}),c();var Bn=e.event.special,Ln=[].slice,Mn=[].splice,Rn=[].concat,$n=e.expando,Fn=parseInt,Pn=/\S+/g,Dn=Vn.propChng=Vn.propChng||"propertyChange",Un=Vn.arrChng=Vn.arrChng||"arrayChange",On=Vn._cbBnds=Vn._cbBnds||{},qn=Dn+".observe",Hn=1,Kn=1,Jn=1,zn=e.hasData,Qn={};Vn.getDeps=function(){var e=arguments;return function(){for(var t,n,r=[],i=e.length;i--;)t=e[i--],n=e[i],n&&(r=r.concat(An(n)?n(t,t):n));return r}},e.observable=q,q._fltr=function(e,t,n,r){return(r&&An(r)?r(e,t,n):!0)?(t=An(t)?t.set&&t.call(n[0]):t,typeof t===mn&&t):void 0},q.Object=H,q.Array=K,e.observe=q.observe=X,e.unobserve=q.unobserve=Z,q._apply=G,H.prototype={_data:null,observeAll:Y,unobserveAll:et,data:function(){return this._data},setProperty:function(e,t,n){var r,i,a,o=this,s=o._data;if(e=e||"",s)if(jn(e))for(r=e.length;r--;)i=e[r],o.setProperty(i.name,i.value,void 0===n||n);else if(""+e!==e)for(r in e)o.setProperty(r,e[r],t);else if(e!==$n){for(a=e.split(".");s&&a.length>1;)s=s[a.shift()];s&&o._setProperty(s,a[0],t,n)}return o},removeProperty:function(e){return this.setProperty(e,Qn),this},_setProperty:function(e,t,n,r){var i,a,o,s=t?e[t]:e;An(s)&&s.set&&(a=s,i=s.set===!0?s:s.set,s=s.call(e)),(s!==n||r&&s!=n)&&(!(s instanceof Date)||s>n||n>s)&&(i?(i.call(e,n),n=a.call(e)):(o=n===Qn)?(delete e[t],n=void 0):t&&(e[t]=n),this._trigger(e,{change:"set",path:t,value:n,oldValue:s,remove:o}))},_trigger:function(t,n){e(t).triggerHandler(Dn,n)}},K.prototype={_data:null,observeAll:Y,unobserveAll:et,data:function(){return this._data},insert:function(e,t){var n=this._data;return 1===arguments.length&&(t=e,e=n.length),e=Fn(e),e>-1&&e<=n.length&&(t=jn(t)?t:[t],t.length&&this._insert(e,t)),this},_insert:function(e,t){var n=this._data,r=n.length;Mn.apply(n,[e,0].concat(t)),this._trigger({change:"insert",index:e,items:t},r)},remove:function(e,t){var n,r=this._data;return void 0===e&&(e=r.length-1),e=Fn(e),t=t?Fn(t):0===t?0:1,t>-1&&e>-1&&(n=r.slice(e,e+t),t=n.length,t&&this._remove(e,t,n)),this},_remove:function(e,t,n){var r=this._data,i=r.length;r.splice(e,t),this._trigger({change:"remove",index:e,items:n},i)},move:function(e,t,n){if(n=n?Fn(n):0===n?0:1,e=Fn(e),t=Fn(t),n>0&&e>-1&&t>-1&&e!==t){var r=this._data.slice(e,e+n);n=r.length,n&&this._move(e,t,n,r)}return this},_move:function(e,t,n,r){var i=this._data,a=i.length;i.splice(e,n),Mn.apply(i,[t,0].concat(r)),this._trigger({change:"move",oldIndex:e,index:t,items:r},a)},refresh:function(e){var t=this._data.slice();return this._refresh(t,e),this},_refresh:function(e,t){var n=this._data,r=n.length;Mn.apply(n,[0,n.length].concat(t)),this._trigger({change:"refresh",oldItems:e},r)},_trigger:function(t,n){var r=this._data,i=r.length,a=e([r]);i!==n&&a.triggerHandler(Dn,{change:"set",path:"length",value:i,oldValue:n}),a.triggerHandler(Un,t)}},Bn[Dn]=Bn[Un]={remove:function(t){var n,r,i,a,o,s=t.data;if(s&&(s.off=!0,s=s.cb)&&(n=On[s._cId])){for(i=e._data(this).events[t.type],a=i.length;a--&&!r;)r=(o=i[a].data)&&o.cb._cId===s._cId;r||(delete n[e.data(this,"obId")],Q(n,s._cId))}}},kn.map=function(t){function n(e,n,r){var i,a=this;this.src&&this.unmap(),typeof e===mn&&(a.src=e,a.tgt=r||a.tgt||[],a.options=n||a.options,a.update(),t.obsSrc&&q(a.src).observeAll(a.obs=function(e,n){i||(i=!0,t.obsSrc(a,e,n),i=void 0)},a.srcFlt),t.obsTgt&&q(a.tgt).observeAll(a.obt=function(e,n){i||(i=!0,t.obsTgt(a,e,n),i=void 0)},a.tgtFlt))}return An(t)&&(t={getTgt:t}),t.baseMap&&(t=e.extend({},t.baseMap,t)),t.map=function(e,t,r){return new n(e,t,r)},(n.prototype={srcFlt:t.srcFlt||nt,tgtFlt:t.tgtFlt||nt,update:function(e){var n=this;q(n.tgt).refresh(t.getTgt(n.src,n.options=e||n.options))},unmap:function(){var e=this;e.src&&(e.obs&&q(e.src).unobserveAll(e.obs,e.srcFlt),e.obt&&q(e.tgt).unobserveAll(e.obt,e.tgtFlt),e.src=void 0)},map:n,_def:t}).constructor=n,t};var Wn,Xn,Zn,Gn,Yn,er,tr,nr,rr,ir="data-jsv",ar="change.jsv",or="onBeforeChange",sr="onAfterChange",lr="onAfterCreate",dr="checked",pr="checkbox",cr="radio",fr="none",ur="SCRIPT",gr="true",vr='"></script>',hr='<script type="jsv',_r=ir+"-df",mr="script,["+ir+"]",br={value:"val",input:"val",html:_n,text:"text"},xr={from:"value",to:"value"},yr=0,wr=e.cleanData,kr=Sn.delimiters,Cr=Wt.createDocumentFragment(),Ar=Wt.querySelector,jr={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},Ir={tr:"table"},Er={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},Tr={},Nr={},Vr=1,Sr=/^#(view\.?)?/,Br=/(^|(\/>)|<\/(\w+)>|)(\s*)([#\/]\d+(?:_|(\^)))`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*|(>))/g,Lr=/(#)()(\d+)(_)/g,Mr=/(#)()(\d+)([_^])/g,Rr=/(?:(#)|(\/))(\d+)(_)/g,$r=/(#)()(\d+)(\^)/g,Fr=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g,Pr=Qt.getComputedStyle;return e.link?e:(Yn={contents:function(t,n){t!==!!t&&(n=t,t=void 0);var r,i=e(this.nodes());return i[0]&&(r=n?i.filter(n):i,i=t&&n?r.add(i.find(n)):r),i},nodes:function(e,t,n){var r,i=this,a=i._elCnt,o=!t&&a,s=[];for(t=t||i._prv,n=n||i._nxt,r=o?t===i._nxt?i.parentElem.lastSibling:t:i._.inline===!1?t||i.linkCtx.elem.firstChild:t&&t.nextSibling;r&&(!n||r!==n);)(e||a||r.tagName!==ur)&&s.push(r),r=r.nextSibling;return s},childTags:function(e,t){e!==!!e&&(t=e,e=void 0);var n=this,r=n.link?n:n.tagCtx.view,i=n._prv,a=n._elCnt,o=[];return r.link(void 0,n.parentElem,a?i&&i.previousSibling:i,n._nxt,void 0,{get:{tags:o,deep:e,name:t,id:n.link?n._.id+"_":n._tgId+"^"}}),o},refresh:function(e){var t,n,r=this,i=r.linkCtx,a=r.tagCtx.view;return r.disposed&&N("Removed tag"),void 0===e&&(e=kn._tag(r,a,a.tmpl,Tt(r),!0)),e+""===e&&(n=r._.inline?_n:i.attr||pt(r.parentElem,!0),t=st(e,i,n,r)),At(r),t||r},update:function(e){var t=this.linkedElem;t&&rt({target:t[0]},void 0,e)}},Vn.onStore.template=function(t,n){n.link=gt,n.unlink=Bt,t&&(e.link[t]=function(){return gt.apply(n,arguments)},e.unlink[t]=function(){return Bt.apply(n,arguments)})},p(p(Vn._tg.prototype,Yn),{domChange:function(){var t=this.parentElem,n=e.hasData(t)&&e._data(t).events,r="jsv-domchange";n&&n[r]&&e(t).triggerHandler(r,arguments)}}),Vn.viewInfos=yt,(Sn.delimiters=function(){var e=kr.apply(0,arguments);return Xt=e[0],Zt=e[1],Gt=e[2],Yt=e[3],en=e[4],Xn=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+en+")?(\\"+Zt+Vn.rTag+"\\"+Gt+")","g"),this})(),p(p(Vn.View.prototype,Yn),{addViews:function(e,t,n){var r,i,a=this,o=t.length,s=a.views;if(!a._.useKey&&o&&(n=a.tmpl)&&(i=s.length+o,i===a.data.length&&ct(a,e,n,s,t,a.ctx)!==!1))for(r=e+o;i>r;r++)q(s[r]).setProperty("index",r);return a},removeViews:function(t,n,r){function i(t){var n,i,a,o,s,l,d=p[t];if(d&&d.link){if(n=d._.id,r||(l=d.nodes()),d.removeViews(void 0,void 0,!0),d.type=void 0,o=d._prv,s=d._nxt,a=d.parentElem,r||(d._elCnt&&Rt(o,s,a,n,"_"),e(l).remove()),!d._elCnt)try{o.parentNode.removeChild(o),s.parentNode.removeChild(s)}catch(c){}dt(d);for(i in d._.bnds)Vt(i);delete nr[n]}}var a,o,s,l=this,d=!l._.useKey,p=l.views;if(d&&(s=p.length),void 0===t)if(d){for(a=s;a--;)i(a);l.views=[]}else{for(o in p)i(o);l.views={}}else if(void 0===n&&(d?n=1:(i(t),delete p[t])),d&&n&&s-n===l.data.length){for(a=t+n;a-->t;)i(a);if(p.splice(t,n),s=p.length)for(;s>t;)q(p[t]).setProperty("index",t++)}return this},refresh:function(e){var t=this,n=t.parent;return n&&(ct(t,t.index,t.tmpl,n.views,t.data,e,!0),dt(t)),t},link:ht}),En.merge=function(e){var t,n=this.linkCtx._val||"",r=this.tagCtx.props.toggle;return r&&(t=r.replace(/[\\^$.|?*+()[{]/g,"\\$&"),t="(\\s(?="+t+"$)|(\\s)|^)("+t+"(\\s|$))",n=n.replace(new RegExp(t),"$2"),e=n+(e?(n&&" ")+r:"")),e},Nn("on",{attr:fr,init:function(e){var t=this,n=e.props,r=e.content,i=n.elem;t._.inline&&(t.attr=_n,i=(i||"span")+">",t.template="<"+i+(n.label||r.markup||e.params.args[0])+"</"+i)},render:function(){var e=this.tagCtx;return e.render(e.view,!0)},onAfterLink:function(t,n){var r,i,a=this,o=0,s=t.args,l=s.length,d=t.props,p=d.data,c=t.view,f=d.context;for(a.activeElem=a.activeElem||e(a._.inline?(a._elCnt&&N('Use data-link="{on...}"'),a.nodes()[0]):n.elem);l>o&&!(i=An(r=s[o++])););i&&(i=s.slice(o),s=s.slice(0,o-1),f||(f=/^(.*)[\.^][\w$]+$/.exec(t.params.args.slice(-i.length-1)[0]),f=f&&Vn.tmplFn("{:"+f[1]+"}",c.tmpl,!0)(n.data,c)),a._evs&&a.onDispose(),a.activeElem.on(a._evs=s[0]||"click",a._sel=s[1],void 0==p?null:p,a._hlr=function(e){return r.apply(f||n.data,[].concat(i,e,{change:e.type,view:c,linkCtx:n},i.slice.call(arguments,1)))}))},onUpdate:function(){return!1},onDispose:function(){this.activeElem.off(this._evs,this._sel,this._hlr)},flow:!0}),p(Nn["for"],{onArrayChange:function(e,t,n,r){var i,a=e.target,o=a.length,s=this,l=t.change;if(s._.noVws||s.tagCtxs[1]&&("insert"===l&&o===t.items.length||"remove"===l&&!o||"refresh"===l&&!t.oldItems.length!=!o))s.refresh();else for(i in s._.arrVws)i=s._.arrVws[i],i.data===a&&i._.onArrayChange.apply(i,arguments);s.domChange(n,r,t),e.done=!0},onAfterLink:function(t,n){var r,i,a,o,s=this,l=s._ars||{},d=s.tagCtxs,p=d.length,c=s.selected||0;for(r=0;c>=r;r++)t=d[r],o=t.map?t.map.tgt:t.args.length?t.args[0]:t.view.data,(a=l[r])&&o!==a[0]&&(X(a[0],a[1],!0),delete l[r]),!l[r]&&e.isArray(o)&&(X(o,i=function(e,r){var i=t;s.onArrayChange(e,r,i,n)}),l[r]=[o,i]);for(r=c+1;p>r;r++)(a=l[r])&&(X(a[0],a[1],!0),delete l[r]);s._ars=l},onDispose:function(){var e,t=this;for(e in t._ars)X(t._ars[e][0],t._ars[e][1],!0)}}),p(Nn["for"],Yn),p(Nn["if"],Yn),p(Nn.include,Yn),p(Nn["if"],{onUpdate:function(e,t,n){var r,i,a;for(r=0;(i=this.tagCtxs[r])&&i.args.length;r++)if(i=i.args[0],a=!i!=!n[r].args[0],!this.convert&&i||a)return a;return!1},onAfterLink:function(e,t,n){n&&this.domChange(e,t,n)}}),Nn("props",{baseTag:"for",dataMap:kn.map({getTgt:Nn.props.dataMap.getTgt,obsSrc:Ft,obsTgt:Pt,tgtFlt:Dt}),flow:!0}),p(e,{view:kn.view=Zn=function(t,n,r){function i(e,t){if(e)for(o=yt(e,t,Lr),l=0,d=o.length;d>l&&(!(a=nr[o[l].id])||!(a=a&&r?a.get(!0,r):a));l++);}n!==!!n&&(r=n,n=void 0);var a,o,s,l,d,p,c,f=0,u=Wt.body;if(t&&t!==u&&Jt._.useKey>1&&(t=""+t===t?e(t)[0]:t.jquery?t[0]:t)){if(n){if(i(t._df,!0),!a)for(c=Ar?t.querySelectorAll(mr):e(mr,t).get(),p=c.length,s=0;!a&&p>s;s++)i(c[s]);return a}for(;t;){if(o=yt(t,void 0,Rr))for(p=o.length;p--;)if(a=o[p],a.open){if(1>f)return a=nr[a.id],a&&r?a.get(r):a||Jt;f--}else f++;t=t.previousSibling||t.parentNode}}return Jt},link:kn.link=vt,unlink:kn.unlink=St,cleanData:function(t){t.length&&yr&&Nt(t),wr.apply(e,arguments)}}),kn.utility={validate:function(e){try{Jt.link(void 0,Wt.createElement("div"),void 0,void 0,e,void 0,void 0,1)}catch(t){return t.message}}},p(e.fn,{link:function(e,t,n,r,i,a,o){return vt(e,this,t,n,r,i,a,o)},unlink:function(e){return St(e,this)},view:function(e,t){return Zn(this[0],e,t)}}),e.each([_n,"replaceWith","empty","remove"],function(t,n){var r=e.fn[n];e.fn[n]=function(){var e;yr=1;try{e=r.apply(this,arguments)}finally{yr=0}return e}}),p(Jt=Vn.topView,{tmpl:{links:{}}}),nr={0:Jt},Sn({wrapMap:tr={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],svg_ns:[1,"<svg>","</svg>"],div:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},linkAttr:Gn="data-link",merge:{input:{from:Mt,to:"value"},textarea:xr,select:xr,optgroup:{to:"label"}},jsrDbgMode:Sn.debugMode,debugMode:function(e){Sn.jsrDbgMode(e),Qt._jsv=Sn._dbgMode?{views:nr,bindings:Nr}:void 0},jsv:function(){Sn.debugMode(Sn._dbgMode),Gn=Sn.linkAttr,N=kn._err,er=mr+",["+Gn+"]",rr=Sn.noDomLevel0,tr.optgroup=tr.option,tr.tbody=tr.tfoot=tr.colgroup=tr.caption=tr.thead,tr.th=tr.td}}),e)});
//# sourceMappingURL=jsviews.min.js.map