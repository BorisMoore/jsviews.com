/*! JsViews jQueryUI widget integration v0.9.84 (Beta)
see: http://www.jsviews.com/#download/jqueryui-tagcontrols */
!function(e,t,i){"use strict";function n(e,t){var i=this,n=e.props,a=i.mainElem[0],s=i.bndArgs()[0];n.name&&(a.name=n.name),n.value&&(a.value=n.value),a.checked="radio"===a.type?s===a.value:s&&"false"!==s,i.baseApply(arguments),i.displayElem=i.widget.label,n.label&&i.widget.option("label",n.label)}function a(e,t){var i=this;i.baseApply(arguments),i.displayElem=i.widget.element,i.mainElem.on("jsv-domchange",function(e,t,n,a){var s,o=i.widget.option("active");i.widget.refresh(),s=i.widget.option("active"),o!==s&&i.update(s)})}function s(){var e=this;return{activate:function(t,i){e.update(e.widget.option("active"))}}}function o(){var e=t(this).clone();return e.find("*").addBack().removeAttr("id data-link data-jsv data-jsv-df"),e.find("script").remove(),e}if(!(t&&t.fn&&t.ui&&t.views))throw"jsviews-jqueryui-widgets.js requires jQuery, jQuery UI and JsViews";var l={widget:{argDefault:!1,mainElement:"*",init:function(e){var i,n,a,s=this;s._.inline&&(a=e.props,i=e.tmpl.markup,!s.template&&(n=a.elem||s.elem)&&(i?s.wrap&&(s.template="<"+n+">"+t.trim(i)+"</"+n+">"):s.template="input"===n?"<input/>":"<"+n+"></"+n+">"),s.attr="html")},onBind:function(e){var i,n,a,s,o=this,l=o.initOptions,r=o.widgetName,d=o.options,u=r;if(r=r.split("-").pop(),a=l&&l.length)for(l={};a--;)s=o.initOptions[a],(n=e.props["_"+s])&&(l[s]=n);if(u===r&&(u="ui-"+r),i=o.mainElem,!i||!i[0])throw"No element found for tag '"+o.tagName+"'";if(e.props.id&&!i[0].id&&(i[0].id=e.props.id),i[r](l),o.widget=i.data(u)||i.data(r),!o.widget)throw"widget '"+r+"' failed";d&&(t.isFunction(d)&&(d=o.options()),i[r]("option",d))},onAfterLink:function(e){var i,n=this,a=n.options,s=e.props,o=n.widgetName.split("-").pop();i=n.mainElem,t.each(s,function(e,n){var s;"_"===e.charAt(0)&&(e=e.slice(1),s=a&&a[e],i[o]("option",e,s&&t.isFunction(s)&&n&&t.isFunction(s)?function(){return s.apply(i[0],arguments),n.apply(i[0],arguments)}:n))})},onUpdate:!1,dataBoundOnly:!0,attr:"none"},button:{baseTag:"widget",widgetName:"button",elem:"button",wrap:!0,setSize:!0,contentCtx:!0,onBind:function(e,t){var i=this.mainElem[0];i.innerHTML=i.innerHTML||"&nbsp;",this.baseApply(arguments)},onAfterLink:function(e,t,i,n){this.baseApply(arguments),n&&this.widget.refresh()}},autocomplete:{baseTag:"widget",widgetName:"autocomplete",linkedElement:"*",elem:"input",setSize:!0,options:function(){var e=this;return{change:function(t,i){i.item&&e.update(i.item.value)},select:function(t,i){i.item&&e.update(i.item.value)},focus:function(e,t){return!1}}}},checkbox:{baseTag:"widget",widgetName:"checkboxradio",template:"<label><input type='checkbox'/></label>",mainElement:"input",linkedElement:"input",setSize:!0,onAfterLink:n},radio:{baseTag:"widget",widgetName:"checkboxradio",template:"<label><input type='radio'/></label>",mainElement:"input",linkedElement:"input",setSize:!0,onBind:function(){var e=this,t=e.parents.radiogroup;e.baseApply(arguments),t&&!t.onAfterLink&&(t.onAfterLink=function(e){for(var t=this.bndArgs()[0],i=this.childTags("radio"),n=i.length;n--;)i[n].setValue(t)})},onAfterLink:n,setValue:function(e){this.widget.refresh()}},controlgroup:{baseTag:"widget",widgetName:"controlgroup",elem:"span",wrap:!0,contentCtx:!0,onBind:function(){var e=this;e.baseApply(arguments),e.mainElem.on("jsv-domchange",function(){e.widget.refresh()})}},datepicker:{baseTag:"widget",widgetName:"datepicker",linkedElement:"*",elem:"input",setSize:!0,options:function(){var e=this;return{onSelect:function(t){e.value=t,e.update(t)}}},onBind:function(e){var t=this;t.baseApply(arguments),"INPUT"!==t.mainElem[0].tagName?t.mainElem.css("display","inline-block"):t.tagCtx.props.trigger=!1},setValue:function(e){var t=this;e!==i&&e!==t.value&&(t.value=e,t.linkedElem.datepicker("setDate",e))},getValue:function(){return this.value}},droppable:{baseTag:"widget",widgetName:"droppable",elem:"div",wrap:!0,setSize:!0,contentCtx:!0,setValue:function(e){t.isFunction(e)&&this.widget.option("drop",e)}},menu:{baseTag:"widget",widgetName:"menu",elem:"ul",wrap:!0,setSize:!0,contentCtx:!0,initOptions:["menus","items","role"],setValue:function(e){t.isFunction(e)&&this.widget.option("select",e)}},progressbar:{baseTag:"widget",widgetName:"progressbar",boundProps:["busy"],bindTo:0,elem:"div",wrap:!0,setSize:!0,contentCtx:!0,setValue:function(e){this.widget.value(parseFloat(e)||0)},getValue:function(){return this.widget.value()},onAfterLink:function(e){var t=this;t.baseApply(arguments),e.props.busy&&t.widget.value(!1)}},resizable:{baseTag:"widget",widgetName:"resizable",bindTo:["width","height"],linkedCtxParam:["width","height"],wrapLinkCtxElem:!0,elem:"div",wrap:!0,contentCtx:!0,options:function(){var e=this;return{resize:function(t,i){setTimeout(function(){e.update(i.size.width,i.size.height)},0)}}},setValue:function(e,t){var n=this.mainElem;e!==i&&n.width(e||0),t!==i&&n.height(t||0)},getValue:function(){var e=this.mainElem;return[e.width(),e.height()]}},selectmenu:{baseTag:"widget",widgetName:"selectmenu",linkedElement:"select",elem:"select",wrap:!0,setSize:!0,contentCtx:!0,options:function(){var e=this;return{change:function(t,i){e.update(i.item.value)}}},onBind:function(){var e=this;e.baseApply(arguments),e.mainElem.on("jsv-domchange",function(){e.widget.refresh()}),e.displayElem=e.widget.button},setValue:function(e){this.mainElem[0].value=e,this.widget.refresh()},getValue:function(){return this.mainElem[0].value}},slider:{baseTag:"widget",widgetName:"slider",bindTo:[0,1],linkedElement:["*","~foo"],elem:"div",setSize:!0,options:function(){var e=this;return{slide:function(t,i){setTimeout(function(){e.update(i.value)},0)}}},onAfterLink:function(e){var t=this;t.linkCtx.elem._jsvChg||t.baseApply(arguments)},setValue:function(e){this.widget.value(e||0)},getValue:function(){return this.widget.value()}},spinner:{baseTag:"widget",widgetName:"spinner",linkedElement:"input",elem:"input",setSize:!0,options:function(){var e=this;return{spin:function(t,i){e.update(i.value)}}},onAfterLink:function(e){var t=this;t.linkCtx.elem._jsvChg||(t.baseApply(arguments),t.displayElem=this.linkedElem.parent(),e.props.width&&this.linkedElem.width(e.props.width-t.displayElem.find(".ui-spinner-up").width()-9))},setValue:function(e){this.widget.value(e||0)},getValue:function(){return this.widget.value()}},tabs:{baseTag:"widget",widgetName:"tabs",bindTo:0,elem:"div",wrap:!0,setSize:!0,contentCtx:!0,options:s,onBind:a,setValue:function(e){this.widget.option("active",parseInt(e))},getValue:function(){return this.widget.option("active")}}};t.views.tags(l),"1.11"===t.ui.version.slice(0,4)&&(l.button={baseTag:"widget",widgetName:"button",elem:"button",setSize:!0,contentCtx:!0,init:function(e,t){var i,n=this,a=e.tmpl,s=e.props,o=s.id,l=n.parent;(n._.radio=l&&"buttonset"===l.tagName)?e=l.tagCtx:n._.chkBx="checkbox"===(n._.inline?s:t.elem).type;var r=e.params,d=r.props||{};n.baseApply(arguments),n._.inline&&(a=a&&a.markup||"&nbsp;",n._.radio||n._.chkBx?(o=o||"jsv"+Math.random(),i='<input id="'+o+'" data-link="'+r.args[0]+(d.convert?" convert="+d.convert:"")+(d.convertBack?" convertBack="+d.convertBack:"")+(n._.radio?'" name="'+l.id+'" type="radio" value="'+s.value+'"/><label for="'+o+'">'+a+"</label>":'" type="checkbox"/><label for="'+o+'">'+a+"</label>")):i="<button>"+a+"</button>",n.template=i)},onAfterLink:function(e,i){var n=this,a=i.elem,s=n.bndArgs()[0];n._.radio||n._.chkBx?(n._.inline||(n._.unlinked&&!a.id&&(a.id="jsv"+Math.random(),t(a).after('<label for="'+a.id+'">&nbsp;</label>')),a.checked=n._.radio?(a.name=n.parent.id,s===a.value):s&&"false"!==s),n.baseApply(arguments),a=n.mainElem[0],n._.radio?("undefined"===a.value&&(a.value=n.widget.option("label")),a.checked=s===a.value):a.checked=s&&"false"!==s,n._.chkBx&&n.widget.refresh()):(n._.inline||(a.innerHTML=a.innerHTML||"&nbsp;"),n.baseApply(arguments))}},l.buttonset={baseTag:"widget",widgetName:"buttonset",setSize:!0,contentCtx:!0,init:function(e){var t=this;t.baseApply(arguments),t._.inline&&(t.id=e.props.id||"jsv"+Math.random(),t.template='<span id="'+t.id+'">'+e.tmpl.markup+"</span>")},onAfterLink:function(e,i){var n=this,a=(i.elem,n.bndArgs()[0]);n.baseApply(arguments),n.widget.buttons.each(function(e,i){i.checked=a===i.value,t(i).button("refresh")})}}),t.views.tags(l),t.ui.draggable&&(t.widget("jsv.draggable",t.ui.draggable,{_createHelper:function(){return"clone"===this.options.helper&&(this.options.helper=o),this._super()}}),t.views.tags("draggable",{baseTag:"widget",widgetName:"jsv-draggable",bindTo:["left","top"],linkedCtxParam:["left","top"],elem:"div",wrap:!0,setSize:!0,contentCtx:!0,options:function(){var e=this;return{drag:function(t,i){setTimeout(function(){e.update(i.offset.left,i.offset.top)},0)}}},setValue:function(e,t){var n=this.mainElem;e!==i&&n.offset({left:e}),t!==i&&n.offset({top:t})},getValue:function(e,t){var i=this.mainElem.offset();return[i.left,i.top]}})),t.ui.accordion&&(t.widget("jsv.accordion",t.ui.accordion,{_create:function(){var e=this;e.options.header=e.options.header.replace(":not(li):even",":not(li,script):even"),e._super()}}),t.views.tags("accordion",{baseTag:"widget",widgetName:"jsv-accordion",bindTo:0,wrap:!0,setSize:!0,contentCtx:!0,options:s,initOptions:["header"],onBind:a,setValue:function(e){this.widget.option("active",parseInt(e))},getValue:function(){return this.widget.option("active")}})),t.ui.sortable&&(t.widget("jsv.sortable",t.ui.sortable,{_create:function(){var e,n,a=this,s=a.options.start,o=a.options.stop;a.option({start:function(t,i){s&&s.apply(this,arguments),a.option("bindArray")!==!1&&(e=i.item.view(),"item"===e.type&&(n=e.index+1))},stop:function(s,l){var r;n&&(r=l.item.prevAll(l.item[0].tagName).length,a.cancel(),t.observable(e.parent.data).move(n-1,r),n=i),o&&o.apply(this,arguments)}}),a._super()}}),t.views.tags("sortable",{baseTag:"widget",widgetName:"jsv-sortable",wrap:!0,contentCtx:!0})),t.ui.selectable&&(t.widget("jsv.selectable",t.ui.selectable,{_create:function(){var e=this;e.options.filter+=":not(script)",e._super()}}),t.views.tags("selectable",{baseTag:"widget",widgetName:"jsv-selectable",bindTo:0,wrap:!0,setSize:!0,contentCtx:!0,options:function(){var e=this;if(e.selected)return{stop:function(t,i){e.setSelectedItems()}}},initOptions:["filter"],onBind:function(){function e(e,i){i.refresh||t.setSelection()}var t=this;t.selected=[],t.selObs=e,t.baseApply(arguments),t.mainElem.on("jsv-domchange.sel",function(){t.widget.refresh(),t.selected._domChg=2,t.setSelectedItems(),t.selected._domChg=i})},onDispose:function(){t.unobserve(this.selected,this.selObs)},setValue:function(e){var i=this;t.isArray(e)&&i.selected!==e&&(t.unobserve(i.selected,i.selObs),i.selected=e,e!==i.bndArgs[0]&&i.update(e),t.observe(e,i.selObs),i.setSelection())},getValue:function(){return this.selected},setSelection:function(){var e=this,t=e.selected.length;if(!e.selected._domChg)for(e.widget.selectees.removeClass("ui-selected");t--;)e.widget.selectees.eq(e.selected[t]).addClass("ui-selected")},setSelectedItems:function(){var e=this,i=[];e.selected&&1!==e.selected._domChg&&(e.selected._domChg&&e.selected._domChg--,e.widget.selectees.each(function(e,t){(" "+t.className+" ").indexOf(" ui-selected ")>-1&&i.push(e)}),e.setValue(e.selected),t.observable(e.selected).refresh(i))}}))}(this,this.jQuery);
//# sourceMappingURL=jsviews-jqueryui-widgets.min.js.map
