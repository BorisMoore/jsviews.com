{"version":3,"sources":["validate.js"],"names":["$","views","tags","validation","init","this","childValidates","validate","l","length","result","clearMessage","refreshValidates","refresh","addChild","child","push","removeChild","splice","updateIsValid","onChildValidate","groupIsValid","isValid","observable","setProperty","dataBoundOnly","baseTag","linkedElement","tagCtx","linkCtx","tag","radiogroup","props","baseApply","arguments","_","inline","content","template","validationGroup","parents","render","val","ret","view","onBind","target","linkedElem","undefined","targetTag","childTags","onBeforeChange","ev","call","onAfterLink","setValue","args","preventInvalidData","messageElem","parentNode","contents","first","elem","addClass","label","insertAfter","onUpdate","eventArgs","tagCtxs","value","onDispose","message","testName","condition","linkedElems","radio","find","type","checked","getValue","validator","validators","test","isFunction","replace","textContent","innerText","removeClass","required","equal","min","max","maxLength","minLength","regex","RegExp","jQuery"],"mappings":"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","file":"validate.min.js","sourcesContent":["/*! Sample JsViews tag control: {{validate}} control v0.9.83 (Beta)\nsee: http://www.jsviews.com/#download/sample-tagcontrols */\n/*\n * Copyright 2016, Boris Moore\n * Released under the MIT License.\n */\n\n(function($) {\n\"use strict\";\n\n  $.views.tags({\n  validation: {\n    init: function() {\n      this.childValidates = [];\n    },\n    validate: function() {\n      var l = this.childValidates.length,\n          result = true;\n      while (l-- && result !== false) {\n        result = this.childValidates[l].validate();\n      }\n      return result;\n    },\n    clearMessage: function() {\n      var l = this.childValidates.length;\n      while (l--) {\n        this.childValidates[l].clearMessage();\n      }\n    },\n    refreshValidates: function() {\n      var l = this.childValidates.length;\n      while (l--) {\n        this.childValidates[l].refresh();\n      }\n    },\n    addChild: function(child) {\n      this.childValidates.push(child);\n    },\n    removeChild: function(child) {\n      var l = this.childValidates.length;\n      while (l--) {\n        if (this.childValidates[l] === child) {\n          this.childValidates.splice(l, 1);\n          this.updateIsValid();\n          break;\n        }\n      }\n    },\n    onChildValidate: function() {\n      this.updateIsValid();\n    },\n    updateIsValid: function() {\n      var groupIsValid = true,\n        l = this.childValidates.length;\n      while (l--) {\n        if (!this.childValidates[l].isValid) {\n          groupIsValid = false;\n          break;\n        }\n      }\n      $.observable(this).setProperty(\"isValid\", groupIsValid);\n    },\n    isValid: true,\n    dataBoundOnly: true\n  },\n  validate: {\n    baseTag: \"radiogroup\",\n    linkedElement: \"select,textarea,input\",\n    init: function(tagCtx, linkCtx) {\n      var tag = this;\n      if (tag.radiogroup = tagCtx.props.radiogroup) {\n        tag.baseApply(arguments);\n      } else if (tag._.inline && !tagCtx.content) {\n        tag.template = \"<input/>\";\n      }\n      tag.validationGroup = this.parents.validation;\n      if (tag.validationGroup) {\n        tag.validationGroup.addChild(this);\n      }\n    },\n    render: function(val) {\n      var ret,\n        tag = this,\n        tagCtx = this.tagCtx;\n      if (tag._.inline) {\n         // Keep same data context for content\n        ret = tagCtx.render(tagCtx.view, true);\n        // For radio buttons provide wrapper for validation messages\n        ret = tag.radiogroup ? (\"<div>\" + ret + \"</div>\") : ret;\n        return ret;\n      }\n    },\n    onBind: function(tagCtx, linkCtx) {\n      var arrayView,\n        tag = this,\n        target = tag.linkedElem && tag.linkedElem[0];\n      if (tag._.inline && target && $.view(target).tag !== tag) {\n        // The target element is contained in another tag - so we will find it\n        tag.linkedElem = undefined;\n      }\n      if (!tag.linkedElem || !tag.linkedElem[0]) {\n        // {{validate}} may wrap another tag, such as {{slider}}\n        // or {{datepicker}} rather than an element such as <input/>\n        if (tag.targetTag = tag.childTags()[0]) {\n          tag.targetTag.onBeforeChange = function(ev, val) {\n            return tag.onBeforeChange.call(tag, ev, val);\n          };\n        }\n      }\n      if (tag.radiogroup) {\n        this.baseApply(arguments);\n      }\n    },\n\n    onAfterLink: function(tagCtx, linkCtx) {\n      var tag = this,\n        props = tagCtx.props;\n\n      if (tag.targetTag) {\n        tag.targetTag.setValue(tagCtx.args[0]);\n      }\n\n      if (props.preventInvalidData !== undefined) {\n        tag.preventInvalidData = props.preventInvalidData;\n      } else if (tag.parents.validation) {\n        tag.preventInvalidData = tag.parents.validation.tagCtx.props.preventInvalidData;\n      }\n\n      if (!tag.messageElem || !tag.messageElem.parentNode) {\n        if (tag.targetTag) {\n          tag.messageElem = tag.targetTag.linkedElem;\n        } else {\n          tag.messageElem = tag.radiogroup\n            ? tag._.inline ? tag.contents(\"*\").first() : $(linkCtx.elem)\n            : tag.linkedElem;\n          // messageElem is the linkedElem (or, for radio buttons, the wrapping div)\n        }\n        if (!tag.messageElem) {\n          throw \"No message element. Set radiogroup=true for radio buttons\";\n        }\n        tag.messageElem.addClass(\"val-msg\");\n      }\n      if (!tag.label || !tag.label.parentNode) {\n        tag.label = $(\"<label class=\\\"error\\\"></label><br/>\").insertAfter(tag.messageElem)[0];\n      }\n      tag.validate(tagCtx.args[0]); // Validate initial data\n    },\n    onUpdate: function(ev, eventArgs, tagCtxs) {\n      this.clearMessage();\n      return false; // don't rerender\n    },\n    onBeforeChange: function(ev, eventArgs) {\n      if (this.preventInvalidData) {\n        this.validate(eventArgs.value);\n        return this.isValid;\n        // Allow data to be updated to invalid values - unless preventInvalidData set to true\n      }\n    },\n    onDispose: function() {\n      if (this.validationGroup) {\n        this.validationGroup.removeChild(this);\n      }\n    },\n    validate: function(val) {\n      var message, linkedElem, testName, condition,\n        tag = this,\n        props = tag.tagCtx.props,\n        linkedElems = tag.linkedElem;\n\n      if (val === undefined) {\n        // If no val passed in, get current value from linkedElem, and validate that\n        if (tag._.radio && linkedElems) {\n          linkedElems = linkedElems.find(\"input:checked\");\n        }\n        linkedElem = linkedElems && linkedElems[0];\n        val = \"\";\n        if (linkedElem) {\n          val = linkedElem.type === \"checkbox\" ? linkedElem.checked : linkedElem.value;\n        } else if (tag.targetTag) {\n          val = tag.targetTag.getValue();\n        }\n        val = val || \"\";\n      }\n      tag.clearMessage();\n\n      // Test the validation conditions, one after the other.\n      this.isValid = true;\n      for (var validator in this.validators) {\n        condition = props[validator];\n        if (condition !== undefined && this.validators[validator].test(condition, val)) {\n          testName = validator;\n          this.isValid = false;\n          break;\n        }\n      }\n      if (!this.isValid) {// A test failed. Show message for first failed test.\n        message = props[\"msg_\" + testName] || this.validators[testName].message;\n        if ($.isFunction(message)) {\n          message = message(condition, val);\n        }\n        message = message.replace(/%cond%/g, condition).replace(/%val%/g, val)\n        if (tag.label.textContent !== undefined) {\n          tag.label.textContent = message;\n        } else {\n          tag.label.innerText = message; // Older IE does not support textContent\n        }\n        tag.messageElem.addClass(\"invalid\");\n      }\n      if (this.validationGroup) {\n        this.validationGroup.onChildValidate();\n      }\n      return this.isValid;\n    },\n    validators: function(validators) {\n      for (var validator in validators) {\n        this.validators[validator] = validators[validator];\n      }\n    },\n    clearMessage: function() {\n      // Clear previous message.\n      this.messageElem.removeClass(\"invalid\");\n        if (this.label.textContent !== undefined) {\n          this.label.textContent = \"\";\n        } else {\n          this.label.innerText = \"\"; // Older IE does not support textContent\n        }\n    }\n  }\n});\n\n$.views.tags.validate.validators({\n  required: {\n    message: \"Please provide a value\",\n    test: function(condition, val) {\n      return condition && val === \"\";\n    }\n  },\n  equal: {\n    message: \"Value must be %cond%\",\n    test: function(condition, val) {\n      return val !== \"\" + condition;\n    }\n  },\n  checked: {\n    message: function(condition, val) {\n      return \"Must be \" + (condition ? \"checked\" : \"unchecked\");\n    },\n    test: function(condition, val) {\n      return (val && val !== \"false\") !== condition;\n    }\n  },\n  min: {\n    message: \"Minimum: %cond%\",\n    test: function(condition, val) {\n      return val < condition;\n    }\n  },\n  max: {\n    message: \"Maximum:  %cond%\",\n    test: function(condition, val) {\n      return val > condition;\n    }\n  },\n  maxLength: {\n    message: \"Maximum length: %cond%\",\n    test: function(condition, val) {\n      return val.length > condition;\n    }\n  },\n  minLength: {\n    message: \"Minimum length: %cond%\",\n    test: function(condition, val) {\n      return val.length < condition;\n    }\n  },\n  regex: {\n    message: \"Invalid string format\",\n    test: function(condition, val) {\n      var regex = condition.test ? condition : new RegExp(condition);\n      return !regex.test(val);\n    }\n  }\n});\n\n})(this.jQuery);\n"]}