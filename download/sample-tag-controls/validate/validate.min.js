/*! Sample JsViews tag control: {{validate}} control v0.9.84 (Beta)
see: http://www.jsviews.com/#download/sample-tagcontrols */
!function(e){"use strict";e.views.tags({validation:{init:function(){this.childValidates=[]},validate:function(){for(var e=this.childValidates.length,t=!0;e--&&t!==!1;)t=this.childValidates[e].validate();return t},clearMessage:function(){for(var e=this.childValidates.length;e--;)this.childValidates[e].clearMessage()},refreshValidates:function(){for(var e=this.childValidates.length;e--;)this.childValidates[e].refresh()},addChild:function(e){this.childValidates.push(e)},removeChild:function(e){for(var t=this.childValidates.length;t--;)if(this.childValidates[t]===e){this.childValidates.splice(t,1),this.updateIsValid();break}},onChildValidate:function(){this.updateIsValid()},updateIsValid:function(){for(var t=!0,i=this.childValidates.length;i--;)if(!this.childValidates[i].isValid){t=!1;break}e.observable(this).setProperty("isValid",t)},isValid:!0,dataBoundOnly:!0},validate:{baseTag:"radiogroup",linkedElement:"select,textarea,input",boundProps:["preventInvalidData"],init:function(e,t){var i=this;(i.radiogroup=e.props.radiogroup)?i.baseApply(arguments):i._.inline&&!e.content&&(i.template="<input/>"),i.validationGroup=this.parents.validation,i.validationGroup&&i.validationGroup.addChild(this)},render:function(e){var t,i=this,a=this.tagCtx;if(i._.inline)return t=a.render(a.view,!0),t=i.radiogroup?"<div>"+t+"</div>":t},onBind:function(t,i){var a,n=this,s=n.linkedElem&&n.linkedElem[0];(a=n.childTags()[0])&&(n.targetTag=a,s&&e.view(s).tag===a&&(n.linkedElem=void 0),a.onBeforeChange=function(e,t){return n.onBeforeChange.call(n,e,t)}),n.radiogroup&&this.baseApply(arguments)},onAfterLink:function(t,i){var a=this,n=a.targetTag,s=t.props,l=a.cvtArgs()[0];n&&n.updateValue(l),void 0!==s.preventInvalidData?a.preventInvalidData=s.preventInvalidData:a.parents.validation&&(a.preventInvalidData=a.parents.validation.tagCtx.props.preventInvalidData),a.messageElem&&a.messageElem.parentNode||(a.radiogroup?(a.messageElem=a._.inline?t.contents("div"):e(i.elem),a.messageElem.addClass("radiogroup")):(!a._.inline&&(n=e.views.sub._glt(i.elem)[0])&&(a.targetTag=n),a.messageElem=n&&(n.displayElem||n.linkedElem)||a.displayElem||a.linkedElem),a.messageElem.addClass("val-msg")),a.label&&a.label.parentNode||(a.label=e('<label class="error"></label><br/>').insertAfter(a.messageElem)[0]),a.validate(l)},onUpdate:function(e,t,i){return this.clearMessage(),!1},onBeforeChange:function(e,t){if(this.preventInvalidData)return this.validate(t.value),this.isValid},onDispose:function(){this.validationGroup&&this.validationGroup.removeChild(this)},validate:function(t){var i,a,n,s,l=this,r=l.tagCtx.props,d=l.linkedElem;void 0===t&&(l._.radio&&d&&(d=d.find("input:checked")),a=d&&d[0],t="",a?t="checkbox"===a.type?a.checked:a.value:l.targetTag&&(t=l.targetTag.bndArgs()[0]),t=t||""),l.clearMessage(),this.isValid=!0;for(var o in this.validators)if(s=r[o],void 0!==s&&this.validators[o].test(s,t)){n=o,this.isValid=!1;break}return this.isValid||(i=r["msg_"+n]||this.validators[n].message,e.isFunction(i)&&(i=i(s,t)),i=i.replace(/%cond%/g,s).replace(/%val%/g,t),void 0!==l.label.textContent?l.label.textContent=i:l.label.innerText=i,l.messageElem.addClass("invalid")),this.validationGroup&&this.validationGroup.onChildValidate(),this.isValid},validators:function(e){for(var t in e)this.validators[t]=e[t]},clearMessage:function(){var e=this,t=e.label;e.messageElem&&(e.messageElem.removeClass("invalid"),void 0!==t.textContent?t.textContent="":t.innerText="")}}}),e.views.tags.validate.validators({required:{message:"Please provide a value",test:function(e,t){return e&&""===t}},equal:{message:"Value must be %cond%",test:function(e,t){return t!==""+e}},checked:{message:function(e,t){return"Must be "+(e?"checked":"unchecked")},test:function(e,t){return(t&&"false"!==t)!==e}},min:{message:"Minimum: %cond%",test:function(e,t){return t<e}},max:{message:"Maximum:  %cond%",test:function(e,t){return t>e}},maxLength:{message:"Maximum length: %cond%",test:function(e,t){return t.length>e}},minLength:{message:"Minimum length: %cond%",test:function(e,t){return t.length<e}},regex:{message:"Invalid string format",test:function(e,t){var i=e.test?e:new RegExp(e);return!i.test(t)}}})}(this.jQuery);
//# sourceMappingURL=validate.min.js.map
