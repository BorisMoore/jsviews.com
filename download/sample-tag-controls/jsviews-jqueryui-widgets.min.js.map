{"version":3,"sources":["jsviews-jqueryui-widgets.js"],"names":["global","$","undefined","getConverter","tag","cvt","tagCtx","view","getRsc","checkboxRadioOnBind","this","props","elem","mainElem","baseApply","arguments","name","value","displayElem","widget","label","checkboxRadioOnAfterLink","linkCtx","options","option","tabsAccordionOnBind","on","ev","eventArgs","newSelected","selected","active","refresh","updateValue","tabsAccordionOptions","activate","evt","ui","initDataFormatter","dataFormatter","dataFormat","parse","parseData","data","call","formatData","date","format","unlinkedClone","clone","find","addBack","removeAttr","remove","fn","views","tagDefs","argDefault","mainElement","init","content","elemType","inline","tmpl","markup","template","wrap","trim","attr","onBind","prop","i","optionKey","presets","initOptions","widgetName","widgetFullName","split","pop","length","tagName","id","isFunction","onAfterLink","each","key","charAt","slice","apply","onUpdate","dataBoundOnly","button","baseTag","setSize","contentCtx","innerHTML","ctx","event","autocomplete","linkedElement","change","item","select","focus","checkbox","setValue","val","checked","radio","radiogroup","parents","_d","sub","_gm","bndArgs","disabled","radios","childTags","l","controlgroup","datepicker","parseDate","formatDate","dateFormat","_dateFormat","_defaults","convert","cvtBk","convertBack","Date","fix","onSelect","dateText","css","trigger","getValue","droppable","menu","progressbar","boundProps","busy","parseFloat","resizable","bindTo","linkedCtxParam","resize","setTimeout","updateValues","size","width","height","setValues","index","selectmenu","slider","slide","_jsvChg","spinner","displayFormat","numberString","window","Globalize","_culture","numberFormat","spin","_format","dataCvt","dataCvtBk","parent","_parse","timespinner","ticks","timeString","setHours","getDay","getHours","getMinutes","extend","step","page","returnDate","keepDay","args","setMinutes","tabs","parseInt","anchor","base","location","href","replace","tags","version","_","chkBx","type","params","paramprops","Math","random","unlinked","after","buttonset","buttons","draggable","_createHelper","helper","_super","drag","offset","left","top","ctxPrm","topLeft","position","accordion","_create","header","sortable","innerView","moveFrom","startOption","start","stopOption","stop","bindArray","moveTo","prevAll","cancel","observable","move","selectable","filter","setSelectedItems","selObs","setSelection","_domChg","onDispose","unobserve","isArray","observe","selectees","removeClass","eq","addClass","className","indexOf","push","jQuery"],"mappings":"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","file":"jsviews-jqueryui-widgets.min.js","sourcesContent":["/*! JsViews jQueryUI widget integration v1.0.0\r\nsee: http://www.jsviews.com/#download/jqueryui-tagcontrols */\r\n/*\r\n * https://www.jsviews.com/download/sample-tag-controls/jsviews-jqueryui-widgets.js\r\n * Copyright 2018, Boris Moore\r\n * Released under the MIT License.\r\n */\r\n\r\n/* Wrap behavior (wrapping HTML content) and default element, for each widget: */\r\n\r\n/*       autocomplete button   buttonset droppable   menu        progressbar  resizable\r\n * wrap: -            wrap     -         wrap        wrap        wrap         wrap     \r\n * elem: input        button   -         -           ul          div          div      \r\n */\r\n\r\n/*       selectable   slider   spinner   timespinner  tabs       sortable     draggable\r\n * wrap: wrap         -        -         -            wrap       wrap         wrap     \r\n * elem: -            div      input     input        -          -            -      \r\n */\r\n\r\n/*       accordion    checkbox radio     controlgroup selectmenu datepicker\r\n * wrap: wrap         -        -         wrap         wrap       wrap\r\n * elem: -            div      input     span         selectv    input\r\n */\r\n\r\n(function(global, $, undefined) {\r\n\"use strict\";\r\n\r\nif (!$ || !$.fn || !$.ui || !$.views) {\r\n  // jQuery is not loaded.\r\n  throw \"jsviews-jqueryui-widgets.js requires jQuery, jQuery UI and JsViews\";\r\n}\r\n\r\nfunction getConverter(tag, cvt) {\r\n  return cvt + \"\" === cvt ? tag.tagCtx.view.getRsc(\"converters\", cvt) : cvt;\r\n}\r\n\r\nfunction checkboxRadioOnBind() {\r\n  var tag = this,\r\n    props = tag.tagCtx.props,\r\n    elem = tag.mainElem[0];\r\n    tag.baseApply(arguments);\r\n\r\n  if (props.name) {\r\n    elem.name = props.name;\r\n  }\r\n  if (props.value) {\r\n    elem.value = props.value;\r\n  }\r\n\r\n  tag.displayElem = tag.widget.label;\r\n}\r\n\r\nfunction checkboxRadioOnAfterLink(tagCtx, linkCtx) {\r\n  var tag = this,\r\n    props = tagCtx.props;\r\n\r\n  tag.baseApply(arguments);\r\n\r\n  if (props.label && props.label !== tag.widget.options.label) {\r\n    tag.widget.option(\"label\", props.label);\r\n  }\r\n}\r\n\r\nfunction tabsAccordionOnBind() {\r\n  var tag = this;\r\n  tag.mainElem.on(\"jsv-domchange\", function(ev, tagCtx, linkCtx, eventArgs) {\r\n    var newSelected,\r\n      selected = tag.widget.options.active;\r\n\r\n    tag.widget.refresh();\r\n    newSelected = tag.widget.options.active;\r\n\r\n    if (selected !== newSelected) {\r\n      tag.updateValue(newSelected);\r\n    }\r\n  });\r\n}\r\n\r\nfunction tabsAccordionOptions() {\r\n  var tag = this;\r\n  return {\r\n    activate: function(evt, ui) {\r\n      // Raise elemChangeHandler event when selected tab changes - for two-way binding to arg(0)\r\n      tag.updateValue(tag.widget.options.active);\r\n    }\r\n  };\r\n}\r\n\r\nfunction initDataFormatter(tag, tagCtx) { // Used by datepicker and spinner\r\n  // Initialize the data formatter\r\n  var dataFormatter,\r\n    dataFormat = tagCtx.props.dataFormat;\r\n  if (dataFormat === undefined) {\r\n    dataFormat = tag.dataFormat;\r\n  }\r\n  dataFormatter = dataFormat && dataFormat.parse\r\n    ? dataFormat\r\n    : tag.dataFormatter;\r\n\r\n  // Formatter can be provided as tag.dataFormat or tagCtx.props.dataFormat\r\n  tag.parseData = function(data) {\r\n    return dataFormatter.parse.call(tag, data, tag.tagCtx.props);\r\n  };\r\n  tag.formatData = function(date) {\r\n    return dataFormatter.format.call(tag, date, tag.tagCtx.props);\r\n  };\r\n  return dataFormat;\r\n}\r\n\r\nvar tagDefs = {\r\n// ============================= WIDGET =============================\r\nwidget: {\r\n  argDefault: false, // Do not default missing arg to #data\r\n  mainElement: \"*\",\r\n  init: function(tagCtx) {\r\n    var content, elemType,\r\n      tag = this;\r\n\r\n    if (tag.inline) {\r\n      content = tagCtx.tmpl.markup;\r\n      if (!tag.template && (elemType = tagCtx.props.elem || tag.elem)) {\r\n        if (content) {\r\n          if (tag.wrap) {\r\n            tag.template = \"<\"+elemType+\">\" + $.trim(content) + \"</\"+elemType+\">\";\r\n          }\r\n        } else {\r\n          tag.template = (elemType === \"input\") ? \"<input/>\" : \"<\"+elemType+\"></\"+elemType+\">\";\r\n        }\r\n      }\r\n      tag.attr = \"html\";\r\n    }\r\n  },\r\n  onBind: function(tagCtx) {\r\n    var mainElem, prop, i, optionKey,\r\n      tag = this,\r\n      presets = tag.initOptions, // initOptions: array of option names that when set declaratively\r\n                                 // as tag options will be set on creation, not on afterLink\r\n      widgetName = tag.widgetName,\r\n      options = tag.options,     // hash (or function returning hash) of option settings\r\n      widgetFullName = widgetName;\r\n\r\n    widgetName = widgetName.split(\"-\").pop();\r\n\r\n    if (i = presets && presets.length) {\r\n      presets = {};\r\n      while (i--) {\r\n        optionKey = tag.initOptions[i];\r\n        if (prop = tagCtx.props[\"_\" + optionKey]) {\r\n          presets[optionKey] = prop;\r\n        }\r\n      }\r\n    }\r\n    if (widgetFullName === widgetName) {\r\n      widgetFullName = \"ui-\" + widgetName;\r\n    }\r\n\r\n    mainElem = tag.mainElem;\r\n    if (!mainElem || !mainElem[0]) {\r\n      // This may be due to using {{myWidget}} No element found here {{/myWidget}} \r\n      throw \"No element found for tag '\" + tag.tagName +\"'\";\r\n    }\r\n\r\n    if (tagCtx.props.id && !mainElem[0].id) {\r\n      mainElem[0].id = tagCtx.props.id;\r\n    }\r\n\r\n    // Instantiate widget\r\n    mainElem[widgetName](presets);\r\n\r\n    // Store widget instance\r\n    tag.widget = mainElem.data(widgetFullName) || mainElem.data(widgetName);\r\n\r\n    if (!tag.widget) {\r\n      // Widget failed to load, or is not a valid widget factory type\r\n      throw \"widget '\" + widgetName + \"' failed\";\r\n    }\r\n\r\n    if (options) {\r\n      if ($.isFunction(options)) {\r\n        options = tag.options();\r\n      }\r\n      mainElem[widgetName](\"option\", options); // initialize options\r\n    }\r\n  },\r\n  onAfterLink: function(tagCtx) {\r\n    var mainElem,\r\n      tag = this,\r\n      options = tag.options, // hash (or function returning hash) of option settings\r\n      props = tagCtx.props,\r\n      widgetName = tag.widgetName.split(\"-\").pop();\r\n    if ($.isFunction(options)) {\r\n      options = tag.options();\r\n    }\r\n    mainElem = tag.mainElem;\r\n    $.each(props, function(key, prop) {\r\n      var option;\r\n      if (key.charAt(0) === \"_\") {\r\n        key = key.slice(1);\r\n        option = options && options[key];\r\n        if (mainElem[widgetName](\"option\", key) != prop) { // != so undefined and null are considered equivalent\r\n          mainElem[widgetName](\"option\", key,\r\n            option && $.isFunction(option) && prop && $.isFunction(prop)\r\n              ? function() {\r\n                // If the same event function option is overridden on the tagDef options\r\n                // (or in a _create override) and the tagCtx.props, call first the one on\r\n                // the tagDef options, and then the one declared on the tag properties.\r\n                option.apply(mainElem[0], arguments);\r\n                return prop.apply(mainElem[0], arguments);\r\n              }\r\n              : prop\r\n            );\r\n        }\r\n      }\r\n    });\r\n  },\r\n  onUpdate: false, // Don't rerender whole tag on update\r\n  dataBoundOnly: true,\r\n  attr: \"none\"\r\n},\r\n// ============================= BUTTON =============================\r\nbutton: {\r\n  baseTag: \"widget\",\r\n  widgetName: \"button\",\r\n  elem: \"button\",\r\n  wrap: true,\r\n  setSize: true,\r\n  contentCtx: true,\r\n  onBind: function(tagCtx, linkCtx) {\r\n    var elem = this.mainElem[0];\r\n      elem.innerHTML = elem.innerHTML || \"&nbsp;\"; // Fixes jQuery UI button issue if no label text\r\n    this.baseApply(arguments);\r\n  },\r\n  onAfterLink: function(tagCtx, linkCtx, ctx, event) {\r\n    this.baseApply(arguments);\r\n    if (event) {\r\n      this.widget.refresh();\r\n    }\r\n  }\r\n},\r\n// ============================= AUTOCOMPLETE =============================\r\nautocomplete: {\r\n  baseTag: \"widget\",\r\n  widgetName: \"autocomplete\",\r\n  linkedElement: \"*\",\r\n  elem: \"input\",\r\n  setSize: true,\r\n  options: function() {\r\n    var tag = this;\r\n    return {\r\n      change: function(evt, ui) {\r\n        if (ui.item) {\r\n          tag.updateValue(ui.item.value);\r\n          // If there is a selected item, update bound value on keydown.\r\n          // (Alternatively can set trigger=false to update on change)\r\n        }\r\n      },\r\n      select: function(evt, ui) {\r\n        if (ui.item) {\r\n          tag.updateValue(ui.item.value);\r\n        }\r\n      },\r\n      focus: function(evt, ui) {\r\n        return false;\r\n      }\r\n    };\r\n  }\r\n},\r\n// ============================= CHECKBOX =============================\r\ncheckbox: {\r\n  baseTag: \"widget\",\r\n  widgetName: \"checkboxradio\",\r\n  template: \"<label><input type='checkbox'/></label>\",\r\n  mainElement: \"input\",\r\n  setSize: true,\r\n  onBind: checkboxRadioOnBind,\r\n  onAfterLink: checkboxRadioOnAfterLink,\r\n  setValue: function(val) {\r\n    var tag = this,\r\n      elem = this.mainElem[0],\r\n      checked = val && val !== \"false\";\r\n    if (elem.checked !== checked) {\r\n      elem.checked = checked;\r\n      tag.widget.refresh();\r\n    }\r\n  }\r\n},\r\n// ============================= RADIO =============================\r\nradio: {\r\n  baseTag: \"widget\",\r\n  widgetName: \"checkboxradio\",\r\n  template: \"<label><input type='radio'/></label>\",\r\n  mainElement: \"input\",\r\n  setSize: true,\r\n  onBind: function() {\r\n    var radiogroup = this.parents.radiogroup;\r\n    checkboxRadioOnBind.apply(this, arguments);\r\n    if (radiogroup && !radiogroup._d) {\r\n      radiogroup.onAfterLink = $.views.sub._gm(radiogroup.onAfterLink, function() { // Get derived method\r\n        var widget,\r\n          val = radiogroup.bndArgs()[0],\r\n          disabled = !!radiogroup.tagCtx.props.disabled,\r\n          radios = radiogroup.childTags(\"radio\"),\r\n          l = radios.length;\r\n        while (l--) {\r\n          radios[l].setValue(val);\r\n          widget = radios[l].widget;\r\n          if (disabled !== widget.options.disabled) {\r\n            widget.option(\"disabled\", disabled);\r\n          }\r\n        }\r\n        this.baseApply(arguments); // Call base onAfterLink()\r\n      });\r\n      radiogroup._d = true;\r\n    }\r\n  },\r\n  onAfterLink: checkboxRadioOnAfterLink,\r\n\r\n  setValue: function(val) {\r\n    var elem = this.mainElem[0],\r\n    checked = val === elem.value;\r\n    if (elem.checked !== checked) {\r\n      elem.checked = checked;\r\n    }\r\n    this.widget.refresh();\r\n  }\r\n},\r\n// ============================= CONTROLGROUP =============================\r\ncontrolgroup: {\r\n  baseTag: \"widget\",\r\n  widgetName: \"controlgroup\",\r\n  elem: \"span\",\r\n  wrap: true,\r\n  contentCtx: true,\r\n  onBind: function() {\r\n    var tag = this;\r\n    tag.baseApply(arguments);\r\n    tag.mainElem.on(\"jsv-domchange\", function() {\r\n      tag.widget.refresh();\r\n    });\r\n  }\r\n},\r\n// ============================= DATEPICKER =============================\r\ndatepicker: {\r\n  baseTag: \"widget\",\r\n  widgetName: \"datepicker\",\r\n  linkedElement: \"*\",\r\n  elem: \"input\",\r\n  setSize: true,\r\n  dataFormat: true,\r\n  dataFormatter: { // Data formatter from data to Date\r\n    // Default data formatter uses built-in datepicker formatter.\r\n    // Override as tag.dataFormat in tagDef or as tagCtxprops.dataFormat\r\n    parse: function(data, props) {\r\n      return $.datepicker.parseDate(this.dataFormat, data);\r\n    },\r\n    format: function(date, props) {\r\n      return $.datepicker.formatDate(this.dataFormat, date);\r\n    }\r\n  },\r\n  init: function(tagCtx) {\r\n    var tag = this,\r\n      dateFormat = tag.dateFormat = tagCtx.props.dateFormat\r\n        || tagCtx.props._dateFormat // Can set as _dateFormat=... or as dateFormat=...\r\n        || tag.dateFormat // or set as property in tagDef\r\n        || $.datepicker._defaults.dateFormat, // or use internal date-picker default\r\n      cvt = getConverter(tag, tag.convert),\r\n      cvtBk = getConverter(tag, tag.convertBack),\r\n      dataFormat = initDataFormatter(tag, tagCtx);\r\n      tag.dataFormat = dataFormat === true ? tag.dateFormat : dataFormat;\r\n\r\n    tag.convert = function(val) {\r\n      // Wrapped converter calls converter then does widget format\r\n      val = cvt ? cvt.call(tag, val) : val;\r\n      if (tag.dataFormat && (\"\" + val === val)) {\r\n        val = tag.parseData(val);\r\n      }\r\n      return $.datepicker.formatDate(dateFormat, dataFormat === 0 ? new Date(val) : val);\r\n    };\r\n    tag.convertBack = function(val) {\r\n      // Wrapped converter, does widget parse then calls converter\r\n      val = $.datepicker.parseDate(dateFormat, val);\r\n      val = dataFormat ? tag.formatData(val) : dataFormat === 0 ? +val : val;\r\n      return cvtBk ? cvtBk.call(tag, val) : val;\r\n    };\r\n    // Prevent onAfterLink replacing wrapped converters with unwrapped ones\r\n    tag.convert.fix = tag.convertBack.fix = true;\r\n    tag.baseApply(arguments);\r\n  },\r\n  options: function() {\r\n    var tag = this;\r\n    return {\r\n      onSelect: function(dateText) {\r\n        tag.value = dateText;\r\n        tag.updateValue(dateText);\r\n      }\r\n    };\r\n  },\r\n  onBind: function(tagCtx) {\r\n    var tag = this;\r\n    tag.baseApply(arguments);\r\n    tag.mainElem.datepicker(\"option\", \"dateFormat\", tag.dateFormat);\r\n    if (tag.mainElem[0].tagName !== \"INPUT\") {\r\n      // This datepicker is not using an input (e.g. using a div) - so set to inline-\r\n      tag.mainElem.css(\"display\", \"inline-block\");\r\n    } else {\r\n      tag.tagCtx.props.trigger = false;\r\n    }\r\n  },\r\n  setValue: function(value) {\r\n    var tag = this;\r\n    if (value !== undefined && value !== tag.value) {\r\n      tag.value = value;\r\n      tag.mainElem.datepicker(\"setDate\", value);\r\n    }\r\n  },\r\n  getValue: function() {\r\n    return this.value;\r\n  }\r\n},\r\n//dialog: { // Currently not supported. (Support would require overriding _createWrapper code.)\r\n//  baseTag: \"widget\",\r\n//  widgetName: \"dialog\",\r\n//  wrap: true,\r\n//  elem: \"div\"\r\n//},\r\n// ============================= DROPPABLE =============================\r\ndroppable: {\r\n  baseTag: \"widget\",\r\n  widgetName: \"droppable\",\r\n  elem: \"div\",\r\n  wrap: true,\r\n  setSize: true,\r\n  contentCtx: true,\r\n  setValue: function(value) {\r\n    if ($.isFunction(value)) {\r\n      this.widget.option(\"drop\", value); // Set the handler function for the drop action\r\n    }\r\n  }\r\n},\r\n// ============================= MENU =============================\r\nmenu: {\r\n  baseTag: \"widget\",\r\n  widgetName: \"menu\",\r\n  elem: \"ul\",\r\n  wrap: true,\r\n  setSize: true,\r\n  contentCtx: true,\r\n  initOptions: [\"menus\", \"items\", \"role\"], // Options which need to be set on creation, not later\r\n  setValue: function(value) {\r\n    if ($.isFunction(value)) {\r\n      this.widget.option(\"select\", value); // Set the menu select handler\r\n    }\r\n  }\r\n},\r\n// ============================= PROGRESSBAR =============================\r\nprogressbar: {\r\n  baseTag: \"widget\",\r\n  widgetName: \"progressbar\",\r\n  boundProps: [\"busy\"],\r\n  elem: \"div\",\r\n  wrap: true,\r\n  setSize: true,\r\n  contentCtx: true,\r\n  setValue: function(value) {\r\n    if (!this.tagCtx.props.busy) {\r\n      this.widget.value(parseFloat(value) || 0);\r\n    }\r\n  },\r\n  getValue: function() {\r\n    return this.widget.value();\r\n  },\r\n  onAfterLink: function(tagCtx) {\r\n    var tag = this;\r\n    tag.baseApply(arguments);\r\n    if (tagCtx.props.busy) {\r\n      tag.widget.value(false);\r\n    }\r\n  }\r\n},\r\n// ============================= RESIZABLE =============================\r\nresizable: {\r\n  baseTag: \"widget\",\r\n  widgetName: \"resizable\",\r\n  bindTo: [\"width\", \"height\"],\r\n  linkedCtxParam: [\"width\", \"height\"],\r\n  elem: \"div\",\r\n  wrap: true,\r\n  contentCtx: true,\r\n  options: function() {\r\n    var tag = this;\r\n    return {\r\n      resize: function(evt, ui) {\r\n        setTimeout(function() {\r\n          tag.updateValues(ui.size.width, ui.size.height);\r\n          tag.setValues(ui.size.width, ui.size.height);\r\n        },0);\r\n      }\r\n    };\r\n  },\r\n  setValue: function(value, index) {\r\n    if (value !== undefined) {\r\n      this.mainElem[index ? \"height\" : \"width\"](value || 0);\r\n    }\r\n  },\r\n  getValue: function() {\r\n    return [this.mainElem.width(), this.mainElem.height()];\r\n  }\r\n},\r\n// ============================= SELECTMENU =============================\r\nselectmenu: {\r\n  baseTag: \"widget\",\r\n  widgetName: \"selectmenu\",\r\n  elem: \"select\",\r\n  wrap: true,\r\n  setSize: true,\r\n  contentCtx: true,\r\n  options: function() {\r\n    var tag = this;\r\n    return {\r\n      change: function(evt, ui) {\r\n        tag.updateValue(ui.item.value);\r\n      }\r\n    };\r\n  },\r\n  onBind: function() {\r\n    var tag = this;\r\n    tag.baseApply(arguments);\r\n    tag.displayElem = tag.widget.button;\r\n    tag.mainElem.on(\"jsv-domchange\", function() {\r\n      tag.widget.refresh();\r\n    });\r\n  },\r\n  setValue: function(value) {\r\n    if (value !== undefined) {\r\n      this.mainElem[0].value = value;\r\n      this.widget.refresh();\r\n    }\r\n  },\r\n  getValue: function() { \r\n    return this.mainElem[0].value;\r\n  }\r\n},\r\n// ============================= SLIDER =============================\r\nslider: {\r\n  baseTag: \"widget\",\r\n  widgetName: \"slider\",\r\n  elem: \"div\",\r\n  setSize: true,\r\n  options: function() {\r\n    var tag = this;\r\n    return {\r\n      slide: function(evt, ui) {\r\n        setTimeout(function() {\r\n          tag.updateValue(ui.value);\r\n        }, 0);\r\n      }\r\n    };\r\n  },\r\n  onAfterLink: function(tagCtx) {\r\n    var tag = this;\r\n    if (!tag.linkCtx.elem._jsvChg) {\r\n      // If change not triggered by a the slider itself changing value\r\n      tag.baseApply(arguments);\r\n    }\r\n  },\r\n  setValue: function(value) {\r\n    if (value !== undefined) {\r\n      this.widget.value(value || 0);\r\n    }\r\n  },\r\n  getValue: function() {\r\n    return this.widget.value();\r\n  }\r\n},\r\n// ============================= SPINNER =============================\r\nspinner: {\r\n  baseTag: \"widget\",\r\n  widgetName: \"spinner\",\r\n  mainElement: \"input\",\r\n  linkedElement: \"input\",\r\n  elem: \"input\",\r\n  setSize: true,\r\n  // Default display formatter uses Globalize 0.1.1.\r\n  // Override as tag.displayFormat in tagDef or as tagCtx.props.displayFormat\r\n  displayFormat: { // Default display format: numberString, to number\r\n    parse: function(numberString, props) {\r\n      return window.Globalize\r\n        ? Globalize.parseFloat(numberString, 10, props._culture)\r\n        : numberString;\r\n    },\r\n    format: function(data, props) {\r\n      return window.Globalize\r\n        ? Globalize.format(data, this.widget.options.numberFormat, props._culture)\r\n        : data;\r\n    }\r\n  },\r\n  options: function() {\r\n    var tag = this;\r\n    return {\r\n      spin: function(evt, ui) {\r\n        tag.updateValue(tag.widget._format(ui.value));\r\n      }\r\n    };\r\n  },\r\n  init: function(tagCtx) {\r\n    var dataFormat,\r\n      tag = this,\r\n      displayFormat = tagCtx.props.displayFormat;\r\n    tag.parse = function(numberString) {\r\n      return displayFormat.parse.call(tag, numberString, tag.tagCtx.props);\r\n    };\r\n    tag.format = function(data, props) {\r\n      return displayFormat.format.call(tag, data, tag.tagCtx.props);\r\n    };\r\n    if (displayFormat === undefined) {\r\n      displayFormat = tag.displayFormat;\r\n    }\r\n    tag.dataFormat = dataFormat = initDataFormatter(tag, tagCtx);\r\n    tag.baseApply(arguments);\r\n  },\r\n  onBind: function(tagCtx) {\r\n    var tag = this,\r\n      cvt = getConverter(tag, tag.convert),\r\n      cvtBk = getConverter(tag, tag.convertBack);\r\n    tag.dataCvt = cvt;\r\n    tag.dataCvtBk = cvtBk;\r\n    tag.baseApply(arguments);\r\n\r\n    if (!tag.linkCtx.elem._jsvChg) {\r\n      // If change not triggered by the spinner itself changing value\r\n      tag.displayElem = tag.mainElem.parent(); // jQuery UI wraps the input in a span\r\n      if (tagCtx.props.width) {\r\n        // In addition to generic setting of width on the\r\n        // displayElem, need also to set width on the input.\r\n        tag.mainElem.width(tagCtx.props.width - tag.displayElem.find(\".ui-spinner-up\").width()-9);\r\n      }\r\n    }\r\n\r\n    tag.convert = function(val) {\r\n      // Wrapped converter calls converter then does widget format\r\n      val = cvt ? cvt.call(tag, val) : val\r\n      val = tag.dataFormat ? +tag.parseData(val) : val;\r\n      return tag.widget._format(val);\r\n    };\r\n    tag.convertBack = function(val) {\r\n      // Wrapped converter, does widget parse then calls converter\r\n      val = tag.widget._parse(val);\r\n      val = tag.dataFormat ? tag.formatData(val) : val;\r\n      return cvtBk ? cvtBk.call(tag, val) : val;\r\n    };\r\n    // Prevent onAfterLink replacing wrapped converters with unwrapped ones\r\n    tag.convert.fix = tag.convertBack.fix = true;\r\n\r\n    tag.widget._parse = function(value) {\r\n      return value + \"\" === value && value\r\n        ? +tag.parse(value, tagCtx.props)\r\n        : value;\r\n    };\r\n    tag.widget._format = function(data) {\r\n      return data !== \"\"\r\n        ? tag.format(data, tagCtx.props)\r\n        : data;\r\n    };\r\n  }\r\n},\r\n// ============================= TIMESPINNER =============================\r\ntimespinner: {\r\n  baseTag: \"spinner\",\r\n  dataFormat: { // Default data format: ticks/timestamp, to Date\r\n    parse: function(date, props) {\r\n      return +date;\r\n    },\r\n    format: function(ticks, props) {\r\n      return new Date(ticks);\r\n    }\r\n  },\r\n  displayFormat: { // Default timestring display, to Date\r\n    parse: function(timeString, props) {\r\n      var date;\r\n      if (timeString) {\r\n        return window.Globalize\r\n          ? Globalize.parseDate(timeString, \"t\", props._culture)\r\n          : ((date = new Date()).setHours(timeString.slice(0, 2), timeString.slice(3)), date);\r\n      }\r\n    },\r\n    format: function(date, props) {\r\n      if (date.getDay) {\r\n        return window.Globalize\r\n          ? Globalize.format(date, \"t\", props._culture)\r\n          : (100 + date.getHours() + \"\").slice(1) + \":\" + (100 + date.getMinutes() + \"\").slice(1);\r\n      }\r\n    }\r\n  },\r\n  options: function() {\r\n    return $.extend(\r\n      this.baseApply(), // Get options object from base class and extend it\r\n      {step: 60000, page: 60}\r\n    );\r\n  },\r\n  init: function(tagCtx) {\r\n    this.baseApply(arguments);\r\n    this.tagCtx.props.width = this.tagCtx.props.width || 80;\r\n  },\r\n  onBind: function(tagCtx) {\r\n    var tag = this;\r\n    tag.baseApply(arguments);\r\n\r\n    tag.widget._parse = function(value) {\r\n      var returnDate;\r\n      if (\"\" + value === value && value && (value = tag.parse(value, tagCtx.props))) {\r\n        // Make return dateNumber (ticks) change the hours and minutes but keep current date (day/month)\r\n        if (tag.keepDay) {\r\n          returnDate = tag.tagCtx.args[0];\r\n          if (tag.dataCvt) {\r\n            returnDate = tag.dataCvt(returnDate);\r\n          }\r\n          if (tag.dataFormat) {\r\n            returnDate = tag.parseData(returnDate);\r\n          }\r\n        } else {\r\n          returnDate = tag.value;\r\n        }\r\n        returnDate = new Date(returnDate);\r\n        returnDate.setHours(value.getHours());\r\n        returnDate.setMinutes(value.getMinutes());\r\n        value = returnDate;\r\n      }\r\n      return +value;\r\n    };\r\n    tag.widget._format = function(value) {\r\n      if (+value === value) {\r\n        tag.value = value;\r\n        return tag.format(new Date(value), tagCtx.props);\r\n      }\r\n    };\r\n  },\r\n  onAfterLink: function(tagCtx) {\r\n    var keepDay = tagCtx.props.keepDay;\r\n    if (keepDay !== undefined) {\r\n      this.keepDay = keepDay;\r\n    }\r\n    this.baseApply(arguments);\r\n  },\r\n  trigger: false\r\n},\r\n// ============================= TABS =============================\r\ntabs: {\r\n  baseTag: \"widget\",\r\n  widgetName: \"tabs\",\r\n  elem: \"div\",\r\n  wrap: true,\r\n  setSize: true,\r\n  contentCtx: true,\r\n  options: tabsAccordionOptions,\r\n  setValue: function(value) {\r\n    if (value !== undefined) {\r\n      this.widget.option(\"active\", parseInt(value));\r\n    }\r\n  },\r\n  onBind: function(value) {\r\n    this.baseApply(arguments);\r\n    var anchor,\r\n      base = window.location.href.replace(/#.*$/, '');\r\n    $('ul>li>a[href^=\"#\"]', this.mainElem).each(function () {\r\n      anchor = $(this);\r\n      anchor.attr('href', base + anchor.attr('href'));\r\n    });\r\n    tabsAccordionOnBind.call(this);\r\n  },\r\n  getValue: function() { // Helper: get the index of the currently selected tab\r\n    return this.widget.options.active;\r\n  }\r\n}\r\n\r\n};\r\n\r\n$.views.tags(tagDefs);\r\n\r\n// ============================= BUTTON AND BUTTONSET =============================\r\nif ($.ui.version.slice(0, 4) === \"1.11\") {\r\n  // Add backward compatibility for {{buttonset}} and {{button}}\r\n  tagDefs.button = {\r\n    baseTag: \"widget\",\r\n    widgetName: \"button\",\r\n    elem: \"button\",\r\n    setSize: true,\r\n    contentCtx: true,\r\n    init: function(tagCtx, linkCtx) {\r\n      var template,\r\n        tag = this,\r\n        content = tagCtx.tmpl,\r\n        props = tagCtx.props,\r\n        id = props.id,\r\n        parent = tag.parent;\r\n\r\n      if (tag._.radio = parent && parent.tagName === \"buttonset\") {\r\n        tagCtx = parent.tagCtx;\r\n      } else {\r\n        tag._.chkBx = (tag.inline ? props : linkCtx.elem).type === \"checkbox\";\r\n      }\r\n\r\n      var  params = tagCtx.params,\r\n        paramprops = params.props || {};\r\n\r\n      tag.baseApply(arguments);\r\n\r\n      if (tag.inline) {\r\n        content = content && content.markup || \"&nbsp;\";\r\n        // (&nbsp; fixes a jQueryUI button rendering issue)\r\n        if (tag._.radio || tag._.chkBx) {\r\n          id = id || \"jsv\" + Math.random();\r\n          template = '<input id=\"' + id + '\" data-link=\"' + params.args[0] \r\n            + (paramprops.convert ? \" convert=\" + paramprops.convert : \"\")\r\n            + (paramprops.convertBack ? \" convertBack=\" + paramprops.convertBack : \"\")\r\n            + (tag._.radio\r\n              ? '\" name=\"' + parent.id + '\" type=\"radio\" value=\"' + props.value + \r\n                '\"/><label for=\"' + id + '\">' + content + '</label>'\r\n              : '\" type=\"checkbox\"/><label for=\"' + id + '\">' + content + '</label>');\r\n        } else {\r\n          template = \"<button>\" + content + \"</button>\";\r\n        }\r\n        tag.template = template;\r\n      }\r\n    },\r\n    onAfterLink: function(tagCtx, linkCtx) {\r\n      var tag = this,\r\n        elem = linkCtx.elem,\r\n        val = tag.bndArgs()[0];\r\n\r\n      if (tag._.radio || tag._.chkBx) {\r\n        if (!tag.inline) {\r\n          if (tag._.unlinked && !elem.id) {\r\n            elem.id = \"jsv\" + Math.random();\r\n            $(elem).after('<label for=\"' + elem.id + '\">&nbsp;</label>');\r\n          }\r\n          elem.checked = tag._.radio\r\n            ? (elem.name = tag.parent.id, val === elem.value)\r\n            : val && val !== \"false\";\r\n        }\r\n\r\n        tag.baseApply(arguments);\r\n\r\n        elem = tag.mainElem[0];\r\n\r\n        if (tag._.radio) {\r\n          // Use {^{button value=\"xxx\"}}Label{{/button}}\r\n          if (elem.value === \"undefined\") {\r\n            // Default, for {^{button}}xxx{{/button}} or {^{button _label=\"xxx\"/}}\r\n            elem.value = tag.widget.options.label; \r\n          }\r\n          elem.checked = val === elem.value;\r\n        } else {\r\n          elem.checked = val && val !== \"false\";\r\n        }\r\n\r\n        if (tag._.chkBx) {\r\n          tag.widget.refresh();\r\n        }\r\n      } else {\r\n        if (!tag.inline) {\r\n          elem.innerHTML = elem.innerHTML || \"&nbsp;\"; // Fixes jQuery UI button issue if no label text\r\n        }\r\n        tag.baseApply(arguments);\r\n      }\r\n    }\r\n  };\r\n\r\n  tagDefs.buttonset = {\r\n    baseTag: \"widget\",\r\n    widgetName: \"buttonset\",\r\n    setSize: true,\r\n    contentCtx: true,\r\n    init: function(tagCtx) {\r\n      var id,\r\n        tag = this;\r\n\r\n      tag.baseApply(arguments);\r\n\r\n      if (tag.inline) {\r\n        tag.id = tagCtx.props.id || \"jsv\" + Math.random();\r\n        tag.template = '<span id=\"' + tag.id + '\">' + tagCtx.tmpl.markup + \"</span>\";\r\n      }\r\n    },\r\n    onAfterLink: function(tagCtx, linkCtx) {\r\n      var tag = this,\r\n        elem = linkCtx.elem,\r\n        val = tag.bndArgs()[0];\r\n      tag.baseApply(arguments);\r\n      tag.widget.buttons.each(function(i, elem) {\r\n        elem.checked = val === elem.value;\r\n        $(elem).button(\"refresh\");\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\n// Compile tags\r\n$.views.tags(tagDefs);\r\n\r\nfunction unlinkedClone() {\r\n  // Ensure that cloned element (and its contents) created by jQuery UI to show dragging\r\n  // element does not have any data-jsv tokens (since deleting the element would then\r\n  // remove those views associated with the original element)\r\n  var clone = $(this).clone();\r\n  clone.find(\"*\").addBack().removeAttr( \"id data-link data-jsv data-jsv-df\" );\r\n  clone.find(\"script\").remove();\r\n  return clone;\r\n}\r\n\r\n// ============================= DRAGGABLE =============================\r\nif ($.ui.draggable) {\r\n  // Create derived draggable widget\r\n  $.widget(\"jsv.draggable\", $.ui.draggable, {\r\n    _createHelper: function() {\r\n      if (this.options.helper === \"clone\") {\r\n        this.options.helper = unlinkedClone;\r\n      }\r\n      return this._super();\r\n    }\r\n  });\r\n\r\n  $.views.tags(\"draggable\", {\r\n    baseTag: \"widget\",\r\n    widgetName: \"jsv-draggable\",\r\n    bindTo: [\"left\", \"top\"],\r\n    linkedCtxParam: [\"left\", \"top\"],\r\n    elem: \"div\",\r\n    wrap: true,\r\n    setSize: true,\r\n    contentCtx: true,\r\n    options: function() {\r\n      var tag = this;\r\n      return {\r\n        drag: function(evt, ui) {\r\n          setTimeout(function() {\r\n            tag.updateValues(ui.offset.left, ui.offset.top);\r\n            if (tag.convert) {\r\n              tag.setValues(ui.offset.left, ui.offset.top);\r\n            }\r\n          },0);\r\n        }\r\n      };\r\n    },\r\n    setValue: function(value, index) {\r\n      if (value === undefined) {\r\n        this.ctxPrm(this.linkedCtxParam[index], this.getValue()[index]);\r\n      } else {\r\n        // Set new position (offset left/top) to ui.offset.left/top (and include effect of margin, if set)\r\n        var offset = {},\r\n          topLeft = index ? \"top\" : \"left\";\r\n        offset[topLeft] = value + parseInt(this.mainElem.css(\"margin-\" + topLeft));\r\n        this.mainElem.offset(offset);\r\n      }\r\n    },\r\n    getValue: function() {\r\n      var position = this.mainElem.position();\r\n      return [position.left, position.top];\r\n    }\r\n  });\r\n}\r\n\r\n// ============================= ACCORDION =============================\r\nif ($.ui.accordion) {\r\n  // Create derived accordion widget\r\n  $.widget(\"jsv.accordion\", $.ui.accordion, {\r\n    _create: function() {\r\n      var widget = this;\r\n      widget.options.header = widget.options.header.replace(\":not(li):even\", \":not(li,script):even\");\r\n      widget._super();\r\n    }\r\n  });\r\n\r\n  $.views.tags(\"accordion\", {\r\n    baseTag: \"widget\",\r\n    widgetName: \"jsv-accordion\",\r\n    wrap: true,\r\n    setSize: true,\r\n    contentCtx: true,\r\n    options: tabsAccordionOptions,\r\n    initOptions: [\"header\"], // Options which need to be set on creation, not later\r\n    onBind: function(value) {\r\n      this.baseApply(arguments);\r\n      tabsAccordionOnBind.call(this);\r\n    },\r\n    setValue: function(value) {\r\n      if (value !== undefined) {\r\n        // Select the tab whose index is the currently selected one\r\n        this.widget.option(\"active\", parseInt(value));\r\n      }\r\n    },\r\n    getValue: function() { // Helper: get the index of the currently selected panel\r\n      return this.widget.options.active;\r\n    }\r\n  });\r\n}\r\n\r\n// ============================= SORTABLE =============================\r\nif ($.ui.sortable) {\r\n  $.widget(\"jsv.sortable\", $.ui.sortable, {\r\n    _create: function() {\r\n      var innerView, moveFrom,\r\n        widget = this,\r\n        startOption = widget.options.start,\r\n        stopOption = widget.options.stop;\r\n\r\n      widget.option({\r\n        start: function(event, ui) {\r\n          startOption && startOption.apply(this, arguments);\r\n\r\n          if (widget.options.bindArray !== false) {\r\n            innerView = ui.item.view(); // The view of the item that is being dragged\r\n            if (innerView.type === \"item\") {\r\n              // The sortable items are within a {{for}} loop, so this is a data-linked sortable list\r\n              moveFrom = innerView.index + 1; // 1-based starting index of dragged item\r\n            }\r\n          }\r\n        },\r\n        stop: function(event, ui) {\r\n          var moveTo;\r\n\r\n          if (moveFrom) {\r\n            // This is a data-linked sortable list\r\n            moveTo = ui.item.prevAll(ui.item[0].tagName).length; // The new index after\r\n            // being dragged (count of previous siblings of same tagName)\r\n            widget.cancel(); // Now cancel the DOM changes, since we are data-driven,\r\n            // and should use JsViews data-linking to move the sorted items\r\n            $.observable(innerView.parent.data).move(moveFrom-1, moveTo); // Make the equivalent\r\n            // observable change to the underlying data\r\n            moveFrom = undefined;\r\n            // Remove the starting index, ready for new sorting actions on this sortable list\r\n          }\r\n          stopOption && stopOption.apply(this, arguments);\r\n        }\r\n      });\r\n      widget._super();\r\n    }\r\n  });\r\n\r\n  $.views.tags(\"sortable\", {\r\n    baseTag: \"widget\",\r\n    widgetName: \"jsv-sortable\",\r\n    wrap: true,\r\n    contentCtx: true,\r\n  });\r\n}\r\n\r\n// ============================= SELECTABLE =============================\r\nif ($.ui.selectable) {\r\n  $.widget(\"jsv.selectable\", $.ui.selectable, {\r\n    _create: function() {\r\n      var widget = this;\r\n\r\n      widget.options.filter += \":not(script)\";\r\n      widget._super();\r\n    }\r\n  });\r\n\r\n  $.views.tags(\"selectable\", {\r\n    baseTag: \"widget\",\r\n    widgetName: \"jsv-selectable\",\r\n    wrap: true,\r\n    setSize: true,\r\n    contentCtx: true,\r\n    options: function() {\r\n      var tag = this;\r\n      return {\r\n        stop: function(evt, ui) {\r\n          tag.setSelectedItems();\r\n        }\r\n      };\r\n    },\r\n    initOptions: [\"filter\"], // Options which need to be set on creation, not later\r\n    onBind: function() {\r\n      var tag = this;\r\n      tag.selected = []; // Value of first arg (after applying converter, if there is one)\r\n\r\n      function selObs(ev, eventArgs) {\r\n        if (!eventArgs.refresh) {\r\n          tag.setSelection();\r\n        }\r\n      }\r\n\r\n      tag.selObs = selObs; // Store function instance, for disposing of just this binding, in onDispose\r\n      tag.baseApply(arguments);\r\n      tag.mainElem.on(\"jsv-domchange.sel\", function() {\r\n        tag.widget.refresh();\r\n        tag.selected._domChg = 2;\r\n        tag.setSelectedItems();\r\n        tag.selected._domChg = undefined;\r\n      });\r\n    },\r\n    onDispose: function() {\r\n      $.unobserve(this.selected, this.selObs);  // Remove just this binding to selected array\r\n    },\r\n    setValue: function(selected) { // Set the new observed array of selected indices\r\n      var tag = this;\r\n      if (selected !== undefined && $.isArray(selected) && tag.selected !== selected) {\r\n        $.unobserve(tag.selected, tag.selObs);\r\n        tag.selected = selected;\r\n        $.observe(selected, tag.selObs);\r\n        tag.setSelection();\r\n      }\r\n    },\r\n    getValue: function() {\r\n      return this.selected;\r\n    },\r\n    setSelection: function() {\r\n      // Set the class on the new selected elements (based on tag.selected array of indices)\r\n      var tag = this,\r\n        l = tag.selected.length;\r\n      if (!tag.selected._domChg) {\r\n        // No need to update if during a domchange event - only if a selectable change event\r\n        // Remove selected class from all selectable elements\r\n        tag.widget.selectees.removeClass(\"ui-selected\");\r\n        while (l--) {\r\n          // Set selected class on elements at indices in tag.selected array\r\n          tag.widget.selectees.eq(tag.selected[l]).addClass(\"ui-selected\");\r\n        }\r\n      }\r\n    },\r\n    setSelectedItems: function() {\r\n      // Set observable selectedItems array based on selected elements managed by widget\r\n      var tag = this,\r\n        selected = [];\r\n      if (tag.selected && tag.selected._domChg !== 1) {\r\n        if (tag.selected._domChg) {\r\n          // Avoid race conditions when multiple selectables bind to same selected array\r\n          tag.selected._domChg--;\r\n        }\r\n        tag.widget.selectees.each(function(index, elem) {\r\n          if ((' ' + elem.className + ' ').indexOf(' ui-selected ') > -1) {\r\n            selected.push(index); // This is the index of a selected element\r\n          }\r\n        });\r\n        tag.setValue(tag.selected); // Update the tag to bind to the new selected array\r\n        $.observable(tag.selected).refresh(selected); // Refresh to the new selected indices\r\n      }\r\n    }\r\n  });\r\n}\r\n})(this, this.jQuery);\r\n"]}