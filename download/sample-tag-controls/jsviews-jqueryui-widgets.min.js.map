{"version":3,"sources":["jsviews-jqueryui-widgets.js"],"names":["global","$","undefined","keepParentDataCtx","val","tagCtx","this","render","view","unlinkedClone","clone","find","addBack","removeAttr","remove","views","tags","widget","linkedElement","init","content","elemType","props","tag","_","inline","tmpl","markup","elem","wrap","template","trim","attr","onBind","linkedElem","prop","i","optionKey","presets","initOptions","widgetName","widgetFullName","split","pop","length","data","onAfterLink","options","isFunction","each","key","option","charAt","slice","apply","arguments","onUpdate","dataBoundOnly","button","baseTag","setSize","linkCtx","innerHTML","baseApply","ctx","event","refresh","autocomplete","change","evt","ui","item","update","value","select","focus","setValue","getValue","checkboxradio","cvtArgs","checked","type","controlgroup","datepicker","onSelect","dateText","inst","tagName","css","trigger","droppable","menu","progressbar","args","busy","resizable","selectable","selectmenu","unlinked","on","slider","slide","setTimeout","spinner","spin","tabs","version","id","parent","radio","chkBx","params","paramprops","Math","random","convert","convertBack","after","name","buttonset","buttons","sortable","_create","innerView","moveFrom","startOption","start","stopOption","stop","index","moveTo","prevAll","cancel","observable","move","_super","draggable","_createHelper","helper","accordion","header","replace","element","jQuery"],"mappings":"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","file":"jsviews-jqueryui-widgets.min.js","sourcesContent":["/*! JsViews jQueryUI widget integration v0.9.81 (Beta)\nsee: http://www.jsviews.com/#download/tag-controls */\n/*\n * Copyright 2016, Boris Moore\n * Released under the MIT License.\n */\n\n/* Wrap behavior (wrapping HTML content) and default element, for each widget: */\n\n/*         autocomplete button   buttonset  droppable  menu      progressbar  resizable\n * wrap:   -            -        -          wrap       wrap      wrap         wrap     \n * elem:   input        button   -          -          ul        div          div      \n */\n\n/*         selectable   slider   spinner    tabs       sortable  draggable    accordion\n * wrap:   wrap         -        -          wrap       wrap      wrap         wrap\n * elem:   -            div      input      div        -         -            -\n */\n\n(function (global, $, undefined) {\n\"use strict\";\n\nfunction keepParentDataCtx(val) {\n  var tagCtx = this.tagCtx;\n  return tagCtx.render(tagCtx.view, true); // no arg, so renders against parentView.data\n}\n\n$.views.tags({\nwidget: {\n  linkedElement: \"*\",\n  init: function(tagCtx) {\n    var content, elemType, props,\n      tag = this;\n\n    if (tag._.inline) {\n      props = tagCtx.props;\n      content = tagCtx.tmpl.markup;\n      if (elemType = props.elem || tag.elem) {\n        if (content) {\n          if (tag.wrap) {\n            tag.template = \"<\" + elemType + \">\" + $.trim(content) + \"</\" + elemType + \">\";\n          }\n        } else {\n          tag.template = (elemType === \"input\") ? \"<input/>\" : \"<\"+ elemType +\"></\"+ elemType +\">\";\n        }\n      }\n      tag.attr = \"html\";\n    }\n  },\n  onBind: function(tagCtx) {\n    var linkedElem, prop, i, optionKey,\n      tag = this,\n      presets = tag.initOptions,\n      widgetName = tag.widgetName,\n      widgetFullName = widgetName;\n      widgetName = widgetName.split(\"-\").pop();\n\n    if (i = presets && presets.length) {\n      presets = {};\n      while (i--) {\n        optionKey = tag.initOptions[i];\n        if (prop = tagCtx.props[\"_\" + optionKey]) {\n          presets[optionKey] = prop;\n        }\n      }\n    }\n    if (widgetFullName === widgetName) {\n      widgetFullName = \"ui-\" + widgetName;\n    }\n    linkedElem = tag.linkedElem;\n    if (!linkedElem[0]) {\n      // This may be due to using {{myWidget}} No element found here {{/myWidget}} \n      throw \"No element found for widget '\" + widgetName +\"'\";\n    }\n    // Instantiate widget\n    linkedElem[widgetName](presets);\n\n    // Store widget instance\n    tag.widget = linkedElem.data(widgetFullName) || linkedElem.data(widgetName);\n\n    if (!tag.widget) {\n      // widget failed to load, or is not a valid widget factory type\n      throw \"widget '\" + widgetName + \"' failed\";\n    }\n  },\n  onAfterLink: function(tagCtx) {\n    var linkedElem,\n      tag = this,\n      options = tag.options,\n      props = tagCtx.props,\n      widgetName = tag.widgetName.split(\"-\").pop();\n\n    linkedElem = tag.linkedElem;\n    if (options) {\n      if ($.isFunction(options)) {\n        options = tag.options();\n      }\n      tag.linkedElem[widgetName](\"option\", options);\n    }\n    $.each(props, function(key, prop) {\n      var option;\n      if (key.charAt(0) === \"_\") {\n        key = key.slice(1);\n        option = options && options[key];\n        linkedElem[widgetName](\"option\", key,\n          option && $.isFunction(option)\n            ? function() {\n              // if the same event function option is overridden on the tagDef options and\n              // the tagCtx.props, call first the one on the initOptions options, and then\n              // the one declared on the tag properties. \n              option.apply(linkedElem[0], arguments);\n              return prop.apply(linkedElem[0], arguments);\n            }\n            : prop\n          );\n      }\n    });\n  },\n  onUpdate: function() {\n    return false;\n  },\n  dataBoundOnly: true,\n  attr: \"none\"\n},\n\nbutton: {\n  baseTag: \"widget\",\n  widgetName: \"button\",\n  elem: \"button\",\n  setSize: true,\n  wrap: true,\n  onBind: function(tagCtx, linkCtx) {\n    var elem = this.linkedElem[0];\n      elem.innerHTML = elem.innerHTML || \"&nbsp;\"; // Fixes jQuery UI button issue if no label text\n    this.baseApply(arguments);\n  },\n  onAfterLink: function(tagCtx, linkCtx, ctx, event) {\n    this.baseApply(arguments);\n\t\tif (event) {\n\t\t\tthis.widget.refresh();\n\t\t}\n  },\n  render: keepParentDataCtx\n},\nautocomplete: {\n  baseTag: \"widget\",\n  widgetName: \"autocomplete\",\n  elem: \"input\",\n  setSize: true,\n  options: function() {\n    var tag = this;\n    return {\n      change: function(evt, ui) {\n        if (ui.item) {\n          tag.update(ui.item.value);\n          // If there is a selected item, update bound value on keydown.\n          // (Alternatively can set trigger=false to update on change)\n        }\n      },\n      select: function(evt, ui) {\n        if (ui.item) {\n          tag.update(ui.item.value);\n        }\n      },\n      focus: function(evt, ui) {\n        return false;\n      }\n    };\n  },\n  setValue: function(value) {\n    this.linkedElem.val(value);\n  },\n  getValue: function() {\n    return this.linkedElem.val();\n  }\n},\ncheckboxradio: {\n  baseTag: \"widget\",\n  widgetName: \"checkboxradio\",\n  linkedElement: \"input\",\n  onAfterLink: function(tagCtx, linkCtx) {\n    var tag = this,\n      elem = tag.linkedElem[0],\n      val = tag.cvtArgs()[0];\n    // Set the value to arg[0] (after applying converter, if there is one)\n\n    tag.baseApply(arguments);\n\n    elem.checked = elem.type === \"radio\"\n      ? (val === elem.value)\n      : val && val !== \"false\";\n\n    tag.widget.refresh();\n  }\n},\ncontrolgroup: {\n  baseTag: \"widget\",\n  widgetName: \"controlgroup\",\n  wrap: true,\n  elem: \"span\",\n  render: keepParentDataCtx\n},\ndatepicker: {\n  baseTag: \"widget\",\n  widgetName: \"datepicker\",\n  elem: \"input\",\n\n  options: function() {\n    var tag = this;\n    return {\n      onSelect: function(dateText, inst) {\n        tag.value = dateText;\n        tag.update(dateText);\n      }\n    };\n  },\n  setValue: function(value) {\n    if (value !== undefined && value !== this.value) {\n      this.value = value;\n      this.linkedElem.datepicker(\"setDate\", value);\n    }\n  },\n  getValue: function() {\n    return this.value;\n  },\n  onAfterLink: function(tagCtx) {\n    var tag = this;\n    tag.baseApply(arguments);\n    tag.setValue(tag.cvtArgs()[0]);\n    if (tag.linkedElem[0].tagName !== \"INPUT\") {\n      // This datepicker is not using an input (e.g. using a div) - so set to inline-block\n      tag.linkedElem.css(\"display\", \"inline-block\");\n    } else {\n      tag.tagCtx.props.trigger = false;\n    }\n  }\n},\n//dialog: { // Currently not supported. (Support would require overriding _createWrapper code.)\n//  baseTag: \"widget\",\n//  widgetName: \"dialog\",\n//  wrap: true,\n//  elem: \"div\"\n//},\ndroppable: {\n  baseTag: \"widget\",\n  widgetName: \"droppable\",\n  wrap: true\n},\nmenu: {\n  baseTag: \"widget\",\n  widgetName: \"menu\",\n  elem: \"ul\",\n  wrap: true,\n  initOptions: [\"menus\", \"items\"] // Options which need to be set on creation, not later\n},\nprogressbar: {\n  baseTag: \"widget\",\n  widgetName: \"progressbar\",\n  elem: \"div\",\n  wrap: true,\n  setSize: true,\n  setValue: function(value) {\n    var tag = this;\n    tag.widget.value(value || 0);\n  },\n  getValue: function() {\n    return this.widget.value();\n  },\n  onAfterLink: function(tagCtx) {\n    var tag = this;\n    tag.baseApply(arguments);\n    if (tagCtx.args.length) {\n      // Set the value to arg[0] (after applying converter, if there is one)\n      tag.setValue(tag.cvtArgs()[0]);\n    }\n    if (tagCtx.props.busy) {\n      // Set the value to arg[0] (after applying converter, if there is one)\n      tag.widget.value(false);\n    }\n  },\n  render: keepParentDataCtx\n},\nresizable: {\n  baseTag: \"widget\",\n  widgetName: \"resizable\",\n  wrap: true,\n  elem: \"div\"\n},\nselectable: {\n  baseTag: \"widget\",\n  widgetName: \"selectable\",\n  wrap: true\n},\nselectmenu: {\n  baseTag: \"widget\",\n  widgetName: \"selectmenu\",\n  elem: \"select\",\n  wrap: true,\n  options: function() {\n    var tag = this;\n    return {\n      change: function(evt, ui) {\n        tag.update(ui.value);\n      }\n    };\n  },\n  setValue: function(value) {\n    this.linkedElem[0].value = value;\n    this.widget.refresh();\n  },\n  getValue: function() {\n    return this.linkedElem[0].value;\n  },\n  render: keepParentDataCtx,\n  onAfterLink: function() {\n    var tag = this;\n    tag.baseApply(arguments);\n    if (tag._.unlinked) {\n      tag.linkedElem.on(\"jsv-domchange\", function() {\n        tag.widget.refresh();\n      });\n    }\n    // Set the value to arg[0] (after applying converter, if there is one)\n    tag.setValue(tag.cvtArgs()[0]);\n  }\n},\nslider: {\n  baseTag: \"widget\",\n  widgetName: \"slider\",\n  elem: \"div\",\n  setSize: true,\n  options: function() {\n    var tag = this;\n    return {\n      slide: function(evt, ui) {\n        setTimeout(function() {\n          tag.update(ui.value);\n        }, 0);\n      }\n    };\n  },\n  setValue: function(value) {\n    this.widget.value(value || 0);\n  },\n  getValue: function() {\n    return this.widget.value();\n  },\n  onAfterLink: function() {\n    var tag = this;\n    tag.baseApply(arguments);\n    // Set the value to arg[0] (after applying converter, if there is one)\n    tag.setValue(tag.cvtArgs()[0]);\n  }\n},\nspinner: {\n  baseTag: \"widget\",\n  widgetName: \"spinner\",\n  elem: \"input\",\n  setSize: true,\n  options: function() {\n    var tag = this;\n    return {\n      spin: function(evt, ui) {\n        tag.update(ui.value);\n      }\n    };\n  },\n  setValue: function(value) {\n    this.widget.value(value || 0);\n  },\n  getValue: function() {\n    return this.widget.value();\n  }\n},\ntabs: {\n  baseTag: \"widget\",\n  widgetName: \"tabs\",\n  elem: \"div\",\n  setSize: true,\n  wrap: true\n}\n\n});\n\nif ($.ui.version.slice(0, 4) === \"1.11\") {\n\t// Add backward compatibility for {{buttonset}} and {{button}}\n$.views.tags({\nbutton: {\n  baseTag: \"widget\",\n  widgetName: \"button\",\n  elem: \"button\",\n  setSize: true,\n  init: function(tagCtx, linkCtx) {\n    var template,\n      tag = this,\n      content = tagCtx.tmpl,\n      props = tagCtx.props,\n      id = props.id,\n      parent = tag.parent;\n\n    if (tag._.radio = parent && parent.tagName === \"buttonset\") {\n      tagCtx = parent.tagCtx;\n    } else {\n      tag._.chkBx = (tag._.inline ? props : linkCtx.elem).type === \"checkbox\";\n    }\n\n    var  params = tagCtx.params,\n      paramprops = params.props || {};\n\n    tag.baseApply(arguments);\n\n    if (tag._.inline) {\n      content = content && content.markup || \"&nbsp;\"; // (&nbsp; fixes a jQueryUI button rendering issue)\n      if (tag._.radio || tag._.chkBx) {\n        id = id || \"jsv\" + Math.random();\n        template = '<input id=\"' + id + '\" data-link=\"' + params.args[0] \n          + (paramprops.convert ? \" convert=\" + paramprops.convert : \"\")\n          + (paramprops.convertBack ? \" convertBack=\" + paramprops.convertBack : \"\")\n          + (tag._.radio\n            ? '\" name=\"' + parent.id + '\" type=\"radio\" value=\"' + props.value + \n              '\"/><label for=\"' + id + '\">' + content + '</label>'\n            : '\" type=\"checkbox\"/><label for=\"' + id + '\">' + content + '</label>');\n      } else {\n        template = \"<button>\" + content + \"</button>\";\n      }\n      tag.template = template;\n    }\n  },\n  onAfterLink: function(tagCtx, linkCtx) {\n    var tag = this,\n      elem = linkCtx.elem,\n      val = tag.cvtArgs()[0];\n\n    if (tag._.radio || tag._.chkBx) {\n      if (!tag._.inline) {\n        if (tag._.unlinked && !elem.id) {\n          elem.id = \"jsv\" + Math.random();\n          $(elem).after('<label for=\"' + elem.id + '\">&nbsp;</label>');\n        }\n        elem.checked = tag._.radio\n          ? (elem.name = tag.parent.id, val === elem.value)\n          : val && val !== \"false\";\n      }\n\n      tag.baseApply(arguments);\n\n      elem = tag.linkedElem[0];\n\n      if (tag._.radio) {\n        // Use {^{button value=\"xxx\"}}Label{{/button}}\n        if (elem.value === \"undefined\") {\n          // Default, for {^{button}}xxx{{/button}} or {^{button _label=\"xxx\"/}}\n          elem.value = tag.widget.option(\"label\"); \n        }\n        elem.checked = val === elem.value;\n      } else {\n        elem.checked = val && val !== \"false\";\n      }\n\n      if (tag._.chkBx) {\n        tag.widget.refresh();\n      }\n    } else {\n      if (!tag._.inline) {\n        elem.innerHTML = elem.innerHTML || \"&nbsp;\"; // Fixes jQuery UI button issue if no label text\n      }\n      tag.baseApply(arguments);\n    }\n  },\n  render: keepParentDataCtx\n},\nbuttonset: {\n  baseTag: \"widget\",\n  widgetName: \"buttonset\",\n  setSize: true,\n  init: function(tagCtx) {\n    var id,\n      tag = this;\n\n    tag.baseApply(arguments);\n\n    if (tag._.inline) {\n      tag.id = tagCtx.props.id || \"jsv\" + Math.random();\n      tag.template = '<span id=\"' + tag.id + '\">' + tagCtx.tmpl.markup + \"</span>\";\n    }\n  },\n  render: keepParentDataCtx,\n  onAfterLink: function(tagCtx, linkCtx) {\n    var tag = this,\n      elem = linkCtx.elem,\n      val = tag.cvtArgs()[0];\n    tag.baseApply(arguments);\n    tag.widget.buttons.each(function(i, elem) {\n      elem.checked = val === elem.value;\n      $(elem).button(\"refresh\");\n    });\n  }\n}\n});\n}\n\nif ($.ui.sortable) {\n  $.widget(\"jsv.sortable\", $.ui.sortable, {\n    _create: function() {\n      var innerView, moveFrom,\n        widget = this,\n        startOption = widget.options.start,\n        stopOption = widget.options.stop;\n\n      widget.option({\n        start: function(event, ui) {\n          startOption && startOption.apply(this, arguments);\n\n          innerView = ui.item.view(); // The view of the item that is being dragged\n          if (innerView.type === \"item\") {\n            // The sortable items are within a {{for}} loop, so this is a data-linked sortable list\n            moveFrom = innerView.index + 1; // 1-based starting index of dragged item\n          }\n        },\n        stop: function(event, ui) {\n          var moveTo;\n\n          if (moveFrom) {\n            // This is a data-linked sortable list\n            moveTo = ui.item.prevAll(ui.item[0].tagName).length; // The new index after\n            // being dragged (count of previous siblings of same tagName)\n            widget.cancel(); // Now cancel the DOM changes, since we are data-driven,\n            // and should use JsViews data-linking to move the sorted items\n            $.observable(innerView.parent.data).move(moveFrom-1, moveTo); // Make the equivalent\n            // observable change to the underlying data\n            moveFrom = undefined;\n            // Remove the starting index, ready for new sorting actions on this sortable list\n          }\n          stopOption && stopOption.apply(this, arguments);\n        }\n      });\n      widget._super();\n    }\n  });\n}\n\nfunction unlinkedClone() {\n  // Ensure that cloned element (and its contents) created by jQuery UI to show dragging element does not\n  // have any data-jsv tokens (since deleting the element would them remove those views associated with\n  // the original element)\n  var clone = $(this).clone();\n  clone.find(\"*\").addBack().removeAttr( \"id data-link data-jsv data-jsv-df\" );\n  clone.find(\"script\").remove();\n  return clone;\n}\n\nif ($.ui.draggable) {\n  $.widget(\"jsv.draggable\", $.ui.draggable, {\n    _createHelper: function() {\n      if (this.options.helper === \"clone\") {\n        this.options.helper = unlinkedClone;\n      }\n      return this._super();\n    }\n  });\n}\n\nif ($.ui.accordion) {\n  $.widget(\"jsv.accordion\", $.ui.accordion, {\n    _create: function() {\n      var widget = this;\n      widget.options.header = widget.options.header.replace(\":not(li):even\", \":not(li,script):even\");\n      widget.element.on(\"jsv-domchange\", function() {\n        widget.refresh();\n      });\n      widget._super();\n    }\n  });\n}\n\n$.views.tags({\n  accordion: {\n    baseTag: \"widget\",\n    widgetName: \"jsv-accordion\",\n    wrap: true,\n    initOptions: [\"header\"] // Options which need to be set on creation, not later\n  },\n  draggable: {\n    baseTag: \"widget\",\n    widgetName: \"jsv-draggable\",\n    wrap: true\n  },\n  sortable: {\n    baseTag: \"widget\",\n    widgetName: \"jsv-sortable\",\n    wrap: true\n  }\n});\n\n})(this, this.jQuery);"],"sourceRoot":"/source/"}