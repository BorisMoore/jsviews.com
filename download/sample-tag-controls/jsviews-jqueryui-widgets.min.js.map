{"version":3,"sources":["jsviews-jqueryui-widgets.js"],"names":["global","$","undefined","keepParentDataCtx","val","tagCtx","this","render","view","unlinkedClone","clone","find","addBack","removeAttr","remove","views","tags","widget","init","linkCtx","elemType","tag","props","content","_","inline","elem","wrap","template","markup","attr","onAfterLink","linkedElem","prop","i","options","presets","initOptions","widgetName","args","widgetFullName","split","pop","unlinked","length","contents","first","data","isFunction","each","key","option","charAt","slice","apply","arguments","onUpdate","dataBoundOnly","autocomplete","baseTag","setSize","change","evt","ui","item","update","value","select","focus","setValue","getValue","button","id","parent","radio","tagName","chkBx","type","params","paramprops","baseApply","Math","random","convert","convertBack","cvtArgs","after","checked","name","refresh","innerHTML","buttonset","buttons","datepicker","onSelect","dateText","inst","css","droppable","menu","progressbar","busy","resizable","selectable","selectmenu","on","slider","slide","setTimeout","spinner","spin","tabs","sortable","_create","innerView","moveFrom","startOption","start","stopOption","stop","event","index","moveTo","prevAll","cancel","observable","move","_super","draggable","_createHelper","helper","accordion","header","replace","element","ev","eventArgs","jQuery"],"mappings":"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","file":"jsviews-jqueryui-widgets.min.js","sourcesContent":["/*! JsViews jQueryUI widget integration v1.0.0-alpha:\nsee: http://www.jsviews.com/#download */\n/*\n * Copyright 2015, Boris Moore\n * Released under the MIT License.\n */\n\n(function (global, $, undefined) {\n\"use strict\";\n\nfunction keepParentDataCtx(val) {\n  var tagCtx = this.tagCtx;\n  return tagCtx.render(tagCtx.view, true); // no arg, so renders against parentView.data\n}\n\n$.views.tags({\nwidget: {\n  init: function(tagCtx, linkCtx) {\n    var tag = this,\n      props = tagCtx.props,\n      content = tagCtx.content,\n      elemType;\n\n    if (tag._.inline) {\n      if (elemType = props.elem || tag.elem) {\n        if (content) {\n          if (tag.wrap) {\n            tag.template = \"<\" + elemType + \">\" + content.markup + \"</\" + elemType + \">\";\n          }\n        } else {\n          tag.template = (elemType === \"input\") ? \"<input/>\" : \"<\"+ elemType +\"></\"+ elemType +\">\";\n        }\n      }\n      tag.attr = \"html\";\n    }\n    delete props.elem;\n  },\n  onAfterLink: function(tagCtx, linkCtx) {\n    var linkedElem, prop, i,\n      tag = this,\n      options = tag.options,\n      presets = tag.initOptions,\n      props = tagCtx.props,\n      widgetName = tag.widgetName || tagCtx.args[0],\n      widgetFullName = widgetName;\n      widgetName = widgetName.split(\"-\").pop();\n\n    if (tag._.unlinked) {\n      if (i = presets && presets.length) {\n        presets = {};\n        while (i--) {\n          i = tag.initOptions[i];\n          if (prop = tagCtx.props[\"_\" + i]) {\n            presets[i] = prop;\n          }\n        }\n      }\n      if (widgetFullName === widgetName) {\n        widgetFullName = \"ui-\" + widgetName;\n      }\n      if (!tag.linkedElem) {\n        tag.linkedElem = tag._.inline ? tag.contents(\"*\").first() : $(linkCtx.elem);\n      }\n      linkedElem = tag.linkedElem;\n      if (!linkedElem[0]) {\n        // This may be due to using {{myWidget}} No element found here {{/myWidget}} \n        throw \"No element found for widget '\" + widgetName +\"'\";\n      }\n      // Instantiate widget\n      linkedElem[widgetName](presets);\n\n      // Store widget instance\n      tag.widget = linkedElem.data(widgetFullName) || linkedElem.data(widgetName);\n      if (!tag.widget) {\n        // widget failed to load, or is not a valid widget factory type\n        throw \"widget '\" + widgetName + \"' failed\";\n      }\n    }\n    linkedElem = tag.linkedElem;\n    if (options) {\n      if ($.isFunction(options)) {\n        options = tag.options();\n      }\n      tag.linkedElem[widgetName](\"option\", options);\n    }\n    $.each(props, function(key, prop) {\n      var option;\n      if (key.charAt(0) === \"_\") {\n        key = key.slice(1);\n        option = options && options[key];\n        linkedElem[widgetName](\"option\", key,\n          option && $.isFunction(option)\n            ? function() {\n              // if the same event function option is overridden on the tagDef options and\n              // the tagCtx.props, call first the one on the initOptions options, and then\n              // the one declared on the tag properties. \n              option.apply(linkedElem[0], arguments);\n              return prop.apply(linkedElem[0], arguments);\n            }\n            : prop\n          );\n      }\n    });\n  },\n  onUpdate: function() {\n    return false;\n  },\n  dataBoundOnly: true,\n  attr: \"none\"\n},\n\nautocomplete: {\n  baseTag: \"widget\",\n  widgetName: \"autocomplete\",\n  elem: \"input\",\n  setSize: true,\n  options: function() {\n    var tag = this;\n    return {\n      change: function(evt, ui) {\n        if (ui.item) {\n          tag.update(ui.item.value);\n          // If there is a selected item, update bound value on blur.\n          // (Alternatively can set trigger=true)\n        }\n      },\n      select: function(evt, ui) {\n        if (ui.item) {\n          tag.update(ui.item.value);\n        }\n      },\n      focus: function(evt, ui) {\n        return false;\n      }\n    };\n  },\n  setValue: function(value) {\n    this.linkedElem.val(value);\n  },\n  getValue: function() {\n    return this.linkedElem.val();\n  }\n},\nbutton: {\n  baseTag: \"widget\",\n  widgetName: \"button\",\n  elem: \"button\",\n  setSize: true,\n  init: function(tagCtx, linkCtx) {\n    var template,\n      tag = this,\n      content = tagCtx.content,\n      props = tagCtx.props,\n      id = props.id,\n      parent = tag.parent;\n\n    if (tag._.radio = parent && parent.tagName === \"buttonset\") {\n      tagCtx = parent.tagCtx;\n    } else {\n      tag._.chkBx = (tag._.inline ? props : linkCtx.elem).type === \"checkbox\";\n    }\n\n    var  params = tagCtx.params,\n      paramprops = params.props || {};\n\n    tag.baseApply(arguments);\n\n    if (tag._.inline) {\n      content = content && content.markup || \"&nbsp;\"; // (&nbsp; fixes a jQueryUI button rendering issue)\n      if (tag._.radio || tag._.chkBx) {\n        id = id || \"jsv\" + Math.random();\n        template = '<input id=\"' + id + '\" data-link=\"' + params.args[0] \n          + (paramprops.convert ? \" convert=\" + paramprops.convert : \"\")\n          + (paramprops.convertBack ? \" convertBack=\" + paramprops.convertBack : \"\")\n          + (tag._.radio\n            ? '\" name=\"' + parent.id + '\" type=\"radio\" value=\"' + props.value + \n              '\"/><label for=\"' + id + '\">' + content + '</label>'\n            : '\" type=\"checkbox\"/><label for=\"' + id + '\">' + content + '</label>');\n      } else {\n        template = \"<button>\" + content + \"</button>\";\n      }\n      tag.template = template;\n    }\n  },\n  onAfterLink: function(tagCtx, linkCtx) {\n    var tag = this,\n      elem = linkCtx.elem,\n      val = tag.cvtArgs()[0];\n\n    if (tag._.radio || tag._.chkBx) {\n      if (!tag._.inline) {\n        if (tag._.unlinked && !elem.id) {\n          elem.id = \"jsv\" + Math.random();\n          $(elem).after('<label for=\"' + elem.id + '\">&nbsp;</label>');\n        }\n        elem.checked = tag._.radio\n          ? (elem.name = tag.parent.id, val === elem.value)\n          : val && val !== \"false\";\n      }\n\n      tag.baseApply(arguments);\n\n      elem = tag.linkedElem[0];\n\n      if (tag._.radio) {\n        // Use {^{button value=\"xxx\"}}Label{{/button}}\n        if (elem.value === \"undefined\") {\n          // Default, for {^{button}}xxx{{/button}} or {^{button _label=\"xxx\"/}}\n          elem.value = tag.widget.option(\"label\"); \n        }\n        elem.checked = val === elem.value;\n      } else {\n        elem.checked = val && val !== \"false\";\n      }\n\n      if (tag._.chkBx) {\n        tag.widget.refresh();\n      }\n    } else {\n      if (!tag._.inline) {\n        elem.innerHTML = elem.innerHTML || \"&nbsp;\"; // Fixes jQuery UI button issue if no label text\n      }\n      tag.baseApply(arguments);\n    }\n  },\n  render: keepParentDataCtx\n},\nbuttonset: {\n  baseTag: \"widget\",\n  widgetName: \"buttonset\",\n  setSize: true,\n  init: function(tagCtx) {\n    var id,\n      tag = this;\n\n    tag.baseApply(arguments);\n\n    if (tag._.inline) {\n      tag.id = tagCtx.props.id || \"jsv\" + Math.random();\n      tag.template = '<span id=\"' + tag.id + '\">' + tagCtx.content.markup + \"</span>\";\n    }\n  },\n  render: keepParentDataCtx,\n  onAfterLink: function(tagCtx, linkCtx) {\n    var tag = this,\n      elem = linkCtx.elem,\n      val = tag.cvtArgs()[0];\n    tag.baseApply(arguments);\n    tag.widget.buttons.each(function(i, elem) {\n      elem.checked = val === elem.value;\n      $(elem).button(\"refresh\");\n    });\n  }\n},\ndatepicker: {\n  baseTag: \"widget\",\n  widgetName: \"datepicker\",\n  elem: \"input\",\n  options: function() {\n    var tag = this;\n    return {\n      onSelect: function(dateText, inst) {\n        tag.value = dateText;\n        tag.update(dateText);\n      }\n    };\n  },\n  setValue: function(value) {\n    if (value !== undefined && value !== this.value) {\n      this.value = value;\n      this.linkedElem.datepicker(\"setDate\", value);\n    }\n  },\n  getValue: function() {\n    return this.value;\n  },\n  onAfterLink: function(tagCtx) {\n    var tag = this;\n    tag.baseApply(arguments);\n    tag.setValue(tagCtx.args[0]);\n    if (tag.linkedElem[0].tagName !== \"INPUT\") {\n      // This datepicker is not using an input (e.g. using a div) - so set to inline-block\n      tag.linkedElem.css(\"display\", \"inline-block\");\n    }\n  }\n},\n//dialog: { // Currently not supported. (Support would require overriding _createWrapper code.)\n//  baseTag: \"widget\",\n//  widgetName: \"dialog\",\n//  wrap: true,\n//  elem: \"div\"\n//},\ndroppable: {\n  baseTag: \"widget\",\n  widgetName: \"droppable\",\n  wrap: true\n},\nmenu: {\n  baseTag: \"widget\",\n  widgetName: \"menu\",\n  elem: \"ul\",\n  wrap: true,\n  initOptions: [\"menus\", \"items\"] // Options which need to be set on creation, not later\n},\nprogressbar: {\n  baseTag: \"widget\",\n  widgetName: \"progressbar\",\n  elem: \"div\",\n  wrap: true,\n  setSize: true,\n  setValue: function(value) {\n    var tag = this;\n    tag.widget.value(value || 0);\n  },\n  getValue: function() {\n    return this.widget.value();\n  },\n  onAfterLink: function(tagCtx) {\n    var tag = this;\n    tag.baseApply(arguments);\n    if (tagCtx.args.length) {\n      // Set the value to arg[0] (after applying converter, if there is one)\n      tag.setValue(tag.cvtArgs()[0]);\n    }\n    if (tagCtx.props.busy) {\n      // Set the value to arg[0] (after applying converter, if there is one)\n      tag.widget.value(false);\n    }\n  },\n  render: keepParentDataCtx\n},\nresizable: {\n  baseTag: \"widget\",\n  widgetName: \"resizable\",\n  wrap: true,\n  elem: \"div\"\n},\nselectable: {\n  baseTag: \"widget\",\n  widgetName: \"selectable\",\n  wrap: true\n},\nselectmenu: {\n  baseTag: \"widget\",\n  widgetName: \"selectmenu\",\n  elem: \"select\",\n  wrap: true,\n  options: function() {\n    var tag = this;\n    return {\n      change: function(evt, ui) {\n        tag.update(ui.value);\n      }\n    };\n  },\n  setValue: function(value) {\n    this.linkedElem[0].value = value;\n    this.widget.refresh();\n  },\n  getValue: function() {\n    return this.linkedElem[0].value;\n  },\n  render: keepParentDataCtx,\n  onAfterLink: function() {\n    var tag = this;\n    tag.baseApply(arguments);\n    if (tag._.unlinked) {\n      tag.linkedElem.on(\"jsv-domchange\", function() {\n        tag.widget.refresh();\n      });\n    }\n    // Set the value to arg[0] (after applying converter, if there is one)\n    tag.setValue(tag.cvtArgs()[0]);\n  }\n},\nslider: {\n  baseTag: \"widget\",\n  widgetName: \"slider\",\n  elem: \"div\",\n  setSize: true,\n  options: function() {\n    var tag = this;\n    return {\n      slide: function(evt, ui) {\n        setTimeout(function() {\n          tag.update(ui.value);\n        }, 0);\n      }\n    };\n  },\n  setValue: function(value) {\n    this.widget.value(value || 0);\n  },\n  getValue: function() {\n    return this.widget.value();\n  },\n  onAfterLink: function() {\n    var tag = this;\n    tag.baseApply(arguments);\n    // Set the value to arg[0] (after applying converter, if there is one)\n    tag.setValue(tag.cvtArgs()[0]);\n  }\n},\nspinner: {\n  baseTag: \"widget\",\n  widgetName: \"spinner\",\n  elem: \"input\",\n  setSize: true,\n  options: function() {\n    var tag = this;\n    return {\n      spin: function(evt, ui) {\n        tag.update(ui.value);\n      }\n    };\n  },\n  setValue: function(value) {\n    this.widget.value(value || 0);\n  },\n  getValue: function() {\n    return this.widget.value();\n  }\n},\ntabs: {\n  baseTag: \"widget\",\n  widgetName: \"tabs\",\n  elem: \"div\",\n  setSize: true,\n  wrap: true\n}\n\n});\n\nif ($.ui.sortable) {\n  $.widget(\"jsv.sortable\", $.ui.sortable, {\n    _create: function() {\n      var innerView, moveFrom,\n        widget = this,\n        startOption = widget.options.start,\n        stopOption = widget.options.stop;\n\n      widget.option({\n        start: function(event, ui) {\n          startOption && startOption.apply(this, arguments);\n\n          innerView = ui.item.view(); // The view of the item that is being dragged\n          if (innerView.type === \"item\") {\n            // The sortable items are within a {{for}} loop, so this is a data-linked sortable list\n            moveFrom = innerView.index + 1; // 1-based starting index of dragged item\n          }\n        },\n        stop: function(event, ui) {\n          var moveTo;\n\n          if (moveFrom) {\n            // This is a data-linked sortable list\n            moveTo = ui.item.prevAll(ui.item[0].tagName).length; // The new index after\n            // being dragged (count of previous siblings of same tagName)\n            widget.cancel(); // Now cancel the DOM changes, since we are data-driven,\n            // and should use JsViews data-linking to move the sorted items\n            $.observable(innerView.parent.data).move(moveFrom-1, moveTo); // Make the equivalent\n            // observable change to the underlying data\n            moveFrom = undefined;\n            // Remove the starting index, ready for new sorting actions on this sortable list\n          }\n          stopOption && stopOption.apply(this, arguments);\n        }\n      });\n      widget._super();\n    }\n  });\n}\n\nfunction unlinkedClone() {\n  // Ensure that cloned element (and its contents) created by jQuery UI to show dragging element does not\n  // have any data-jsv tokens (since deleting the element would them remove those views associated with\n  // the original element)\n  var clone = $(this).clone();\n  clone.find(\"*\").addBack().removeAttr( \"id data-link data-jsv data-jsv-df\" );\n  clone.find(\"script\").remove();\n  return clone;\n}\n\nif ($.ui.draggable) {\n  $.widget(\"jsv.draggable\", $.ui.draggable, {\n    _createHelper: function() {\n      if (this.options.helper === \"clone\") {\n        this.options.helper = unlinkedClone;\n      }\n      return this._super();\n    }\n  });\n}\n\nif ($.ui.accordion) {\n  $.widget(\"jsv.accordion\", $.ui.accordion, {\n    _create: function() {\n      var widget = this;\n      widget.options.header = widget.options.header.replace(\":not(li):even\", \":not(li,script):even\");\n      widget.element.on(\"jsv-domchange\", function(ev, tagCtx, linkCtx, eventArgs) {\n        widget.refresh();\n      });\n      widget._super();\n    }\n  });\n}\n\n$.views.tags({\n  accordion: {\n    baseTag: \"widget\",\n    widgetName: \"jsv-accordion\",\n    wrap: true,\n    initOptions: [\"header\"] // Options which need to be set on creation, not later\n  },\n  draggable: {\n    baseTag: \"widget\",\n    widgetName: \"jsv-draggable\",\n    wrap: true\n  },\n  sortable: {\n    baseTag: \"widget\",\n    widgetName: \"jsv-sortable\",\n    wrap: true\n  }\n});\n\n})(this, this.jQuery);"],"sourceRoot":"/source/"}