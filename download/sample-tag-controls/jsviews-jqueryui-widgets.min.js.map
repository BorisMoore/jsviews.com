{"version":3,"sources":["jsviews-jqueryui-widgets.js"],"names":["global","$","undefined","keepParentDataCtx","val","tagCtx","this","render","view","unlinkedClone","clone","find","addBack","removeAttr","remove","views","tags","widget","init","linkCtx","content","elemType","props","tag","_","inline","tmpl","markup","elem","wrap","template","trim","attr","onAfterLink","linkedElem","prop","i","options","presets","initOptions","widgetName","args","widgetFullName","split","pop","unlinked","length","contents","first","data","isFunction","each","key","option","charAt","slice","apply","arguments","onUpdate","dataBoundOnly","autocomplete","baseTag","setSize","change","evt","ui","item","update","value","select","focus","setValue","getValue","button","id","parent","radio","tagName","chkBx","type","params","paramprops","baseApply","Math","random","convert","convertBack","cvtArgs","after","checked","name","refresh","innerHTML","buttonset","buttons","datepicker","onSelect","dateText","inst","css","trigger","droppable","menu","progressbar","busy","resizable","selectable","selectmenu","on","slider","slide","setTimeout","spinner","spin","tabs","sortable","_create","innerView","moveFrom","startOption","start","stopOption","stop","event","index","moveTo","prevAll","cancel","observable","move","_super","draggable","_createHelper","helper","accordion","header","replace","element","ev","eventArgs","jQuery"],"mappings":"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","file":"jsviews-jqueryui-widgets.min.js","sourcesContent":["/*! JsViews jQueryUI widget integration v0.9.80 (Beta)\nsee: http://www.jsviews.com/#download */\n/*\n * Copyright 2016, Boris Moore\n * Released under the MIT License.\n */\n\n/*\n *           autocomplete button buttonset droppable menu progressbar resizable selectable slider spinner tabs sortable draggable accordion\n *   wrap    -            -      -         wrap      wrap wrap        wrap      wrap       -      -       wrap wrap     wrap      wrap\n *   elem    input        button -         -         ul   div         div       -          div    input   div  -        -         -\n */\n\n(function (global, $, undefined) {\n\"use strict\";\n\nfunction keepParentDataCtx(val) {\n  var tagCtx = this.tagCtx;\n  return tagCtx.render(tagCtx.view, true); // no arg, so renders against parentView.data\n}\n\n$.views.tags({\nwidget: {\n  init: function(tagCtx, linkCtx) {\n    var content, elemType, props,\n      tag = this;\n\n    if (tag._.inline) {\n      props = tagCtx.props;\n      content = tagCtx.tmpl.markup;\n      if (elemType = props.elem || tag.elem) {\n        if (content) {\n          if (tag.wrap) {\n            tag.template = \"<\" + elemType + \">\" + $.trim(content) + \"</\" + elemType + \">\";\n          }\n        } else {\n          tag.template = (elemType === \"input\") ? \"<input/>\" : \"<\"+ elemType +\"></\"+ elemType +\">\";\n        }\n      }\n      tag.attr = \"html\";\n    }\n  },\n  onAfterLink: function(tagCtx, linkCtx) {\n    var linkedElem, prop, i,\n      tag = this,\n      options = tag.options,\n      presets = tag.initOptions,\n      props = tagCtx.props,\n      widgetName = tag.widgetName || tagCtx.args[0],\n      widgetFullName = widgetName;\n      widgetName = widgetName.split(\"-\").pop();\n\n    if (tag._.unlinked) {\n      if (i = presets && presets.length) {\n        presets = {};\n        while (i--) {\n          i = tag.initOptions[i];\n          if (prop = tagCtx.props[\"_\" + i]) {\n            presets[i] = prop;\n          }\n        }\n      }\n      if (widgetFullName === widgetName) {\n        widgetFullName = \"ui-\" + widgetName;\n      }\n      if (!tag.linkedElem) {\n        tag.linkedElem = tag._.inline ? tag.contents(\"*\").first() : $(linkCtx.elem);\n      }\n      linkedElem = tag.linkedElem;\n      if (!linkedElem[0]) {\n        // This may be due to using {{myWidget}} No element found here {{/myWidget}} \n        throw \"No element found for widget '\" + widgetName +\"'\";\n      }\n      // Instantiate widget\n      linkedElem[widgetName](presets);\n\n      // Store widget instance\n      tag.widget = linkedElem.data(widgetFullName) || linkedElem.data(widgetName);\n      if (!tag.widget) {\n        // widget failed to load, or is not a valid widget factory type\n        throw \"widget '\" + widgetName + \"' failed\";\n      }\n    }\n    linkedElem = tag.linkedElem;\n    if (options) {\n      if ($.isFunction(options)) {\n        options = tag.options();\n      }\n      tag.linkedElem[widgetName](\"option\", options);\n    }\n    $.each(props, function(key, prop) {\n      var option;\n      if (key.charAt(0) === \"_\") {\n        key = key.slice(1);\n        option = options && options[key];\n        linkedElem[widgetName](\"option\", key,\n          option && $.isFunction(option)\n            ? function() {\n              // if the same event function option is overridden on the tagDef options and\n              // the tagCtx.props, call first the one on the initOptions options, and then\n              // the one declared on the tag properties. \n              option.apply(linkedElem[0], arguments);\n              return prop.apply(linkedElem[0], arguments);\n            }\n            : prop\n          );\n      }\n    });\n  },\n  onUpdate: function() {\n    return false;\n  },\n  dataBoundOnly: true,\n  attr: \"none\"\n},\n\nautocomplete: {\n  baseTag: \"widget\",\n  widgetName: \"autocomplete\",\n  elem: \"input\",\n  setSize: true,\n  options: function() {\n    var tag = this;\n    return {\n      change: function(evt, ui) {\n        if (ui.item) {\n          tag.update(ui.item.value);\n          // If there is a selected item, update bound value on keydown.\n          // (Alternatively can set trigger=false to update on change)\n        }\n      },\n      select: function(evt, ui) {\n        if (ui.item) {\n          tag.update(ui.item.value);\n        }\n      },\n      focus: function(evt, ui) {\n        return false;\n      }\n    };\n  },\n  setValue: function(value) {\n    this.linkedElem.val(value);\n  },\n  getValue: function() {\n    return this.linkedElem.val();\n  }\n},\nbutton: {\n  baseTag: \"widget\",\n  widgetName: \"button\",\n  elem: \"button\",\n  setSize: true,\n  init: function(tagCtx, linkCtx) {\n    var template,\n      tag = this,\n      content = tagCtx.tmpl,\n      props = tagCtx.props,\n      id = props.id,\n      parent = tag.parent;\n\n    if (tag._.radio = parent && parent.tagName === \"buttonset\") {\n      tagCtx = parent.tagCtx;\n    } else {\n      tag._.chkBx = (tag._.inline ? props : linkCtx.elem).type === \"checkbox\";\n    }\n\n    var  params = tagCtx.params,\n      paramprops = params.props || {};\n\n    tag.baseApply(arguments);\n\n    if (tag._.inline) {\n      content = content && content.markup || \"&nbsp;\"; // (&nbsp; fixes a jQueryUI button rendering issue)\n      if (tag._.radio || tag._.chkBx) {\n        id = id || \"jsv\" + Math.random();\n        template = '<input id=\"' + id + '\" data-link=\"' + params.args[0] \n          + (paramprops.convert ? \" convert=\" + paramprops.convert : \"\")\n          + (paramprops.convertBack ? \" convertBack=\" + paramprops.convertBack : \"\")\n          + (tag._.radio\n            ? '\" name=\"' + parent.id + '\" type=\"radio\" value=\"' + props.value + \n              '\"/><label for=\"' + id + '\">' + content + '</label>'\n            : '\" type=\"checkbox\"/><label for=\"' + id + '\">' + content + '</label>');\n      } else {\n        template = \"<button>\" + content + \"</button>\";\n      }\n      tag.template = template;\n    }\n  },\n  onAfterLink: function(tagCtx, linkCtx) {\n    var tag = this,\n      elem = linkCtx.elem,\n      val = tag.cvtArgs()[0];\n\n    if (tag._.radio || tag._.chkBx) {\n      if (!tag._.inline) {\n        if (tag._.unlinked && !elem.id) {\n          elem.id = \"jsv\" + Math.random();\n          $(elem).after('<label for=\"' + elem.id + '\">&nbsp;</label>');\n        }\n        elem.checked = tag._.radio\n          ? (elem.name = tag.parent.id, val === elem.value)\n          : val && val !== \"false\";\n      }\n\n      tag.baseApply(arguments);\n\n      elem = tag.linkedElem[0];\n\n      if (tag._.radio) {\n        // Use {^{button value=\"xxx\"}}Label{{/button}}\n        if (elem.value === \"undefined\") {\n          // Default, for {^{button}}xxx{{/button}} or {^{button _label=\"xxx\"/}}\n          elem.value = tag.widget.option(\"label\"); \n        }\n        elem.checked = val === elem.value;\n      } else {\n        elem.checked = val && val !== \"false\";\n      }\n\n      if (tag._.chkBx) {\n        tag.widget.refresh();\n      }\n    } else {\n      if (!tag._.inline) {\n        elem.innerHTML = elem.innerHTML || \"&nbsp;\"; // Fixes jQuery UI button issue if no label text\n      }\n      tag.baseApply(arguments);\n    }\n  },\n  render: keepParentDataCtx\n},\nbuttonset: {\n  baseTag: \"widget\",\n  widgetName: \"buttonset\",\n  setSize: true,\n  init: function(tagCtx) {\n    var id,\n      tag = this;\n\n    tag.baseApply(arguments);\n\n    if (tag._.inline) {\n      tag.id = tagCtx.props.id || \"jsv\" + Math.random();\n      tag.template = '<span id=\"' + tag.id + '\">' + tagCtx.tmpl.markup + \"</span>\";\n    }\n  },\n  render: keepParentDataCtx,\n  onAfterLink: function(tagCtx, linkCtx) {\n    var tag = this,\n      elem = linkCtx.elem,\n      val = tag.cvtArgs()[0];\n    tag.baseApply(arguments);\n    tag.widget.buttons.each(function(i, elem) {\n      elem.checked = val === elem.value;\n      $(elem).button(\"refresh\");\n    });\n  }\n},\ndatepicker: {\n  baseTag: \"widget\",\n  widgetName: \"datepicker\",\n  elem: \"input\",\n\n  options: function() {\n    var tag = this;\n    return {\n      onSelect: function(dateText, inst) {\n        tag.value = dateText;\n        tag.update(dateText);\n      }\n    };\n  },\n  setValue: function(value) {\n    if (value !== undefined && value !== this.value) {\n      this.value = value;\n      this.linkedElem.datepicker(\"setDate\", value);\n    }\n  },\n  getValue: function() {\n    return this.value;\n  },\n  onAfterLink: function(tagCtx) {\n    var tag = this;\n    tag.baseApply(arguments);\n    tag.setValue(tag.cvtArgs()[0]);\n    if (tag.linkedElem[0].tagName !== \"INPUT\") {\n      // This datepicker is not using an input (e.g. using a div) - so set to inline-block\n      tag.linkedElem.css(\"display\", \"inline-block\");\n    } else {\n      tag.tagCtx.props.trigger = false;\n    }\n  }\n},\n//dialog: { // Currently not supported. (Support would require overriding _createWrapper code.)\n//  baseTag: \"widget\",\n//  widgetName: \"dialog\",\n//  wrap: true,\n//  elem: \"div\"\n//},\ndroppable: {\n  baseTag: \"widget\",\n  widgetName: \"droppable\",\n  wrap: true\n},\nmenu: {\n  baseTag: \"widget\",\n  widgetName: \"menu\",\n  elem: \"ul\",\n  wrap: true,\n  initOptions: [\"menus\", \"items\"] // Options which need to be set on creation, not later\n},\nprogressbar: {\n  baseTag: \"widget\",\n  widgetName: \"progressbar\",\n  elem: \"div\",\n  wrap: true,\n  setSize: true,\n  setValue: function(value) {\n    var tag = this;\n    tag.widget.value(value || 0);\n  },\n  getValue: function() {\n    return this.widget.value();\n  },\n  onAfterLink: function(tagCtx) {\n    var tag = this;\n    tag.baseApply(arguments);\n    if (tagCtx.args.length) {\n      // Set the value to arg[0] (after applying converter, if there is one)\n      tag.setValue(tag.cvtArgs()[0]);\n    }\n    if (tagCtx.props.busy) {\n      // Set the value to arg[0] (after applying converter, if there is one)\n      tag.widget.value(false);\n    }\n  },\n  render: keepParentDataCtx\n},\nresizable: {\n  baseTag: \"widget\",\n  widgetName: \"resizable\",\n  wrap: true,\n  elem: \"div\"\n},\nselectable: {\n  baseTag: \"widget\",\n  widgetName: \"selectable\",\n  wrap: true\n},\nselectmenu: {\n  baseTag: \"widget\",\n  widgetName: \"selectmenu\",\n  elem: \"select\",\n  wrap: true,\n  options: function() {\n    var tag = this;\n    return {\n      change: function(evt, ui) {\n        tag.update(ui.value);\n      }\n    };\n  },\n  setValue: function(value) {\n    this.linkedElem[0].value = value;\n    this.widget.refresh();\n  },\n  getValue: function() {\n    return this.linkedElem[0].value;\n  },\n  render: keepParentDataCtx,\n  onAfterLink: function() {\n    var tag = this;\n    tag.baseApply(arguments);\n    if (tag._.unlinked) {\n      tag.linkedElem.on(\"jsv-domchange\", function() {\n        tag.widget.refresh();\n      });\n    }\n    // Set the value to arg[0] (after applying converter, if there is one)\n    tag.setValue(tag.cvtArgs()[0]);\n  }\n},\nslider: {\n  baseTag: \"widget\",\n  widgetName: \"slider\",\n  elem: \"div\",\n  setSize: true,\n  options: function() {\n    var tag = this;\n    return {\n      slide: function(evt, ui) {\n        setTimeout(function() {\n          tag.update(ui.value);\n        }, 0);\n      }\n    };\n  },\n  setValue: function(value) {\n    this.widget.value(value || 0);\n  },\n  getValue: function() {\n    return this.widget.value();\n  },\n  onAfterLink: function() {\n    var tag = this;\n    tag.baseApply(arguments);\n    // Set the value to arg[0] (after applying converter, if there is one)\n    tag.setValue(tag.cvtArgs()[0]);\n  }\n},\nspinner: {\n  baseTag: \"widget\",\n  widgetName: \"spinner\",\n  elem: \"input\",\n  setSize: true,\n  options: function() {\n    var tag = this;\n    return {\n      spin: function(evt, ui) {\n        tag.update(ui.value);\n      }\n    };\n  },\n  setValue: function(value) {\n    this.widget.value(value || 0);\n  },\n  getValue: function() {\n    return this.widget.value();\n  }\n},\ntabs: {\n  baseTag: \"widget\",\n  widgetName: \"tabs\",\n  elem: \"div\",\n  setSize: true,\n  wrap: true\n}\n\n});\n\nif ($.ui.sortable) {\n  $.widget(\"jsv.sortable\", $.ui.sortable, {\n    _create: function() {\n      var innerView, moveFrom,\n        widget = this,\n        startOption = widget.options.start,\n        stopOption = widget.options.stop;\n\n      widget.option({\n        start: function(event, ui) {\n          startOption && startOption.apply(this, arguments);\n\n          innerView = ui.item.view(); // The view of the item that is being dragged\n          if (innerView.type === \"item\") {\n            // The sortable items are within a {{for}} loop, so this is a data-linked sortable list\n            moveFrom = innerView.index + 1; // 1-based starting index of dragged item\n          }\n        },\n        stop: function(event, ui) {\n          var moveTo;\n\n          if (moveFrom) {\n            // This is a data-linked sortable list\n            moveTo = ui.item.prevAll(ui.item[0].tagName).length; // The new index after\n            // being dragged (count of previous siblings of same tagName)\n            widget.cancel(); // Now cancel the DOM changes, since we are data-driven,\n            // and should use JsViews data-linking to move the sorted items\n            $.observable(innerView.parent.data).move(moveFrom-1, moveTo); // Make the equivalent\n            // observable change to the underlying data\n            moveFrom = undefined;\n            // Remove the starting index, ready for new sorting actions on this sortable list\n          }\n          stopOption && stopOption.apply(this, arguments);\n        }\n      });\n      widget._super();\n    }\n  });\n}\n\nfunction unlinkedClone() {\n  // Ensure that cloned element (and its contents) created by jQuery UI to show dragging element does not\n  // have any data-jsv tokens (since deleting the element would them remove those views associated with\n  // the original element)\n  var clone = $(this).clone();\n  clone.find(\"*\").addBack().removeAttr( \"id data-link data-jsv data-jsv-df\" );\n  clone.find(\"script\").remove();\n  return clone;\n}\n\nif ($.ui.draggable) {\n  $.widget(\"jsv.draggable\", $.ui.draggable, {\n    _createHelper: function() {\n      if (this.options.helper === \"clone\") {\n        this.options.helper = unlinkedClone;\n      }\n      return this._super();\n    }\n  });\n}\n\nif ($.ui.accordion) {\n  $.widget(\"jsv.accordion\", $.ui.accordion, {\n    _create: function() {\n      var widget = this;\n      widget.options.header = widget.options.header.replace(\":not(li):even\", \":not(li,script):even\");\n      widget.element.on(\"jsv-domchange\", function(ev, tagCtx, linkCtx, eventArgs) {\n        widget.refresh();\n      });\n      widget._super();\n    }\n  });\n}\n\n$.views.tags({\n  accordion: {\n    baseTag: \"widget\",\n    widgetName: \"jsv-accordion\",\n    wrap: true,\n    initOptions: [\"header\"] // Options which need to be set on creation, not later\n  },\n  draggable: {\n    baseTag: \"widget\",\n    widgetName: \"jsv-draggable\",\n    wrap: true\n  },\n  sortable: {\n    baseTag: \"widget\",\n    widgetName: \"jsv-sortable\",\n    wrap: true\n  }\n});\n\n})(this, this.jQuery);"],"sourceRoot":"/source/"}