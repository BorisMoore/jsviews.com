{"version":3,"sources":["colorpicker-multiformat2.js"],"names":["$","round","val","Math","validateTiny","clr","tiny","tinycolor","isValid","toHsv","h","s","v","a","currentColor","tag","ctxPrm","color","updateHslaValues","hsla","ctx","parentTags","picker","updateValues","setValues","views","tags","bindTo","bindFrom","linkedCtxParam","undefined","mainElement","onBind","this","sliders","childTags","hueslider","alphaslider","areaslider","currentHsvaColor","setValue","i","tagElse","mode","onAfterLink","tagCtx","linkCtx","ev","eventArgs","setMetrics","convert","arg1","arg2","arg3","arg4","arg","r","g","b","convertBack","ret","args","extend","arguments","toRgb","toHex8String","arg0","template","markup","converters","rnd","fromhex","hex","stohsv","test","hsl","toHsl","ltohsv","l","rtohsv","rgb","gtohsv","btohsv","lhsl","shsl","toRgbString","rgbGrad","onUpdate","toHexString","rgba","rgbafromrgb","hexfromrgb","rgbafromhex","jQuery"],"mappings":"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","file":"colorpicker-multiformat2.min.js","sourcesContent":["/*! Sample JsViews tag control: {{picker}} control v1.0.8\nsee: http://www.jsviews.com/#download/sample-tagcontrols */\n/*\n * Copyright 2018, Boris Moore\n * Released under the MIT License.\n */\n\n(function($) {\n\"use strict\";\n\n$.views.tags({\npicker: {\n  // Bind to HSVA color parameters and mode. Color parameters will be HSVA, RGBA or HEX, depending on mode\n  bindTo: [0, 1, 2, 3],\n  bindFrom: [0, 1, 2, 3, \"mode\"],\n  linkedCtxParam: [\"h\", \"s\", \"v\", \"a\", undefined],\n  mainElement: \"div\",\n  onBind: function() {\n    // Provide reference vars to access component controls\n    var tag = this,\n      sliders = tag.childTags(\"slider\");\n    tag.hueslider = sliders[0];\n    tag.alphaslider = sliders[1];\n    tag.areaslider = tag.childTags(\"areaslider\")[0];\n    tag.currentHsvaColor = [];\n  },\n  setValue: function(val, i, tagElse) {\n    if (i === 4) {\n      this.mode = val;\n    } else {\n      this.currentHsvaColor[i] = val;\n    }\n  },\n  onAfterLink: function(tagCtx, linkCtx, ctx, ev, eventArgs) {\n    if (!eventArgs) {\n      // Update the UI width height and position metrics for each component control\n      var tag = this;\n      tag.hueslider.setMetrics();\n      tag.alphaslider.setMetrics();\n      tag.areaslider.setMetrics();\n    }\n  },\n  convert: function(arg1, arg2, arg3, arg4, mode) {\n    mode = mode || \"hsva\";\n    var arg;\n    switch (mode) {\n      case \"hsva\":\n        // This is our internal format, so return as is\n        return [arg1, arg2, arg3, arg4, mode];\n      case \"rgba\":\n        // Convert from RGBA to our internal HSVA format\n        arg = tinycolor({r: arg1, g: arg2, b: arg3, a: arg4}).toHsv();\n        break;\n      case \"hex\":\n        // Convert from HEX to our internal HSVA format\n        arg = tinycolor(arg1).toHsv();\n        break;\n    }\n    return [arg.h, arg.s, arg.v, arg.a, mode];\n  },\n  convertBack: function() {\n    var color, ret,\n      args = $.extend([], this.currentHsvaColor, arguments),\n      h = args[0], s = args[1], v = args[2], a = args[3];\n\n    switch (this.mode) {\n      case \"hsva\":\n        // External format is same as internal format, so return as is\n        ret = [h, s, v, a];\n        break;\n      case \"rgba\":\n        color = tinycolor({h: h, s: s, v: v, a: a});\n        // Convert from internal HSVA format to RGBA external format\n        color = color.toRgb();\n        ret = [color.r, color.g, color.b, color.a];\n        break;\n      case \"hex\":\n        // Convert from internal HSVA format to HEX external format\n        color = tinycolor({h: h, s: s, v: v, a: a});\n        ret = [color.toHex8String()];\n    }\n    ret.arg0 = false; // Return array of values for each bindTo target, (even though\n    // length of array is not bindTo.length)\n    return ret;\n  },\n  template: {\n    // The template markup\n    markup:\n      '<div class=\"popover\">'\n      + '{^{areaslider ~s ~v xMin=0 xMax=1 yMin=1 yMax=0 width=\"100%\" convert=~cvt convertBack=~cbk}}'\n        + '<div class=\"sliderbox sat fill\" data-link=\"css-background-color{rgb:~h 100 100}\">'\n          + '<div class=\"val fill\">'\n            + '<div class=\"dragger\" data-link=\"css-background-color{rgb:~h ~s ~v}\"></div>'\n          + '</div>'\n        + '</div>'\n      + '{{/areaslider}}'\n      + '<span class=\"swatch\">'\n        + '<span class=\"swatch-inner\" data-link=\"css-background-color{rgba:~h ~s ~v ~a}\"></span>'\n      + '</span>'\n      + '{^{slider ~h min=360 max=0 class=\"hue\"/}}'\n      + '{^{slider ~a min=0 max=1}}'\n        + '<div class=\"sliderbox alpha\">'\n          + '<div class=\"handle\"></div>'\n          + '<div class=\"alpha-background\" data-link=\"css-background-image{rgbGrad:~h ~s ~v}\"></div>'\n        + '</div>'\n      + '{{/slider}}'\n      + '{^{spinblock}}'\n        + '<div class=\"spinblock-text spinblock-hex\">'\n          + '<input class=\"spinblock-value\" maxlength=\"20\" data-link=\"{hex:~h ~s ~v ~a:fromhex}\"/>'\n          + '<div class=\"spinblock-label\">HEX</div>'\n        + '</div>'\n      + '{{else}}'\n        + '<div class=\"spinblock-text\">'\n          + '<input class=\"spinblock-value\" maxlength=\"4\" data-link=\"{r:~h ~s ~v:rtohsv}\"/>'\n          + '<input class=\"spinblock-value\" maxlength=\"4\" data-link=\"{g:~h ~s ~v:gtohsv}\"/>'\n          + '<input class=\"spinblock-value\" maxlength=\"4\" data-link=\"{b:~h ~s ~v:btohsv}\"/>'\n          + '<input class=\"spinblock-value\" maxlength=\"4\" data-link=\"~a\"/>'\n          + '<div class=\"spinblock-label\">RGBA</div>'\n        + '</div>'\n      + '{{else}}'\n        + '<div class=\"spinblock-text\">'\n          + '<input class=\"spinblock-value\" maxlength=\"4\" data-link=\"{rnd:~h:rnd}\"/>'\n          + '<input class=\"spinblock-value\" maxlength=\"4\" data-link=\"{shsl:~h ~s ~v ~a:stohsv}\"/>'\n          + '<input class=\"spinblock-value\" maxlength=\"4\" data-link=\"{lhsl:~h ~s ~v ~a:ltohsv}\"/>'\n          + '<input class=\"spinblock-value\" maxlength=\"4\" data-link=\"~a\"/>'\n          + '<div class=\"spinblock-label\">HSLA</div>'\n        + '</div>'\n      + '{{/spinblock}}'\n    + '</div>',\n\n    // Color converters used within the template (defined as converters scoped to this template)\n    converters : {\n      rnd: function(val) { \n        return Math.round(val);\n      },\n      fromhex: function(hex) { \n        updateHslaValues(this, validateTiny(hex));\n      },\n      stohsv: function(s) { \n        if (/^[\\d\\.]{1,3}%$/.test(s)) {\n          var hsl = currentColor(this).toHsl();\n          hsl.s = s;\n          updateHslaValues(this, validateTiny(hsl));\n        }\n      },\n      ltohsv: function(l) { \n        if (/^[\\d\\.]{1,3}%$/.test(l)) {\n          var hsl = currentColor(this).toHsl();\n          hsl.l = l;\n          updateHslaValues(this, validateTiny(hsl));\n        }\n      },\n      rtohsv: function(r) { \n        if (/^\\d{1,3}$/.test(r)) {\n          var rgb = currentColor(this).toRgb();\n          rgb.r = r;\n          updateHslaValues(this, validateTiny(rgb));\n        }\n      },\n      gtohsv: function(g) { \n        if (/^\\d{1,3}$/.test(g)) {\n          var rgb = currentColor(this).toRgb();\n          rgb.g = g;\n          updateHslaValues(this, validateTiny(rgb));\n        }\n      },\n      btohsv: function(b) { \n        if (/^\\d{1,3}$/.test(b)) {\n          var rgb = currentColor(this).toRgb();\n          rgb.b = b;\n          updateHslaValues(this, validateTiny(rgb));\n        }\n      },\n      lhsl: function(h, s, v, a) {\n        return Math.round(color(h, s, v, a).toHsl().l*100) + \"%\";\n      },\n      shsl: function(h, s, v, a) {\n        return Math.round(color(h, s, v, a).toHsl().s*100) + \"%\";\n      },\n      r: function(h, s, v, a) {\n        return color(h, s, v, a).toRgb().r;\n      },\n      g: function(h, s, v, a) {\n        return color(h, s, v, a).toRgb().g;\n      },\n      b: function(h, s, v, a) {\n        return color(h, s, v, a).toRgb().b;\n      },\n      rgb: function(h, s, v, a) {\n        return tinycolor({h: h, s: s, v: v}).toRgbString();\n      },\n      rgbGrad: function(h, s, v) {\n        return \"linear-gradient(to right, rgba(0, 0, 0, 0), \" + tinycolor({h: h, s: s, v: v}).toRgbString() + \")\";\n      }\n    }\n  },\n  onUpdate: false\n}\n});\n\n$.views.converters({ // Global converters\n  hex: function(h, s, v, a) {\n    return (a < 1 ? color(h, s, v, a).toHex8String(true) : tinycolor({h: h, s: s, v: v}).toHexString(true));\n  },\n  rgba: function(h, s, v, a) { \n    return color(h, s, v, a).toRgbString();\n  },\n  rgbafromrgb: function(r, g, b, a) { \n    return tinycolor({r: r, g: g, b: b, a: a}).toRgbString();\n  },\n  hexfromrgb: function(r, g, b, a) {\n    return (a < 1 ? tinycolor({r: r, g: g, b: b, a: a}).toHex8String(true) : tinycolor({r: r, g: g, b: b}).toHexString(true));\n  },\n  rgbafromhex: function(hex) { \n    return tinycolor(hex).toRgbString();\n  }\n});\n\n// Utility functions\n\nfunction round(val) {\n  return Math.round(100*val)/100;\n}\n\nfunction clamp(num, min, max) {\n  return min>max\n    ? num <= max ? max : num >= min ? min : num\n    : num <= min ? min : num >= max ? max : num;\n}\n\nfunction validateTiny(clr) {\n  var tiny = tinycolor(clr);\n  if (!tiny.isValid()) {\n    return;\n  }\n  tiny = tiny.toHsv();\n  return [round(tiny.h), round(tiny.s), round(tiny.v), round(tiny.a)];\n}\n\nfunction currentColor(tag) {\n  return tinycolor({h: tag.ctxPrm(\"h\"), s: tag.ctxPrm(\"s\"), v:  tag.ctxPrm(\"v\"), a: tag.ctxPrm(\"a\")});\n}\n\nfunction color(h, s, v, a) {\n  return tinycolor({h: h, s: s, v: v, a: a});\n}\n\nfunction updateHslaValues(tag, hsla) {\n  if (hsla) {\n    tag.ctx.parentTags.picker\n      .updateValues(hsla[0], hsla[1], hsla[2], hsla[3])\n      .setValues(hsla[0], hsla[1], hsla[2], hsla[3]);\n  }\n}\n\n})(this.jQuery);\n"]}