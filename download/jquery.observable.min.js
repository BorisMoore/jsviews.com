/*! JsObservable v1.0.0-alpha: http://github.com/BorisMoore/jsviews and http://jsviews.com/jsviews
informal pre V1.0 commit counter: 52 (Beta Candidate) */
(function(n,t,i){"use strict";function f(n){return r(n)?new k(n):new b(n)}function b(n){return this._data=n,this}function k(n){return this._data=n,this}function ht(n){return r(n)?[n]:n}function it(n,t){n=r(n)?n:[n];for(var i,e=t,o=e,h=n.length,f=[],s=0;s<h;s++){if(i=n[s],u(i)){f=f.concat(it(i.call(t,t),t));continue}else if(""+i!==i){t=o=i;o!==e&&f.push(e=o);continue}o!==e&&f.push(e=o);f.push(i)}return f}function rt(n,t){var r,i;for(r in n){i=!0;break}i||delete y[t]}function d(n,t){if(!(n.data&&n.data.off)){var v,y,p,f=t.oldValue,o=t.value,u=n.data,l=u.observeAll,h=!u.cb.noArray,c=u.paths;n.type===a?(u.cb.array||u.cb).call(u,n,t):(u.prop===t.path||u.prop==="*")&&(f=typeof f===s&&(c[0]||h&&r(f))&&f,o=typeof(o=t.value)===s&&(c[0]||h&&r(o))&&o,l?(v=l._path+"."+t.path,y=l.filter,p=[l.parents().slice(0)],f&&e(h,[f],c,u.cb,!0,y,p,v),o&&e(h,[o],c,u.cb,i,y,p,v)):(f&&e(h,[f],c,u.cb,!0),o&&e(h,[o],c,u.cb)),u.cb(n,t))}}function v(){function bt(i,r,u,f){var e,s,y=tt(n),p=ht(n);if(b||f)y&&t(p).off(i,d);else{if(l=y&&t._data(n))for(l=l&&l.events,l=l&&l[u?a:c],wt=l&&l.length;wt--;)if((ft=l[wt].data)&&ft.cb._cId===h._cId){if(u)return;(r==="*"&&ft.prop!==r||ft.prop===v)&&t(n).off(i,d)}s=u?{cb:h}:{fullPath:o,paths:r?[r]:[],prop:v,cb:h};et&&(s.observeAll={_path:et,path:function(){return e=ni.length,et.replace(/[[.]/g,function(n){return e--,n==="["?"["+t.inArray(ni[e-1],ni[e]):"."})},parents:function(){return ni},filter:ui});t(p).on(i,null,s,d);dt&&(dt[t.data(n,"obId")||t.data(n,"obId",st++)]=n)}}function hi(n,t){n._ob=ct(n,pt);var i=pt;return function(u,f){var o=n._ob,c=t.length;typeof o===s&&(kt(o,!0),(c||lt&&r(o))&&e(lt,[o],t,h,ct,!0));o=n._ob=ct(n,i);typeof o===s&&(kt(o),(c||lt&&r(o))&&e(lt,[o],t,h,ct,[i]));h(u,f)}}function kt(t,u,e,o){if(lt){var s=n,c=et;n=t;o&&(n=t[o],et+="."+o,ui&&(n=f._fltr(o,t,et,ui)));n&&(e||r(n))&&bt(a+".observe"+(h?".obs"+(yt=h._cId=h._cId||w++):""),i,!0,u);n=s;et=c}}var vt,ii,fi,ut,v,o,ri,b,h,yt,wt,ft,l,ct,ei,dt,gt,oi,ni,et,ui,lt=this!=!1,si=1,ti=ot,k=Array.apply(0,arguments),g=k.pop(),pt=k.shift(),at=pt,n=at,nt=k.length;for(u(g)?h=g:(g+""===g&&(et=g,ni=k.pop(),ui=k.pop(),g=k.pop(),nt=nt-3),g===!0?b=g:g&&(pt=g,si=0),g=k[nt-1],(nt&&g===i||u(g))&&(h=k.pop(),nt--)),nt&&u(k[nt-1])&&(ct=h,h=k.pop(),nt--),ti+=b?h?".obs"+h._cId:"":".obs"+(yt=h._cId=h._cId||w++),b||(dt=y[yt]=y[yt]||{}),r(at)?kt(at,b,!0):b&&nt===0&&at&&bt(ti,""),gt=0,vt=0;vt<nt;vt++)if(o=k[vt],o!==""){if(n=at,""+o===o){if(ut=o.split("^"),ut[1]&&(gt=ut[0].split(".").length,o=ut.join("."),gt=o.split(".").length-gt),ct&&(ei=ct(o,at))){nt+=ei.length-1;p.apply(k,[vt--,1].concat(ei));continue}ut=o.split(".")}else si&&!u(o)&&(o._jsvOb&&(b||(o._cb=oi=hi(o,k.slice(vt+1)),oi.noArray=lt===!1,o._rt=pt,oi._cId=h._cId),e(lt,[o._rt],k.slice(0,vt),o._cb,ct,b),o=o._ob),n=o),at=o,ut=[at];while(n&&(v=ut.shift())!==i)if(typeof n===s){if(""+v===v){if(v==="")continue;if(ut.length<gt+1&&!n.nodeType){if(!b&&(l=tt(n)&&t._data(n))){for(l=l.events,l=l&&l[c],wt=l&&l.length,fi=0;wt--;)ft=l[wt].data,ft&&ft.cb===h&&(ft.prop===v||ft.prop==="*")&&((ii=ut.join("."))&&ft.paths.push(ii),fi++);if(fi){n=n[v];continue}}if(v==="*"){!b&&l&&l.length&&bt(ti,"",!1,!0);u(n)?(ri=n.depends)&&e(lt,[ri],h,b||pt):bt(ti,"");for(ii in n)kt(n,b,i,ii);break}else v&&bt(ti+"."+v,ut.join("."))}et&&(et+="."+v);v=n[v]}if(u(v)){(ri=v.depends)&&e(lt,[n],it(ri,n),h,ct,b||[pt]);break}n=v}kt(n,b)}return yt&&rt(dt,yt),{cbId:yt,bnd:dt,leaf:n}}function ct(){return[].push.call(arguments,!0),v.apply(this,arguments)}function e(){var n=[].concat.apply([],arguments);return v.apply(n.shift(),n)}function ut(n,t,i){return i.indexOf(".")<0&&i.indexOf("[")<0&&t[n]}function lt(n,r,u,f,e){return f=f||ut,e=e||ut,{getTgt:n,obsSrc:r,obsTgt:u,map:function(i){var o=this,h,c;return o.src!==i&&(o.src&&o.unmap(),typeof i===s&&(c=n.apply(o,arguments),t.observable&&(t.observable(i).observeAll(o.obs=function(n,t){!h&&r&&(h=!0,r.call(o,i,c,n,t),h=!1)},f),t.observable(c).observeAll(o.obt=function(n,t){!h&&u&&(h=!0,u.call(o,i,c,n,t),h=!1)},e)),o.src=i,o.tgt=c)),o},unmap:function(){if(t.observable){var n=this;n.src&&(t.observable(n.src).unobserveAll(n.obs,f),t.observable(n.tgt).unobserveAll(n.obt,e),n.src=n.tgt=i)}}}}function ft(n,t){l(this._data,n,t,[],"root")}function et(n,t){l(this._data,n,t,[],"root",!0)}function l(n,t,u,e,o,h){function y(n,i){for(a=n.length,c=o+"[]";a--;)(b=f._fltr(a,n,c,u))&&l(b,t,u||"",e.slice(0),c,i)}function k(n,i){o=n.data.observeAll._path;var r=e;e[0]!==n.target&&(e=e.slice(0),e.unshift(n.target));switch(i.change){case"insert":y(i.items);break;case"remove":y(i.items,!0);break;case"refresh":y(i.oldItems,!0);y(n.target);break;case"set":c=o+"."+i.path;l(i.oldValue,t,0,e.slice(0),c,!0);l(i.value,t,0,e.slice(0),c)}t.apply(this,arguments);e=r}var a,p,c,b;if(typeof n===s)if(p=r(n)?"":"*",e.unshift(n),t?(p||u!==0)&&(k._cId=t._cId=t._cId||w++,v(n,p,k,h,u,e.slice(),o)):v(n,p,i,h,u,e.slice(),o),p)for(a in n)a.charAt(0)!=="_"&&a!==nt&&(c=o+"."+a,(b=f._fltr(a,n,c,u))&&l(b,t,u||0,e.slice(0),c,h));else y(n,h)}if(!t)throw"jsViews/jsObservable require jQuery";if(!t.observable){var g=t.event.special,o=t.views?t.views.sub:f.sub={},p=[].splice,r=t.isArray,nt=t.expando,s="object",h=parseInt,c=o.propChng=o.propChng||"propertyChange",a=o.arrChng=o.arrChng||"arrayChange",y=o._cbBnds=o._cbBnds||{},ot=c+".observe",u=t.isFunction,st=1,w=1,tt=t.hasData;o.getDeps=function(){var n=arguments;return function(){for(var i,t,r=[],f=n.length;f--;)i=n[f--],t=n[f],t&&(r=r.concat(u(t)?t(i,i):t));return r}};o.DataMap=lt;t.observable=f;f._fltr=function(n,t,i,r){var f=r&&u(r)?r(n,t,i):t[n];return f&&(f=u(f)?f.set&&f.call(t):f),typeof f===s&&f};f.Object=b;f.Array=k;t.observe=f.observe=v;t.unobserve=f.unobserve=ct;f._apply=e;b.prototype={_data:null,observeAll:ft,unobserveAll:et,data:function(){return this._data},setProperty:function(n,t,u){var f,h,s,e=this,o=e._data;if(n=n||"",o)if(r(n))for(f=n.length;f--;)h=n[f],e.setProperty(h.name,h.value,u===i||u);else if(""+n!==n)for(f in n)e.setProperty(f,n[f],t);else if(n!==nt){for(s=n.split(".");o&&s.length>1;)o=o[s.shift()];e._setProperty(o,s.join("."),t,u)}return e},_setProperty:function(n,t,i,r){var e,o,f=t?n[t]:n;u(f)&&f.set&&(o=f,e=f.set===!0?f:f.set,f=f.call(n));(f!==i||r&&f!=i)&&(!(f instanceof Date)||f>i||f<i)&&(e?(e.call(n,i),i=o.call(n)):t&&(n[t]=i),this._trigger(n,{change:"set",path:t,value:i,oldValue:f}))},_trigger:function(n,i){t(n).triggerHandler(c,i)}};k.prototype={_data:null,observeAll:ft,unobserveAll:et,data:function(){return this._data},insert:function(n,t){var i=this._data;return arguments.length===1&&(t=n,n=i.length),n=h(n),n>-1&&n<=i.length&&(t=r(t)?t:[t],t.length&&this._insert(n,t)),this},_insert:function(n,t){var i=this._data,r=i.length;p.apply(i,[n,0].concat(t));this._trigger({change:"insert",index:n,items:t},r)},remove:function(n,t){var r,u=this._data;return n===i&&(n=u.length-1),n=h(n),t=t?h(t):t===0?0:1,t>-1&&n>-1&&(r=u.slice(n,n+t),t=r.length,t&&this._remove(n,t,r)),this},_remove:function(n,t,i){var r=this._data,u=r.length;r.splice(n,t);this._trigger({change:"remove",index:n,items:i},u)},move:function(n,t,i){if(i=i?h(i):i===0?0:1,n=h(n),t=h(t),i>0&&n>-1&&t>-1&&n!==t){var r=this._data.slice(n,n+i);i=r.length;i&&this._move(n,t,i,r)}return this},_move:function(n,t,i,r){var u=this._data,f=u.length;u.splice(n,i);u.splice.apply(u,[t,0].concat(r));this._trigger({change:"move",oldIndex:n,index:t,items:r},f)},refresh:function(n){var t=this._data.slice(0);return this._refresh(t,n),this},_refresh:function(n,t){var i=this._data,r=i.length;p.apply(i,[0,i.length].concat(t));this._trigger({change:"refresh",oldItems:n},r)},_trigger:function(n,i){var r=this._data,u=r.length,f=t([r]);f.triggerHandler(a,n);u!==i&&f.triggerHandler(c,{change:"set",path:"length",value:u,oldValue:i})}};g[c]=g[a]={remove:function(n){var r,u,f,e,o,i=n.data;if(i&&(i.off=1,i=i.cb)&&(r=y[i._cId])){for(f=t._data(this).events[n.type],e=f.length;e--&&!u;)u=(o=f[e].data)&&o.cb===i;u||(delete r[t.data(this,"obId")],rt(r,i._cId))}}}}})(this,this.jQuery);
/*
//# sourceMappingURL=jquery.observable.min.js.map
*/