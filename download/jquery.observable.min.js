/*! JsObservable v1.0.0-alpha: http://github.com/BorisMoore/jsviews and http://jsviews.com/jsviews
informal pre V1.0 commit counter: 60 (Beta Candidate) */
(function(n,t,i){"use strict";function r(n){return u(n)?new b(n):new w(n)}function w(n){return this._data=n,this}function b(n){return this._data=n,this}function at(n){return u(n)?[n]:n}function ut(n,t){n=u(n)?n:[n];for(var i,e=t,o=e,h=n.length,r=[],s=0;s<h;s++){if(i=n[s],f(i)){r=r.concat(ut(i.call(t,t),t));continue}else if(""+i!==i){t=o=i;o!==e&&r.push(e=o);continue}o!==e&&r.push(e=o);r.push(i)}return r}function ft(n,t){var r,i;for(r in n){i=!0;break}i||delete a[t]}function k(n,t){if(!(n.data&&n.data.off)){var v,y,p,w,b,c=t.oldValue,a=t.value,r=n.data,f=r.observeAll,o=!r.cb.noArray,h=r.paths;n.type===l?(r.cb.array||r.cb).call(r,n,t):(r.prop===t.path||r.prop==="*")&&(w=typeof c===s&&(h[0]||o&&u(c)),b=typeof a===s&&(h[0]||o&&u(a)),f?(v=f._path+"."+t.path,y=f.filter,p=[n.target].concat(f.parents()),w&&e(o,f.ns,[c],h,r.cb,!0,y,[p],v),b&&e(o,f.ns,[a],h,r.cb,i,y,[p],v)):(w&&e(o,[c],h,r.cb,!0),b&&e(o,[a],h,r.cb)),r.cb(n,t))}}function v(){function gt(i,r,u,f){var s,e,y=it(n),p=at(n);if(i=st?i+"."+st:i,g||f)y&&t(p).off(i,k);else{if(h=y&&t._data(n))for(h=h&&h.events,h=h&&h[u?l:c],dt=h&&h.length;dt--;)if((nt=h[dt].data)&&nt.cb._cId===o._cId&&nt.ns===st){if(u)return;(r==="*"&&nt.prop!==r||nt.prop===w)&&t(n).off(i,k)}e=u?{}:{fullPath:v,paths:r?[r]:[],prop:w};e.ns=st;e.cb=o;ot&&(e.observeAll={_path:ot,path:function(){return s=kt.length,ot.replace(/[[.]/g,function(n){return s--,n==="["?"["+t.inArray(kt[s-1],kt[s]):"."})},parents:function(){return kt},filter:oi,ns:st});t(p).on(i,null,e,k);ti&&((a[o._cId]=ti)[t.data(n,"obId")||t.data(n,"obId",lt++)]=n)}}function vi(n,t){n._ob=yt(n,rt);var i=rt;return function(r,f){var h=n._ob,c=t.length;typeof h===s&&(ni(h,!0),(c||vt&&u(h))&&e(vt,[h],t,o,yt,!0));h=n._ob=yt(n,i);typeof h===s&&(ni(h),(c||vt&&u(h))&&e(vt,[h],t,o,yt,[i]));o(r,f)}}function ni(t,f,e,s){if(vt){var h=n,c=ot;n=t;s&&(n=t[s],ot+="."+s);oi&&n&&(n=r._fltr(ot,n,s?[t].concat(kt):kt,oi));n&&(e||u(n))&&gt(l+".observe"+(o?".obs"+(bt=o._cId=o._cId||p++):""),i,!0,f);n=h;ot=c}}var wt,fi,si,et,w,v,ei,g,o,bt,dt,nt,h,yt,hi,ti,ii,ri,kt,ot,oi,st,ci,li,vt=this!=!1,ai=!0,ui=ct,b=Array.apply(0,arguments),d=b.pop(),rt=b.shift(),pt=rt,n=pt,tt=b.length;for(rt+""===rt&&vt&&(st=rt,rt=n=pt=b.shift(),tt--),f(d)?o=d:(d+""===d&&(ot=d,kt=b.pop(),oi=b.pop(),d=b.pop(),tt=tt-3),d===!0?g=d:d&&(rt=d,ai=i),d=b[tt-1],(tt&&d===i||f(d))&&(o=b.pop(),tt--)),tt&&f(b[tt-1])&&(yt=o,o=b.pop(),tt--),ui+=g?o?".obs"+o._cId:"":".obs"+(bt=o._cId=o._cId||p++),g||(ti=a[bt]=a[bt]||{}),ci=st&&st.match(ht)||[""],li=ci.length;li--;)for(st=ci[li],u(pt)?ni(pt,g,!0):g&&tt===0&&pt&&gt(ui,""),ii=0,wt=0;wt<tt;wt++)if(v=b[wt],v!==""){if(n=pt,""+v===v){if(et=v.split("^"),et[1]&&(ii=et[0].split(".").length,v=et.join("."),ii=v.split(".").length-ii),yt&&(hi=yt(v,pt))){tt+=hi.length-1;y.apply(b,[wt--,1].concat(hi));continue}et=v.split(".")}else ai&&!f(v)&&(v&&v._jsvOb&&(ri=vi(v,b.slice(wt+1)),ri.noArray=!vt,ri._cId=o._cId,e(vt,[rt],b.slice(0,wt),ri,yt),ri=i,v=v._ob),n=v),pt=v,et=[pt];while(n&&(w=et.shift())!==i)if(typeof n===s){if(""+w===w){if(w==="")continue;if(et.length<ii+1&&!n.nodeType){if(!g&&(h=it(n)&&t._data(n))){for(h=h.events,h=h&&h[c],dt=h&&h.length,si=0;dt--;)nt=h[dt].data,nt&&nt.cb===o&&nt.ns===st&&(nt.prop===w||nt.prop==="*")&&((fi=et.join("."))&&nt.paths.push(fi),si++);if(si){n=n[w];continue}}if(w==="*"){!g&&h&&h.length&&gt(ui,"",!1,!0);f(n)?(ei=n.depends)&&e(vt,[ei],o,g||rt):gt(ui,"");for(fi in n)ni(n,g,i,fi);break}else w&&gt(ui+"."+w,et.join("^"))}ot&&(ot+="."+w);w=n[w]}if(f(w)){(ei=w.depends)&&e(vt,[n],ut(ei,n),o,yt,g||[rt]);break}n=w}ni(n,g)}return bt&&ft(ti,bt),{cbId:bt,bnd:ti}}function vt(){return[].push.call(arguments,!0),v.apply(this,arguments)}function e(){var n=[].concat.apply([],arguments);return v.apply(n.shift(),n)}function d(n,t,i,r){n+""!==n&&(i=t,t=n,n="");ot(n,this._data,t,i,[],"root",r)}function et(n,t,i){d.call(this,n,t,i,!0)}function ot(n,t,f,e,o,h,c){function y(n,t){for(l=n.length,a=[[n]].concat(a),b=h+"[]";l--;)k(n,l,t,1)}function k(t,u,o,s){var h;u!==tt&&(h=r._fltr(b,t[u],a,e))&&ot(n,h,f,e||(s?i:0),a.slice(),b,o)}function d(n,t){var i=o;h=n.data.observeAll._path;a=[n.target].concat(o);switch(t.change){case"insert":y(t.items);break;case"remove":y(t.items,!0);break;case"refresh":y(t.oldItems,!0);y(n.target);break;case"set":b=h+"."+t.path;k(t,"oldValue",!0);k(t,"value")}f.apply(this,arguments);o=i}var l,w,b,a;if(typeof t===s)if(w=u(t)?"":"*",f?(w||e!==0)&&(d._cId=f._cId=f._cId||p++,v(n,t,w,d,c,e,o,h)):v(n,t,w,i,c,e,o,h),w){a=[t].concat(o);for(l in t)b=h+"."+l,k(t,l,c)}else y(t,c)}function st(n){return n.indexOf(".")<0&&n.indexOf("[")<0}if(!t)throw"jsViews/jsObservable require jQuery";if(!t.observable){var g=t.views=t.views||{jsviews:"v1.0.0-alpha",sub:{}},o=g.sub,nt=t.event.special,y=[].splice,u=t.isArray,tt=t.expando,s="object",h=parseInt,ht=/\S+/g,c=o.propChng=o.propChng||"propertyChange",l=o.arrChng=o.arrChng||"arrayChange",a=o._cbBnds=o._cbBnds||{},ct=c+".observe",f=t.isFunction,lt=1,p=1,it=t.hasData,rt={};o.getDeps=function(){var n=arguments;return function(){for(var i,t,r=[],u=n.length;u--;)i=n[u--],t=n[u],t&&(r=r.concat(f(t)?t(i,i):t));return r}};t.observable=r;r._fltr=function(n,t,i,r){if(r&&f(r)?r(n,t,i):!0)return t=f(t)?t.set&&t.call(i[0]):t,typeof t===s&&t};r.Object=w;r.Array=b;t.observe=r.observe=v;t.unobserve=r.unobserve=vt;r._apply=e;w.prototype={_data:null,observeAll:d,unobserveAll:et,data:function(){return this._data},setProperty:function(n,t,r){var f,h,s,o=this,e=o._data;if(n=n||"",e)if(u(n))for(f=n.length;f--;)h=n[f],o.setProperty(h.name,h.value,r===i||r);else if(""+n!==n)for(f in n)o.setProperty(f,n[f],t);else if(n!==tt){for(s=n.split(".");e&&s.length>1;)e=e[s.shift()];e&&o._setProperty(e,s[0],t,r)}return o},removeProperty:function(n){return this.setProperty(n,rt),this},_setProperty:function(n,t,r,u){var o,s,h,e=t?n[t]:n;f(e)&&e.set&&(s=e,o=e.set===!0?e:e.set,e=e.call(n));(e!==r||u&&e!=r)&&(!(e instanceof Date)||e>r||e<r)&&(o?(o.call(n,r),r=s.call(n)):(h=r===rt)?(delete n[t],r=i):t&&(n[t]=r),this._trigger(n,{change:"set",path:t,value:r,oldValue:e,remove:h}))},_trigger:function(n,i){t(n).triggerHandler(c,i)}};b.prototype={_data:null,observeAll:d,unobserveAll:et,data:function(){return this._data},insert:function(n,t){var i=this._data;return arguments.length===1&&(t=n,n=i.length),n=h(n),n>-1&&n<=i.length&&(t=u(t)?t:[t],t.length&&this._insert(n,t)),this},_insert:function(n,t){var i=this._data,r=i.length;y.apply(i,[n,0].concat(t));this._trigger({change:"insert",index:n,items:t},r)},remove:function(n,t){var r,u=this._data;return n===i&&(n=u.length-1),n=h(n),t=t?h(t):t===0?0:1,t>-1&&n>-1&&(r=u.slice(n,n+t),t=r.length,t&&this._remove(n,t,r)),this},_remove:function(n,t,i){var r=this._data,u=r.length;r.splice(n,t);this._trigger({change:"remove",index:n,items:i},u)},move:function(n,t,i){if(i=i?h(i):i===0?0:1,n=h(n),t=h(t),i>0&&n>-1&&t>-1&&n!==t){var r=this._data.slice(n,n+i);i=r.length;i&&this._move(n,t,i,r)}return this},_move:function(n,t,i,r){var u=this._data,f=u.length;u.splice(n,i);u.splice.apply(u,[t,0].concat(r));this._trigger({change:"move",oldIndex:n,index:t,items:r},f)},refresh:function(n){var t=this._data.slice();return this._refresh(t,n),this},_refresh:function(n,t){var i=this._data,r=i.length;y.apply(i,[0,i.length].concat(t));this._trigger({change:"refresh",oldItems:n},r)},_trigger:function(n,i){var r=this._data,u=r.length,f=t([r]);f.triggerHandler(l,n);u!==i&&f.triggerHandler(c,{change:"set",path:"length",value:u,oldValue:i})}};nt[c]=nt[l]={remove:function(n){var r,u,f,e,o,i=n.data;if(i&&(i.off=!0,i=i.cb)&&(r=a[i._cId])){for(f=t._data(this).events[n.type],e=f.length;e--&&!u;)u=(o=f[e].data)&&o.cb===i;u||(delete r[t.data(this,"obId")],ft(r,i._cId))}}};g.map=function(n){function u(t,u,f){var o,e=this;this.src&&this.unmap();typeof t=="object"&&(e.src=t,e.tgt=f||e.tgt||[],e.options=u||e.options,e.update(),n.obsSrc&&r(e.src).observeAll(e.obs=function(t,r){o||(o=!0,n.obsSrc(e,t,r),o=i)},e.srcFlt),n.obsTgt&&r(e.tgt).observeAll(e.obt=function(t,r){o||(o=!0,n.obsTgt(e,t,r),o=i)},e.tgtFlt))}return f(n)&&(n={getTgt:n}),n.baseMap&&(n=t.extend({},n.baseMap,n)),n.map=function(n,t,i){return new u(n,t,i)},(u.prototype={srcFlt:n.srcFlt||st,tgtFlt:n.tgtFlt||st,update:function(t){var i=this;r(i.tgt).refresh(n.getTgt(i.src,i.options=t||i.options))},unmap:function(){var n=this;n.src&&(n.obs&&r(n.src).unobserveAll(n.obs,n.srcFlt),n.obt&&r(n.tgt).unobserveAll(n.obt,n.tgtFlt),n.src=i)},map:u,_def:n}).constructor=u,n}}})(this,this.jQuery);
/*
//# sourceMappingURL=jquery.observable.min.js.map
*/