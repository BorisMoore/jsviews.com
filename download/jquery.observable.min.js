/*! JsObservable v1.0.0-alpha: http://github.com/BorisMoore/jsviews and http://jsviews.com/jsviews
informal pre V1.0 commit counter: 48 (Beta Candidate) */
(function(n,t,i){"use strict";function f(n){return r(n)?new d(n):new k(n)}function k(n){return this._data=n,this}function d(n){return this._data=n,this}function lt(n){return r(n)?[n]:n}function ut(n,t){n=r(n)?n:[n];for(var i,e=t,o=e,h=n.length,f=[],s=0;s<h;s++){if(i=n[s],u(i)){f=f.concat(ut(i.call(t,t),t));continue}else if(""+i!==i){t=o=i;o!==e&&f.push(e=o);continue}o!==e&&f.push(e=o);f.push(i)}return f}function ft(n,t){var r,i;for(r in n){i=!0;break}i||delete p[t]}function g(n,t){if(!(n.data&&n.data.off)){var u=t.oldValue,i=n.data,f=!i.cb.noArray,e=i.paths;n.type===v?(i.cb.array||i.cb).call(i,n,t):(i.prop===t.path||i.prop==="*")&&(typeof u===c&&(e[0]||f&&r(u))&&s(f,[u],e,i.cb,!0),typeof(u=t.value)===c&&(e[0]||f&&r(u))&&s(f,[u],e,i.cb),i.cb(n,t))}}function y(){function kt(i,r,u,f){var s,c=rt(n),p=lt(n);if(o=0,k||f)c&&(t(p).off(i,g),o&&delete o[t.data(n,"obId")]);else{if(l=c&&t._data(n))for(l=l&&l.events,l=l&&l[u?v:a],bt=l&&l.length;bt--;)if((et=l[bt].data)&&et.cb._cId===h._cId){if(u)return;(r==="*"&&et.prop!==r||et.prop===y)&&(t(n).off(i,g),o&&delete o[t.data(n,"obId")])}s=u?{cb:h}:{fullPath:e,paths:r?[r]:[],prop:y,cb:h};st&&(s.allPath=st);t(p).on(i,null,s,g);gt&&(gt[t.data(n,"obId")||t.data(n,"obId",ct++)]=n)}}function hi(n,t){n._ob=ot(n,wt);var i=wt;return function(u,f){var e=n._ob,o=t.length;typeof e===c&&(dt(e,!0),(o||at&&r(e))&&s(at,[e],t,h,ot,!0));e=n._ob=ot(n,i);typeof e===c&&(dt(e),(o||at&&r(e))&&s(at,[e],t,h,ot,[i]));h(u,f)}}function dt(t,u,e,o,s){if(at){var c=n,l=st;n=t;o&&(n=t[o],st+="."+o,s&&(n=f._fltr(o,t,st,s)));n&&(e||r(n))&&kt(v+".observe"+(h?".obs"+(pt=h._cId=h._cId||b++):""),i,!0,u);n=c;st=l}}var yt,ii,ui,it,y,e,ri,k,h,pt,bt,et,l,ot,fi,gt,ni,ei,st,oi,at=this!==!1,si=1,ti=ht,d=Array.apply(0,arguments),nt=d.pop(),wt=d.shift(),vt=wt,n=vt,tt=d.length;for(u(nt)?h=nt:(nt+""===nt&&(st=nt,oi=d.pop(),nt=d.pop(),tt=tt-2),nt===!0?k=nt:nt&&(wt=nt,si=0),nt=d[tt-1],(tt&&nt===i||u(nt))&&(h=d.pop(),tt--)),tt&&u(d[tt-1])&&(ot=h,h=d.pop(),tt--),ti+=k?h?".obs"+h._cId:"":".obs"+(pt=h._cId=h._cId||b++),k||(gt=p[pt]=p[pt]||{}),r(vt)?dt(vt,k,!0):k&&tt===0&&vt&&kt(ti,""),ni=0,yt=0;yt<tt;yt++)if(e=d[yt],e!==""){if(n=vt,""+e===e){if(it=e.split("^"),it[1]&&(ni=it[0].split(".").length,e=it.join("."),ni=e.split(".").length-ni),ot&&(fi=ot(e,vt))){tt+=fi.length-1;w.apply(d,[yt--,1].concat(fi));continue}it=e.split(".")}else si&&!u(e)&&(e._jsvOb&&(k||(e._cb=ei=hi(e,d.slice(yt+1)),ei.noArray=at===!1,e._rt=wt,ei._cId=h._cId),s(at,[e._rt],d.slice(0,yt),e._cb,ot,k),e=e._ob),n=e),vt=e,it=[vt];while(n&&(y=it.shift())!==i)if(typeof n===c){if(""+y===y){if(y==="")continue;if(it.length<ni+1&&!n.nodeType){if(!k&&(l=rt(n)&&t._data(n))){for(l=l.events,l=l&&l[a],bt=l&&l.length,ui=0;bt--;)et=l[bt].data,et&&et.cb===h&&(et.prop===y||et.prop==="*")&&((ii=it.join("."))&&et.paths.push(ii),ui++);if(ui){n=n[y];continue}}if(y==="*"){!k&&l&&l.length&&kt(ti,"",!1,!0);u(n)?(ri=n.depends)&&s(at,[ri],h,k||wt):kt(ti,"");for(ii in n)dt(n,k,i,ii,oi);break}else y&&kt(ti+"."+y,it.join("."))}st&&(st+="."+y);y=n[y]}if(u(y)){(ri=y.depends)&&s(at,[n],ut(ri,n),h,ot,k||[wt]);break}n=y}dt(n,k)}return pt&&ft(gt,pt),{cbId:pt,bnd:gt,leaf:n}}function at(){return[].push.call(arguments,!0),y.apply(this,arguments)}function s(){var n=[].concat.apply([],arguments);return y.apply(n.shift(),n)}function et(n,t,i){return i.indexOf(".")<0&&i.indexOf("[")<0&&t[n]}function vt(n,r,u,f,e){return f=f||et,e=e||et,{getTgt:n,obsSrc:r,obsTgt:u,map:function(i){var o=this,s,h;return o.src!==i&&(o.src&&o.unmap(),typeof i=="object"&&(h=n.apply(o,arguments),t.observable&&(t.observable(i).observeAll(o.obs=function(n,t){!s&&r&&(s=!0,r.call(o,i,h,n,t),s=!1)},f),t.observable(h).observeAll(o.obt=function(n,t){!s&&u&&(s=!0,u.call(o,i,h,n,t),s=!1)},e)),o.src=i,o.tgt=h)),o},unmap:function(){if(t.observable){var n=this;n.src&&(t.observable(n.src).unobserveAll(n.obs,f),t.observable(n.tgt).unobserveAll(n.obt,e),n.src=n.tgt=i)}}}}function ot(n,t){e(this._data,n,t,"root")}function st(n,t){e(this._data,n,t,"root",!0)}function e(n,t,u,o,s){function p(n,i){o=n.data.allPath;switch(i.change){case"insert":e(i.items,t,0,o);break;case"remove":e(i.items,t,0,o,!0);break;case"refresh":e(i.oldItems,t,0,o,!0);e(n.target,t,0,o);break;case"set":e(i.oldValue,t,0,o,!0);e(i.value,t,0,o)}t.apply(this,arguments)}var h,a,l,v;if(typeof n===c)if(a=r(n)?"":"*",t?(a||u!==0)&&(p._cId=t._cId=t._cId||b++,y(n,a,p,s,u,o)):y(n,a,i,s,u,o),a)for(h in n)h.charAt(0)!=="_"&&h!==it&&(l=o+"."+h,(v=f._fltr(h,n,l,u))&&e(v,t,u||0,l,s));else for(h=n.length,l=o+"[]";h--;)(v=f._fltr(h,n,l,u))&&e(v,t,u||"",l,s)}if(!t)throw"requires jQuery or JsRender";if(!t.observable){var o,nt,tt=t.event.special,h=t.views?t.views.sub:{},w=[].splice,r=t.isArray,it=t.expando,c="object",l=parseInt,a=h.propChng=h.propChng||"propertyChange",v=h.arrChng=h.arrChng||"arrayChange",p=h._cbBnds=h._cbBnds||{},ht=a+".observe",u=t.isFunction,ct=1,b=1,rt=t.hasData;t.views.sub.DataMap=vt;t.observable=f;f._fltr=function(n,t,i,r){var f=r&&u(r)?r(n,t,i):t[n];return f&&(u(f)?f.set&&f.call(t):f)};f.Object=k;f.Array=d;t.observe=f.observe=y;t.unobserve=f.unobserve=at;f._apply=s;k.prototype={_data:null,observeAll:ot,unobserveAll:st,data:function(){return this._data},setProperty:function(n,t,u){var f,h,s,e=this,o=e._data;if(n=n||"",o)if(r(n))for(f=n.length;f--;)h=n[f],e.setProperty(h.name,h.value,u===i||u);else if(""+n!==n)for(f in n)e.setProperty(f,n[f],t);else if(n!==it){for(s=n.split(".");o&&s.length>1;)o=o[s.shift()];e._setProperty(o,s.join("."),t,u)}return e},_setProperty:function(n,t,i,r){var e,o,f=t?n[t]:n;u(f)&&f.set&&(o=f,e=f.set===!0?f:f.set,f=f.call(n));(f!==i||r&&f!=i)&&(!(f instanceof Date)||f>i||f<i)&&(e?(e.call(n,i),i=o.call(n)):t&&(n[t]=i),this._trigger(n,{change:"set",path:t,value:i,oldValue:f}))},_trigger:function(n,i){t(n).triggerHandler(a,i)}};d.prototype={_data:null,observeAll:ot,unobserveAll:st,data:function(){return this._data},insert:function(n,t){var i=this._data;return arguments.length===1&&(t=n,n=i.length),n=l(n),n>-1&&n<=i.length&&(t=r(t)?t:[t],t.length&&this._insert(n,t)),this},_insert:function(n,t){var i=this._data,r=i.length;w.apply(i,[n,0].concat(t));this._trigger({change:"insert",index:n,items:t},r)},remove:function(n,t){var r,u=this._data;return n===i&&(n=u.length-1),n=l(n),t=t?l(t):t===0?0:1,t>-1&&n>-1&&(r=u.slice(n,n+t),t=r.length,t&&this._remove(n,t,r)),this},_remove:function(n,t,i){var r=this._data,u=r.length;r.splice(n,t);this._trigger({change:"remove",index:n,items:i},u)},move:function(n,t,i){if(i=i?l(i):i===0?0:1,n=l(n),t=l(t),i>0&&n>-1&&t>-1&&n!==t){var r=this._data.slice(n,n+i);i=r.length;i&&this._move(n,t,i,r)}return this},_move:function(n,t,i,r){var u=this._data,f=u.length;u.splice(n,i);u.splice.apply(u,[t,0].concat(r));this._trigger({change:"move",oldIndex:n,index:t,items:r},f)},refresh:function(n){var t=this._data.slice(0);return this._refresh(t,n),this},_refresh:function(n,t){var i=this._data,r=i.length;w.apply(i,[0,i.length].concat(t));this._trigger({change:"refresh",oldItems:n},r)},_trigger:function(n,i){var r=this._data,u=r.length,f=t([r]);f.triggerHandler(v,n);u!==i&&f.triggerHandler(a,{change:"set",path:"length",value:u,oldValue:i})}};tt[a]=tt[v]={remove:function(n){(n=n.data)&&(n.off=1,n=n.cb)&&(o=p[nt=n._cId])},teardown:function(){o&&(delete o[t.data(this,"obId")],ft(o,nt))}}}})(this,this.jQuery||this.jsviews);
/*
//# sourceMappingURL=jquery.observable.min.js.map
*/