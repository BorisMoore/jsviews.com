/*! JsObservable v0.9.72 (Beta): http://jsviews.com/#jsobservable */
!function(t){var e=(0,eval)("this"),n=e.jQuery;"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=n?t(n):function(e){return t(e)}:t(!1)}(function(t){"use strict";var e=(0,eval)("this"),n=t===!1;if(t=t||e.jQuery,!t||!t.fn)throw"JsObservable requires jQuery";var r,i,o="v0.9.72",a=t.views=t.views||n&&e.jsrender&&jsrender.views||{jsviews:o,sub:{}},s=a.sub,c=t.isFunction,l=t.isArray,u="object";if(!t.observe){var f=t.event.special,p=[].slice,h=[].splice,d=[].concat,v=t.expando,g=parseInt,b=/\S+/g,_=s.propChng=s.propChng||"propertyChange",y=s.arrChng=s.arrChng||"arrayChange",m=s._cbBnds=s._cbBnds||{},I=_+".observe",A=1,j=1,w=1,x=t.hasData,F=t.data,P={},C=function(t){return t._cId=t._cId||".obs"+j++},k=function(t){return this._data=t,this},T=function(t){return this._data=t,this},O=function(t){return l(t)?[t]:t},V=function(t,e,n){t=t?l(t)?t:[t]:[];var r,i,o=e,a=o,s=t&&t.length,u=[];for(r=0;s>r;r++)i=t[r],c(i)?u=u.concat(V(i.call(e,e,n),e)):""+i===i?(a!==o&&u.push(o=a),u.push(i)):(e=a=i,a!==o&&u.push(o=a));return u},D=function(t,e){for(var n in t)return;m[e]=void 0},H=function(t,e){function n(t){return typeof t===u&&(h[0]||p&&l(t))}if(!t.data||!t.data.off){var r,i,o,a=e.oldValue,s=e.value,c=t.data,f=c.observeAll,p=!c.cb.noArray,h=c.paths;t.type===y?(c.cb.array||c.cb).call(c,t,e):(c.prop===e.path||"*"===c.prop)&&(f?(r=f._path+"."+e.path,i=f.filter,o=[t.target].concat(f.parents()),n(a)&&Q(p,f.ns,[a],h,c.cb,!0,i,[o],r),n(s)&&Q(p,f.ns,[s],h,c.cb,void 0,i,[o],r)):(n(a)&&Q(p,[a],h,c.cb,!0),n(s)&&Q(p,[s],h,c.cb)),c.cb(t,e))}},Q=function(){var t=d.apply([],arguments);return r.apply(t.shift(),t)},S=function(t,e,n,r){t+""!==t&&(n=e,e=t,t=""),B(t,this._data,e,n,[],"root",r)},q=function(t,e,n){S.call(this,t,e,n,!0)},B=function(t,e,n,o,a,s,c,f){function p(t,e){for(g=t.length,_=s+"[]";g--;)h(t,g,e,1)}function h(e,r,a,s){var c,l;r!==v&&(c=i._fltr(_,e[r],y,o))&&(l=y.slice(),s&&m&&l[0]!==m&&l.unshift(m),B(t,c,n,o||(s?void 0:0),l,_,a,f))}function d(t,e){switch(s=t.data.observeAll._path,m=t.target,e.change){case"insert":p(e.items);break;case"remove":p(e.items,!0);break;case"refresh":p(e.oldItems,!0),p(t.target);break;case"set":_=s+"."+e.path,h(e,"oldValue",!0),h(e,"value")}m=void 0,n.apply(this,arguments)}var g,b,_,y,m,I,A=!f||f.un||!c;if(e&&typeof e===u){if(y=[e].concat(a),b=l(e)?"":"*",f&&A&&x(e)&&f[I=F(e).obId])return void f[I]++;if(f||(f={un:c}),n){if(b||0!==o)if(d._cId=C(n),A)r(t,e,b,d,c,o,y,s),I=F(e).obId,f[I]=(f[I]||0)+1;else{if(--f[F(e).obId])return;r(t,e,b,d,c,o,y,s)}}else f&&(f[F(e).obId]=1),r(t,e,b,void 0,c,o,y,s);if(b)for(g in e)_=s+"."+g,h(e,g,c);else p(e,c)}},M=function(t){return t.indexOf(".")<0&&t.indexOf("[")<0},J=function(){return[].push.call(arguments,!0),r.apply(this,arguments)};r=function(){function e(){function o(e,r,i,o){var a,s,c=x(rt),l=O(rt),u=U,f=W;if(e=n?e+"."+n:e,q||o)c&&t(l).off(e,H);else{if(E=c&&t._data(rt))for(E=E&&E.events,E=E&&E[i?y:_],J=E&&E.length;J--;)if((z=E[J].data)&&z.cb&&z.cb._cId===B._cId&&z.ns===n&&i)return;s=i?{}:{fullPath:Q,paths:r?[r]:[],prop:T},s.ns=n,s.cb=B,W&&(s.observeAll={_path:f,path:function(){return a=u.length,f.replace(/[[.]/g,function(e){return a--,"["===e?"["+t.inArray(u[a-1],u[a]):"."})},parents:function(){return u},filter:X,ns:n}),t(l).on(e,null,s,H),L&&((m[B._cId]=L)[F(rt).obId||F(rt,"obId",A++)]=rt)}}function s(t){var n=nt;return t.ob=G(t,n),t.cb=function(i,o){var a=t.ob,s=t.sb,c=G(t,n);c!==a&&(typeof a===u&&(f(a,!0),(s||r&&l(a))&&e([a],s,B,G,!0)),t.ob=c,typeof c===u&&(f(c),(s||r&&l(c))&&e([c],s,B,G))),B(i,o)}}function f(t,e,n,a){if(r){var s=rt,c=W;rt=t,a&&(rt=t[a],W+="."+a),X&&rt&&(rt=i._fltr(W,rt,a?[t].concat(U):U,X)),rt&&(n||l(rt))&&o(y+".observe"+(B?M=C(B):""),void 0,!0,e),rt=s,W=c}}var g,j,P,k,T,Q,S,q,B,M,J,z,E,G,K,L,N,R,U,W,X,Y,Z,$=I,tt=1!=this?d.apply([],arguments):p.call(arguments),et=tt.pop()||!1,nt=tt.shift(),rt=nt,it=tt.length;for(et+""===et&&(W=et,U=tt.pop(),X=tt.pop(),et=!!tt.pop(),it-=3),et===!!et&&(q=et,et=tt[it-1],et=it&&et+""!==et?(it--,tt.pop()):void 0),B=et,it&&c(tt[it-1])&&(G=B,B=tt.pop(),it--),$+=q?B?B._cId+(B._inId||""):"":(M=C(B))+(B._inId||""),q||(L=m[M]=m[M]||{}),Y=n&&n.match(b)||[""],Z=Y.length;Z--;)for(n=Y[Z],l(nt)?f(nt,q,!0):q&&0===it&&nt&&o($,""),N=0,g=0;it>g;g++)if(Q=tt[g],""!==Q&&void 0!==Q){if(rt=nt,""+Q===Q){if(k=Q.split("^"),k[1]&&(N=k[0].split(".").length,Q=k.join("."),N=Q.split(".").length-N),G&&(K=G(Q,nt))){it+=K.length-1,h.apply(tt,[g--,1].concat(K));continue}k=Q.split(".")}else c(Q)||(Q&&Q._jsv?(R=q?Q.cb:s(Q),R.noArray=!r,R._cId=B._cId,R._inId=R._inId||".obIn"+w++,(Q.bnd||Q.prm&&Q.prm.length||!Q.sb)&&e([rt],Q.path,[a],Q.prm,R,G,q),Q.sb&&e([Q.ob],Q.sb,B,G,q),Q=a,rt=void 0):rt=Q),k=[nt=Q];for(;rt&&void 0!==(T=k.shift());)if(typeof rt===u){if(""+T===T){if(""===T)continue;if(k.length<N+1&&!rt.nodeType){if(!q&&(E=x(rt)&&t._data(rt))){for(E=E.events,E=E&&E[_],J=E&&E.length,P=0;J--;)z=E[J].data,!z||z.cb._cId!==B._cId||z.ns!==n||B._inId||z.prop!==T&&"*"!==z.prop&&"**"!==z.prop||((j=k.join("."))&&z.paths.push(j),P++);if(P){rt=rt[T];continue}}if("*"===T||"**"===T){if(!q&&E&&E.length&&o($,"",!1,!0),"*"===T){o($,"");for(j in rt)j!==v&&f(rt,q,void 0,j)}else t.observable(rt)[(q?"un":"")+"observeAll"](B);break}T&&o($+"."+T,k.join("^"))}W&&(W+="."+T),T=rt[T]}if(c(T)){(S=T.depends)&&e([rt],V(S,rt,B),B,G,q);break}rt=T}f(rt,q)}return M&&D(L,M),{cbId:M,bnd:L}}var n,r=0!=this,o=p.call(arguments),a=o[0];return a+""===a&&r&&(n=a,o.shift(),a=o[0]),e.apply(1,o)},i=function(t){return l(t)?new T(t):new k(t)},s.getDeps=function(){var t=arguments;return function(){for(var e,n,r=[],i=t.length;i--;)e=t[i--],n=t[i],n&&(r=r.concat(c(n)?n(e,e):n));return r}},t.observable=i,i._fltr=function(t,e,n,r){return(r&&c(r)?r(t,e,n):!0)?(e=c(e)?e.set&&e.call(n[0]):e,typeof e===u&&e):void 0},i.Object=k,i.Array=T,t.observe=i.observe=r,t.unobserve=i.unobserve=J,i._apply=Q,k.prototype={_data:null,observeAll:S,unobserveAll:q,data:function(){return this._data},setProperty:function(t,e,n){var r,i,o,a=this,s=a._data;if(t=t||"",s)if(l(t))for(r=t.length;r--;)i=t[r],a.setProperty(i.name,i.value,void 0===n||n);else if(""+t!==t)for(r in t)a.setProperty(r,t[r],n);else if(t!==v){for(o=t.split(".");s&&o.length>1;)s=s[o.shift()];s&&a._setProperty(s,o[0],e,n)}return a},removeProperty:function(t){return this.setProperty(t,P),this},_setProperty:function(t,e,n,r){var i,o,a,s=e?t[e]:t;c(s)&&s.set&&(t=t._wrp||t,o=s,i=o.set===!0?o:o.set,s=o.call(t)),(s!==n||r&&s!=n)&&(!(s instanceof Date)||s>n||n>s)&&(i?(i.call(t,n),n=o.call(t)):(a=n===P)?void 0!==s?(delete t[e],n=void 0):e=void 0:e&&(t[e]=n),e&&this._trigger(t,{change:"set",path:e,value:n,oldValue:s,remove:a}))},_trigger:function(e,n){t(e).triggerHandler(_,n)}},T.prototype={_data:null,observeAll:S,unobserveAll:q,data:function(){return this._data},insert:function(t,e){var n=this._data;return 1===arguments.length&&(e=t,t=n.length),t=g(t),t>-1&&t<=n.length&&(e=l(e)?e:[e],e.length&&this._insert(t,e)),this},_insert:function(t,e){var n=this._data,r=n.length;h.apply(n,[t,0].concat(e)),this._trigger({change:"insert",index:t,items:e},r)},remove:function(t,e){var n,r=this._data;return void 0===t&&(t=r.length-1),t=g(t),e=e?g(e):0===e?0:1,e>-1&&t>-1&&(n=r.slice(t,t+e),e=n.length,e&&this._remove(t,e,n)),this},_remove:function(t,e,n){var r=this._data,i=r.length;r.splice(t,e),this._trigger({change:"remove",index:t,items:n},i)},move:function(t,e,n){if(n=n?g(n):0===n?0:1,t=g(t),e=g(e),n>0&&t>-1&&e>-1&&t!==e){var r=this._data.slice(t,t+n);n=r.length,n&&this._move(t,e,n,r)}return this},_move:function(t,e,n,r){var i=this._data,o=i.length;i.splice(t,n),h.apply(i,[e,0].concat(r)),this._trigger({change:"move",oldIndex:t,index:e,items:r},o)},refresh:function(t){var e=this._data.slice();return this._refresh(e,t),this},_refresh:function(t,e){var n=this._data,r=n.length;h.apply(n,[0,n.length].concat(e)),this._trigger({change:"refresh",oldItems:t},r)},_trigger:function(e,n){var r=this._data,i=r.length,o=t([r]);i!==n&&o.triggerHandler(_,{change:"set",path:"length",value:i,oldValue:n}),o.triggerHandler(y,e)}},f[_]=f[y]={remove:function(e){var n,r,i,o,a,s=e.data;if(s&&(s.off=!0,s=s.cb)&&(n=m[s._cId])){for(i=t._data(this).events[e.type],o=i.length;o--&&!r;)r=(a=i[o].data)&&a.cb&&a.cb._cId===s._cId;r||(delete n[F(this).obId],D(n,s._cId))}}},a.map=function(e){function n(t,n,r,o){var a,s=this;this.src&&this.unmap(),typeof t===u&&(s.src=t,s.tgt=r||s.tgt||[],s.options=n||s.options,s.update(),o||(e.obsSrc&&i(s.src).observeAll(s.obs=function(t,n){a||(a=!0,e.obsSrc(s,t,n),a=void 0)},s.srcFlt),e.obsTgt&&i(s.tgt).observeAll(s.obt=function(t,n){a||(a=!0,e.obsTgt(s,t,n),a=void 0)},s.tgtFlt)))}return c(e)&&(e={getTgt:e}),e.baseMap&&(e=t.extend({},e.baseMap,e)),e.map=function(t,e,r,i){return new n(t,e,r,i)},(n.prototype={srcFlt:e.srcFlt||M,tgtFlt:e.tgtFlt||M,update:function(t){var n=this;i(n.tgt).refresh(e.getTgt(n.src,n.options=t||n.options))},unmap:function(){var t=this;t.src&&(t.obs&&i(t.src).unobserveAll(t.obs,t.srcFlt),t.obt&&i(t.tgt).unobserveAll(t.obt,t.tgtFlt),t.src=void 0)},map:n,_def:e}).constructor=n,e}}return t});
//# sourceMappingURL=jquery.observable.min.js.map