/*! JsObservable v0.9.74 (Beta): http://jsviews.com/#jsobservable */
!function(t,e){var n=e.jQuery;"function"==typeof define&&define.amd?define(["jquery"],function(n){return t(e,n)}):"object"==typeof exports?module.exports=n?t(e,n):function(n){return t(e,n)}:t(e,!1)}(function(t,e){"use strict";var n=e===!1;if(e=e||t.jQuery,!e||!e.fn)throw"JsObservable requires jQuery";var r,i,o="v0.9.74",s=e.views=e.views||n&&t.jsrender&&jsrender.views||{jsviews:o,sub:{settings:{}},settings:{advanced:function(t){return l=c.advanced=c.advanced||{_jsv:!0},t?("_jsv"in t&&(l._jsv=t._jsv),a.advSet(),s.settings):l}}},a=s.sub,c=a.settings,l=c.advanced,u=e.isFunction,f=e.isArray,h="object";if(!e.observe){var p=e.event.special,d=[].slice,v=[].splice,g=[].concat,_=e.expando,b=parseInt,y=/\S+/g,m=a.propChng=a.propChng||"propertyChange",I=a.arrChng=a.arrChng||"arrayChange",j={},A=m+".observe",x=1,w=1,F=1,P=e.hasData,S=e.data,C={},k=function(t){return t._cId=t._cId||".obs"+w++},T=function(t,e){return this._data=e,this._ns=t,this},O=function(t,e){return this._data=e,this._ns=t,this},V=function(t){return f(t)?[t]:t},D=function(t,e,n){t=t?f(t)?t:[t]:[];var r,i,o=e,s=o,a=t&&t.length,c=[];for(r=0;a>r;r++)i=t[r],u(i)?c=c.concat(D(i.call(e,e,n),e)):""+i===i?(s!==o&&c.push(o=s),c.push(i)):(e=s=i,s!==o&&c.push(o=s));return c},H=function(t,e){for(var n in t)return;delete j[e]},Q=function(t,e){function n(t){return typeof t===h&&(d[0]||p&&f(t))}if(!t.data||!t.data.off){var r,i,o,s=e.oldValue,a=e.value,c=t.data,l=c.observeAll,u=c.cb,p=!u.noArray,d=c.paths,v=c.ns;t.type===I?(u.array||u).call(c,t,e):(c.prop===e.path||"*"===c.prop)&&(l?(r=l._path+"."+e.path,i=l.filter,o=[t.target].concat(l.parents()),n(s)&&q(p,v,[s],d,u,!0,i,[o],r),n(a)&&q(p,v,[a],d,u,void 0,i,[o],r)):(n(s)&&q(p,v,[s],d,u,!0),n(a)&&q(p,v,[a],d,u)),c.cb(t,e))}},q=function(){var t=g.apply([],arguments);return r.apply(t.shift(),t)},M=function(t,e,n){J(this._ns,this._data,t,e,[],"root",n)},B=function(t,e){M.call(this,t,e,!0)},J=function(t,e,n,o,s,a,c,l){function u(t,e){for(v=t.length,b=a+"[]";v--;)p(t,v,e,1)}function p(e,r,s,a){var c,u;r!==_&&(c=i._fltr(b,e[r],y,o))&&(u=y.slice(),a&&m&&u[0]!==m&&u.unshift(m),J(t,c,n,o||(a?void 0:0),u,b,s,l))}function d(t,e){switch(a=t.data.observeAll._path,m=t.target,e.change){case"insert":u(e.items);break;case"remove":u(e.items,!0);break;case"refresh":u(e.oldItems,!0),u(t.target);break;case"set":b=a+"."+e.path,p(e,"oldValue",!0),p(e,"value")}m=void 0,n.apply(this,arguments)}var v,g,b,y,m,I,j=!l||l.un||!c;if(e&&typeof e===h){if(y=[e].concat(s),g=f(e)?"":"*",l&&j&&P(e)&&l[I=S(e).obId])return void l[I]++;if(l||(l={un:c}),n){if(g||0!==o)if(d._cId=k(n),j)r(t,e,g,d,c,o,y,a),I=S(e).obId,l[I]=(l[I]||0)+1;else{if(--l[S(e).obId])return;r(t,e,g,d,c,o,y,a)}}else l&&(l[S(e).obId]=1),r(t,e,g,void 0,c,o,y,a);if(g)for(v in e)b=a+"."+v,p(e,v,c);else u(e,c)}},z=function(t){return t.indexOf(".")<0&&t.indexOf("[")<0},E=function(){return[].push.call(arguments,!0),r.apply(this,arguments)};r=function(){function t(){function o(t,r,i,o){var s,a,c=P(it),l=V(it),u=W,f=X;if(t=n?t+"."+n:t,!q&&(o||i))for(G=c&&e._data(it),G=G&&G.events,G=G&&G[i?I:m],z=G&&G.length;z--;)if(E=G[z]&&G[z].data,E&&(o&&E.ns!==n||!o&&E.ns===n&&E.cb&&E.cb._cId===M._cId))return;q||o?e(l).off(t,Q):(a=i?{}:{fullPath:T,paths:r?[r]:[],prop:C},a.ns=n,a.cb=M,X&&(a.observeAll={_path:f,path:function(){return s=u.length,f.replace(/[[.]/g,function(t){return s--,"["===t?"["+e.inArray(u[s-1],u[s]):"."})},parents:function(){return u},filter:Y}),e(l).on(t,null,a,Q),N&&(N[S(it).obId||S(it,"obId",x++)]=it))}function a(e){var n=rt;return e.ob=K(e,n),e.cb=function(i,o){var s=e.ob,a=e.sb,l=K(e,n);l!==s&&(typeof s===h&&(c(s,!0),(a||r&&f(s))&&t([s],a,M,K,!0)),e.ob=l,typeof l===h&&(c(l),(a||r&&f(l))&&t([l],a,M,K))),M(i,o)}}function c(t,e,n,s){if(r){var a=it,c=X;it=t,s&&(it=t[s],X+="."+s),Y&&it&&(it=i._fltr(X,it,s?[t].concat(W):W,Y)),it&&(n||f(it))&&o(I+".observe"+(M?k(M):""),void 0,!0,e),it=a,X=c}}var l,p,b,w,C,T,O,q,M,B,J,z,E,G,K,L,N,R,U,W,X,Y,Z,$,tt=A,et=1!=this?g.apply([],arguments):d.call(arguments),nt=et.pop()||!1,rt=et.shift(),it=rt,ot=et.length;if(nt+""===nt&&(X=nt,W=et.pop(),Y=et.pop(),nt=!!et.pop(),ot-=3),nt===!!nt&&(q=nt,nt=et[ot-1],nt=!ot||nt+""===nt||nt&&!u(nt)?void 0:(ot--,et.pop()),q&&!ot&&u(rt)&&(nt=rt,rt=void 0)),M=nt,ot&&u(et[ot-1])&&(K=M,M=et.pop(),ot--),!q||!M||M._cId){for(tt+=M?(J=M._inId||"",q?M._cId+J:(B=k(M))+J):"",B&&!q&&(N=j[B]=j[B]||{}),Z=n&&n.match(y)||[""],$=Z.length;$--;){if(n=Z[$],rt&&(T=et[0],!T||T+""!==T)&&(f(rt)?c(rt,q,!0):q&&o(tt,"")),q&&!ot&&!rt)for(p in j){N=j[p];for(E in N)it=N[E],f(it)?c(it,q,q):o(tt,"")}for(R=0,l=0;ot>l;l++)if(T=et[l],""!==T){if(it=rt,""+T===T){if(w=T.split("^"),w[1]&&(R=w[0].split(".").length,T=w.join("."),R=T.split(".").length-R),K&&(L=K(T,rt))){ot+=L.length-1,v.apply(et,[l--,1].concat(L));continue}w=T.split(".")}else u(T)||(T&&T._jsv?(U=q?T.cb:a(T),U.noArray=!r,U._cId=M._cId,U._inId=U._inId||".obIn"+F++,(T.bnd||T.prm&&T.prm.length||!T.sb)&&t([it],T.path,[s],T.prm,U,K,q),T.sb&&t([T.ob],T.sb,M,K,q),T=s,it=void 0):it=T),w=[rt=T];for(;it&&void 0!==(C=w.shift());)if(typeof it===h){if(""+C===C){if(""===C)continue;if(w.length<R+1&&!it.nodeType){if(!q&&(G=P(it)&&e._data(it))){for(G=G.events,G=G&&G[m],z=G&&G.length,b=0;z--;)E=G[z].data,!E||E.ns!==n||E.cb._cId!==M._cId||E.cb._inId!==M._inId||E.prop!==C&&"*"!==E.prop&&"**"!==E.prop||((p=w.join("."))&&E.paths.push(p),b++);if(b){it=it[C];continue}}if("*"===C||"**"===C){if(!q&&G&&G.length&&o(tt,"",!1,!0),"*"===C){o(tt,"");for(p in it)p!==_&&c(it,q,void 0,p)}else e.observable(n,it)[(q?"un":"")+"observeAll"](M);break}C&&o(tt+".p_"+C,w.join("^"))}X&&(X+="."+C),C=it[C]}if(u(C)){(O=C.depends)&&t([it],D(O,it,M),M,K,q);break}it=C,q&&it===rt&&(l>ot-2||et[l+1]+""!==et[l+1])&&o(tt,"")}c(it,q)}}return B&&H(N,B),{cbId:B,bnd:N,s:j}}}var n,r=0!=this,o=d.call(arguments),s=o[0];return s+""===s&&r&&(n=s,o.shift(),s=o[0]),t.apply(1,o)},i=function(t,e){return 1===arguments.length&&(e=t,t=""),f(e)?new O(t,e):new T(t,e)},a.getDeps=function(){var t=arguments;return function(){for(var e,n,r=[],i=t.length;i--;)e=t[i--],n=t[i],n&&(r=r.concat(u(n)?n(e,e):n));return r}},e.observable=i,i._fltr=function(t,e,n,r){return(r&&u(r)?r(t,e,n):!0)?(e=u(e)?e.set&&e.call(n[0]):e,typeof e===h&&e):void 0},i.Object=T,i.Array=O,e.observe=i.observe=r,e.unobserve=i.unobserve=E,i._apply=q,T.prototype={_data:null,observeAll:M,unobserveAll:B,data:function(){return this._data},setProperty:function(t,e,n){t=t||"";var r,i,o,s=t+""!==t,a=this,c=a._data;if(c)if(s)if(n=e,f(t))for(r=t.length;r--;)i=t[r],a.setProperty(i.name,i.value,void 0===n||n);else for(r in t)a.setProperty(r,t[r],n);else if(t!==_){for(o=t.split(".");c&&o.length>1;)c=c[o.shift()];c&&a._setProperty(c,o[0],e,n)}return a},removeProperty:function(t){return this.setProperty(t,C),this},_setProperty:function(t,e,n,r){var i,o,s,a=e?t[e]:t;u(a)&&a.set&&(t=t._wrp||t,o=a,i=o.set===!0?o:o.set,a=o.call(t)),(a!==n||r&&a!=n)&&(!(a instanceof Date)||a>n||n>a)&&(i?(i.call(t,n),n=o.call(t)):(s=n===C)?void 0!==a?(delete t[e],n=void 0):e=void 0:e&&(t[e]=n),e&&this._trigger(t,{change:"set",path:e,value:n,oldValue:a,remove:s}))},_trigger:function(t,n){e(t).triggerHandler(m+(this._ns?"."+/^\S+/.exec(this._ns)[0]:""),n)}},O.prototype={_data:null,observeAll:M,unobserveAll:B,data:function(){return this._data},insert:function(t,e){var n=this._data;return 1===arguments.length&&(e=t,t=n.length),t=b(t),t>-1&&t<=n.length&&(e=f(e)?e:[e],e.length&&this._insert(t,e)),this},_insert:function(t,e){var n=this._data,r=n.length;v.apply(n,[t,0].concat(e)),this._trigger({change:"insert",index:t,items:e},r)},remove:function(t,e){var n,r=this._data;return void 0===t&&(t=r.length-1),t=b(t),e=e?b(e):0===e?0:1,e>-1&&t>-1&&(n=r.slice(t,t+e),e=n.length,e&&this._remove(t,e,n)),this},_remove:function(t,e,n){var r=this._data,i=r.length;r.splice(t,e),this._trigger({change:"remove",index:t,items:n},i)},move:function(t,e,n){if(n=n?b(n):0===n?0:1,t=b(t),e=b(e),n>0&&t>-1&&e>-1&&t!==e){var r=this._data.slice(t,t+n);n=r.length,n&&this._move(t,e,n,r)}return this},_move:function(t,e,n,r){var i=this._data,o=i.length;i.splice(t,n),v.apply(i,[e,0].concat(r)),this._trigger({change:"move",oldIndex:t,index:e,items:r},o)},refresh:function(t){var e=this._data.slice();return this._refresh(e,t),this},_refresh:function(t,e){var n=this._data,r=n.length;v.apply(n,[0,n.length].concat(e)),this._trigger({change:"refresh",oldItems:t},r)},_trigger:function(t,n){var r=this._data,i=r.length,o=e([r]);i!==n&&o.triggerHandler(m,{change:"set",path:"length",value:i,oldValue:n}),o.triggerHandler(I+(this._ns?"."+/^\S+/.exec(this._ns)[0]:""),t)}},p[m]=p[I]={remove:function(t){var n,r,i,o,s,a=t.data;if(a&&(a.off=!0,a=a.cb)&&(n=j[a._cId])){for(i=e._data(this).events[t.type],o=i.length;o--&&!r;)r=(s=i[o].data)&&s.cb&&s.cb._cId===a._cId;r||(delete n[S(this).obId],H(n,a._cId))}}},s.map=function(t){function n(e,n,r,o){var s,a=this;this.src&&this.unmap(),typeof e===h&&(a.src=e,a.tgt=r||a.tgt||[],a.options=n||a.options,a.update(),o||(t.obsSrc&&i(a.src).observeAll(a.obs=function(e,n){s||(s=!0,t.obsSrc(a,e,n),s=void 0)},a.srcFlt),t.obsTgt&&i(a.tgt).observeAll(a.obt=function(e,n){s||(s=!0,t.obsTgt(a,e,n),s=void 0)},a.tgtFlt)))}return u(t)&&(t={getTgt:t}),t.baseMap&&(t=e.extend({},t.baseMap,t)),t.map=function(t,e,r,i){return new n(t,e,r,i)},(n.prototype={srcFlt:t.srcFlt||z,tgtFlt:t.tgtFlt||z,update:function(e){var n=this;i(n.tgt).refresh(t.getTgt(n.src,n.options=e||n.options))},unmap:function(){var t=this;t.src&&(t.obs&&i(t.src).unobserveAll(t.obs,t.srcFlt),t.obt&&i(t.tgt).unobserveAll(t.obt,t.tgtFlt),t.src=void 0)},map:n,_def:t}).constructor=n,t},a.advSet=function(){t._jsv=c.advanced._jsv?{cbBindings:j}:void 0}}return e},this);
//# sourceMappingURL=jquery.observable.min.js.map