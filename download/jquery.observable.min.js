/*! JsObservable v1.0.0-alpha: http://github.com/BorisMoore/jsviews and http://jsviews.com/jsviews
informal pre V1.0 commit counter: 43 (Beta Candidate) */
(function(n,t,i){"use strict";function a(n){return o(n)?new d(n):new k(n)}function k(n){return this._data=n,this}function d(n){return this._data=n,this}function h(n){return o(n)?[n]:n}function rt(n,t){n=o(n)?n:[n];for(var i,f=t,e=f,h=n.length,r=[],s=0;s<h;s++){if(i=n[s],u(i)){v.apply(r,[r.length,1].concat(rt(i.call(t,t),t)));continue}else if(""+i!==i){t=e=i,e!==f&&r.push(f=e);continue}e!==f&&r.push(f=e),r.push(i)}return r}function ut(n,t){var r,i;for(r in n){i=!0;break}i||delete p[t]}function w(n,t){if(!(n.data&&n.data.off)){var r=t.oldValue,i=n.data;n.type===l?i.cb.array(n,t):(i.prop==="*"||i.prop===t.path)&&(typeof r===y&&b(h(r),i.path,i.cb),typeof(r=t.value)===y&&f(h(r),i.path,i.cb),i.cb(n,t))}}function f(){function ni(i,u,f,o){var s=it(n),v=h(n);if(r=0,d||o)s&&(t(v).off(i,w),r&&delete r[t.data(n,"obId")]);else{if(a=s&&t._data(n))for(a=a&&a.events,a=a&&a[f?l:c],vt=a&&a.length;vt--;)if((et=a[vt].data)&&et.cb===e){if(f)return;u==="*"&&et.prop!==u&&(t(n).off(i+"."+et.prop,w),r&&delete r[t.data(n,"obId")])}t(v).on(i,null,f?{cb:e}:{path:u,prop:k,cb:e},w);kt&&(kt[t.data(n,"obId")||t.data(n,"obId",ot++)]=n)}}function fi(n,t){n._ob=ht(n,yt);var i=yt;return function(){var r=n._ob,u=t.length;typeof r===y&&(gt(r,!0),u&&b(h(r),t,e,ht)),r=n._ob=ht(n,i),typeof r===y&&(gt(r),u&&f(h(r),t,e,ht,i))}}function gt(t,r){if(e&&e.array&&o(t)){var u=n;n=t,ni(l+".observe.obs"+e._bnd,i,!0,r),n=u}}var at,nt,k,s,wt,n,d,e,bt,vt,et,a,ht,ti,kt,dt,ri,ui=1,ii=tt,g=ft.apply([],arguments),ct=g.pop(),yt=g[0],pt=g.shift(),lt=g.length;for(yt=pt,u(ct)?e=ct:(ct===!0?d=ct:ct&&(yt=ct,ui=0),ct=g[lt-1],(lt&&ct===i||u(ct))&&(e=g.pop(),lt--)),u(g[lt-1])&&(ht=e,e=g.pop(),lt--),ii+=d?e?".obs"+e._bnd:"":".obs"+(bt=e._bnd=e._bnd||st++),d&&lt===0&&pt&&t(pt).off(tt,w),d||(kt=p[bt]=p[bt]||{}),dt=0,at=0;at<lt;at++){if(s=g[at],gt(n,d),n=pt,""+s===s){if(nt=s.split("^"),nt[1]&&(dt=nt[0].split(".").length,s=nt.join("."),dt=s.split(".").length-dt),ht&&(ti=ht(s,pt))){lt+=ti.length-1,v.apply(g,[at--,1].concat(ti));continue}nt=s.split(".")}else ui&&!u(s)&&(s._jsvOb&&(d||(s._cb=ri=fi(s,g.slice(at+1)),s._rt=yt,ri._bnd=e._bnd),f(s._rt,g.slice(0,at),s._cb,ht,d),s=s._ob),n=s),pt=s,nt=[pt];while(n&&(k=nt.shift())!==i){if(typeof n=="object"&&""+k===k){if(k==="")continue;if(nt.length<dt+1&&!n.nodeType){if(!d&&(a=it(n)&&t._data(n))){for(a=a.events,a=a&&a.propertyChange,vt=a&&a.length;vt--;)if(et=a[vt].data,et&&et.cb===e&&(et.prop===k&&et.path===nt.join(".")||et.prop==="*"))break;if(vt>-1){n=n[k];continue}}if(k==="*"){u(n)?(wt=n.depends)&&f(wt,e,d||yt):ni(ii,k);break}else!k||u(wt=n[k])&&wt.depends||ni(ii+"."+k,nt.join("."))}k=k?n[k]:n}if(u(k)){(wt=k.depends)&&f(n,rt(wt,n),e,ht,d||h(yt));break}n=k}}return gt(n,d),bt&&ut(kt,bt),{cbId:bt,bnd:kt,leaf:n}}function b(){return[].push.call(arguments,!0),f.apply(this,arguments)}if(!t)throw"requires jQuery or JsRender";if(!t.observable){var r,g,nt=t.event.special,e=t.views?t.views.sub:{},v=[].splice,ft=[].concat,o=t.isArray,et=t.expando,y="object",s=parseInt,c=e.propChng=e.propChng||"propertyChange",l=e.arrChng=e.arrChng||"arrayChange",p=e._cbBnds=e._cbBnds||{},tt=c+".observe",u=t.isFunction,ot=1,st=1,it=t.hasData;t.observable=a,a.Object=k,a.Array=d,a.observe=f,a.unobserve=b,k.prototype={_data:null,data:function(){return this._data},observe:function(n,t){return f(this._data,n,t)},unobserve:function(n,t){return b(this._data,n,t)},setProperty:function(n,t,r){var u,h,s,f=this,e=f._data;if(n=n||"",e)if(o(n))for(u=n.length;u--;)h=n[u],f.setProperty(h.name,h.value,r===i||r);else if(""+n!==n)for(u in n)f.setProperty(u,n[u],t);else if(n.indexOf(et)<0){for(s=n.split(".");e&&s.length>1;)e=e[s.shift()];f._setProperty(e,s.join("."),t,r)}return f},_setProperty:function(n,t,i,r){var e,o,f=t?n[t]:n;u(f)&&f.set&&(o=f,e=f.set===!0?f:f.set,f=f.call(n)),(f!==i||r&&f!=i)&&(!(f instanceof Date)||f>i||f<i)&&(e?(e.call(n,i),i=o.call(n)):n[t]=i,this._trigger(n,{path:t,value:i,oldValue:f}))},_trigger:function(n,i){t(n).triggerHandler(c,i)}},d.prototype={_data:null,data:function(){return this._data},insert:function(n,t){var i=this._data;return arguments.length===1&&(t=n,n=i.length),n=s(n),n>-1&&n<=i.length&&(t=o(t)?t:[t],t.length&&this._insert(n,t)),this},_insert:function(n,t){var i=this._data,r=i.length;v.apply(i,[n,0].concat(t)),this._trigger({change:"insert",index:n,items:t},r)},remove:function(n,t){var r,u=this._data;return n===i&&(n=u.length-1),n=s(n),t=t?s(t):t===0?0:1,t>-1&&n>-1&&(r=u.slice(n,n+t),t=r.length,t&&this._remove(n,t,r)),this},_remove:function(n,t,i){var r=this._data,u=r.length;r.splice(n,t),this._trigger({change:"remove",index:n,items:i},u)},move:function(n,t,i){if(i=i?s(i):i===0?0:1,n=s(n),t=s(t),i>0&&n>-1&&t>-1&&n!==t){var r=this._data.slice(n,n+i);i=r.length,i&&this._move(n,t,i,r)}return this},_move:function(n,t,i,r){var u=this._data,f=u.length;u.splice(n,i),u.splice.apply(u,[t,0].concat(r)),this._trigger({change:"move",oldIndex:n,index:t,items:r},f)},refresh:function(n){var t=this._data.slice(0);return this._refresh(t,n),this},_refresh:function(n,t){var i=this._data,r=i.length;v.apply(i,[0,i.length].concat(t)),this._trigger({change:"refresh",oldItems:n},r)},_trigger:function(n,i){var r=this._data,u=r.length,f=t([r]);f.triggerHandler(l,n),u!==i&&f.triggerHandler(c,{path:"length",value:u,oldValue:i})}},nt[c]=nt[l]={remove:function(n){(n=n.data)&&(n.off=1,n=n.cb)&&(r=p[g=n._bnd])},teardown:function(){r&&(delete r[t.data(this,"obId")],ut(r,g))}}}})(this,this.jQuery||this.jsviews);
//@ sourceMappingURL=jquery.observable.min.js.map