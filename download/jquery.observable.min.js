/*! JsObservable v1.0.0-alpha: http://github.com/BorisMoore/jsviews and http://jsviews.com/jsviews
informal pre V1.0 commit counter: 46 (Beta Candidate) */
(function(n,t,i){"use strict";function e(n){return s(n)?new k(n):new b(n)}function b(n){return this._data=n,this}function k(n){return this._data=n,this}function d(n){return s(n)?[n]:n}function rt(n,t){n=s(n)?n:[n];for(var i,u=t,e=u,h=n.length,r=[],o=0;o<h;o++){if(i=n[o],f(i)){r=r.concat(rt(i.call(t,t),t));continue}else if(""+i!==i){t=e=i;e!==u&&r.push(u=e);continue}e!==u&&r.push(u=e);r.push(i)}return r}function ut(n,t){var r,i;for(r in n){i=!0;break}i||delete p[t]}function g(n,t){if(!(n.data&&n.data.off)){var r=t.oldValue,i=n.data,u=i.paths;n.type===v?(i.cb.array||i.cb)(n,t):(i.prop===t.path||i.prop==="*")&&(typeof r===c&&(u[0]||s(r))&&o(d(r),u,i.cb,!0),typeof(r=t.value)===c&&(u[0]||s(r))&&o(d(r),u,i.cb),i.cb(n,t))}}function y(){function yt(i,f,o,c){var y=it(n),p=d(n);if(u=0,l||c)y&&(t(p).off(i,g),u&&delete u[t.data(n,"obId")]);else{if(e=y&&t._data(n))for(e=e&&e.events,e=e&&e[o?v:a],vt=e&&e.length;vt--;)if((k=e[vt].data)&&k.cb._bnd===s._bnd){if(o)return;(f==="*"&&k.prop!==f||k.prop===h)&&(t(n).off(i,g),u&&delete u[t.data(n,"obId")])}t(p).on(i,null,o?{cb:s}:{fullPath:r,paths:f?[f]:[],prop:h,cb:s},g);wt&&(wt[t.data(n,"obId")||t.data(n,"obId",ct++)]=n)}}function ui(n,i){n._ob=nt(n,st);var r=st;return function(u,f){var e=n._ob,h=i.length;typeof e===c&&(pt(e,!0),(h||t.isArray(e))&&o(e,i,s,nt,!0));e=n._ob=nt(n,r);typeof e===c&&(pt(e),(h||t.isArray(e))&&o(e,i,s,nt,r));s(u,f)}}function pt(r,u,f){if(f||t.isArray(r)){var e=n;n=r;yt(v+".observe"+(s?".obs"+s._bnd:""),i,!0,u);n=e}}var ot,dt,ni,b,h,r,gt,l,s,at,vt,k,e,nt,ti,wt,bt,ii,ri=1,kt=ht,y=Array.apply(0,arguments),tt=y.pop(),st=y.shift(),et=st,n=et,ft=y.length;for(f(tt)?s=tt:(tt===!0?l=tt:tt&&(st=tt,ri=0),tt=y[ft-1],(ft&&tt===i||f(tt))&&(s=y.pop(),ft--)),ft&&f(y[ft-1])&&(nt=s,s=y.pop(),ft--),t.isArray(et)?pt(et,l,!0):(kt+=l?s?".obs"+s._bnd:"":".obs"+(at=s._bnd=s._bnd||lt++),l&&ft===0&&et&&yt(kt,"")),l||(wt=p[at]=p[at]||{}),bt=0,ot=0;ot<ft;ot++)if(r=y[ot],r!==""){if(n=et,""+r===r){if(b=r.split("^"),b[1]&&(bt=b[0].split(".").length,r=b.join("."),bt=r.split(".").length-bt),nt&&(ti=nt(r,et))){ft+=ti.length-1;w.apply(y,[ot--,1].concat(ti));continue}b=r.split(".")}else ri&&!f(r)&&(r._jsvOb&&(l||(r._cb=ii=ui(r,y.slice(ot+1)),r._rt=st,ii._bnd=s._bnd),o(r._rt,y.slice(0,ot),r._cb,nt,l),r=r._ob),n=r),et=r,b=[et];while(n&&(h=b.shift())!==i)if(typeof n===c){if(""+h===h){if(h==="")continue;if(b.length<bt+1&&!n.nodeType){if(!l&&(e=it(n)&&t._data(n))){for(e=e.events,e=e&&e.propertyChange,vt=e&&e.length,ni=0;vt--;)k=e[vt].data,k&&k.cb===s&&(k.prop===h||k.prop==="*")&&((dt=b.join("."))&&k.paths.push(dt),ni++);if(ni){n=n[h];continue}}if(h==="*"){!l&&e&&e.length&&yt(kt,"",!1,!0);f(n)?(gt=n.depends)&&o(gt,s,l||st):yt(kt,"");for(dt in n)pt(n[dt],l);break}else h&&yt(kt+"."+h,b.join("."))}h=n[h]}if(f(h)){(gt=h.depends)&&o(n,rt(gt,n),s,nt,l||st);break}n=h}pt(n,l)}return at&&ut(wt,at),{cbId:at,bnd:wt,leaf:n}}function vt(){return[].push.call(arguments,!0),y.apply(this,arguments)}function o(){return y.apply(0,[].concat.apply([],arguments))}function ft(n){r(this._data,n)}function et(n){r(this._data,n,!0)}function r(n,u,f,o){function l(n,t){switch(t.change){case"insert":r(t.items,u,!1,0);break;case"remove":r(t.items,u,!0,0);break;case"refresh":r(t.oldItems,u,!0,0);r(n.target,u,!1,0);break;case"set":r(t.oldValue,u,!0,0);r(t.value,u,!1,0)}u.apply(this,arguments)}var s,h=t.isArray(n)?"":"*";if(typeof n===c)if(u?(h||o!==0)&&(l._bnd=u._bnd,y(n,h,l,f),u._bnd=l._bnd):y(n,h,i,f),h){o=o||e.filter;for(s in n)r((o||ot)(s,n),u,f,0)}else for(s=n.length;s--;)r(n[s],u,f,0)}function ot(n,i){if(!at.test(n)){var r=i[n];return r+""!==r&&t.isFunction(r)?r.set&&r.call(i):r}}if(!t)throw"requires jQuery or JsRender";if(!t.observable){var u,nt,tt=t.event.special,h=t.views?t.views.sub:{},w=[].splice,s=t.isArray,st=t.expando,c="object",l=parseInt,a=h.propChng=h.propChng||"propertyChange",v=h.arrChng=h.arrChng||"arrayChange",p=h._cbBnds=h._cbBnds||{},ht=a+".observe",f=t.isFunction,ct=1,lt=1,it=t.hasData,at=/^_|^jquery/i;t.observable=e;e.filter=ot;e.Object=b;e.Array=k;t.observe=e.observe=y;t.unobserve=e.unobserve=vt;e._apply=o;b.prototype={_data:null,observeAll:ft,unobserveAll:et,data:function(){return this._data},setProperty:function(n,t,r){var u,h,o,f=this,e=f._data;if(n=n||"",e)if(s(n))for(u=n.length;u--;)h=n[u],f.setProperty(h.name,h.value,r===i||r);else if(""+n!==n)for(u in n)f.setProperty(u,n[u],t);else if(n.indexOf(st)<0){for(o=n.split(".");e&&o.length>1;)e=e[o.shift()];f._setProperty(e,o.join("."),t,r)}return f},_setProperty:function(n,t,i,r){var e,o,u=t?n[t]:n;f(u)&&u.set&&(o=u,e=u.set===!0?u:u.set,u=u.call(n));(u!==i||r&&u!=i)&&(!(u instanceof Date)||u>i||u<i)&&(e?(e.call(n,i),i=o.call(n)):n[t]=i,this._trigger(n,{change:"set",path:t,value:i,oldValue:u}))},_trigger:function(n,i){t(n).triggerHandler(a,i)}};k.prototype={_data:null,observeAll:ft,unobserveAll:et,data:function(){return this._data},insert:function(n,t){var i=this._data;return arguments.length===1&&(t=n,n=i.length),n=l(n),n>-1&&n<=i.length&&(t=s(t)?t:[t],t.length&&this._insert(n,t)),this},_insert:function(n,t){var i=this._data,r=i.length;w.apply(i,[n,0].concat(t));this._trigger({change:"insert",index:n,items:t},r)},remove:function(n,t){var r,u=this._data;return n===i&&(n=u.length-1),n=l(n),t=t?l(t):t===0?0:1,t>-1&&n>-1&&(r=u.slice(n,n+t),t=r.length,t&&this._remove(n,t,r)),this},_remove:function(n,t,i){var r=this._data,u=r.length;r.splice(n,t);this._trigger({change:"remove",index:n,items:i},u)},move:function(n,t,i){if(i=i?l(i):i===0?0:1,n=l(n),t=l(t),i>0&&n>-1&&t>-1&&n!==t){var r=this._data.slice(n,n+i);i=r.length;i&&this._move(n,t,i,r)}return this},_move:function(n,t,i,r){var u=this._data,f=u.length;u.splice(n,i);u.splice.apply(u,[t,0].concat(r));this._trigger({change:"move",oldIndex:n,index:t,items:r},f)},refresh:function(n){var t=this._data.slice(0);return this._refresh(t,n),this},_refresh:function(n,t){var i=this._data,r=i.length;w.apply(i,[0,i.length].concat(t));this._trigger({change:"refresh",oldItems:n},r)},_trigger:function(n,i){var r=this._data,u=r.length,f=t([r]);f.triggerHandler(v,n);u!==i&&f.triggerHandler(a,{change:"set",path:"length",value:u,oldValue:i})}};tt[a]=tt[v]={remove:function(n){(n=n.data)&&(n.off=1,n=n.cb)&&(u=p[nt=n._bnd])},teardown:function(){u&&(delete u[t.data(this,"obId")],ut(u,nt))}}}})(this,this.jQuery||this.jsviews);
/*
//# sourceMappingURL=jquery.observable.min.js.map
*/