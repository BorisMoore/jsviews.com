/*! JsObservable v1.0.0-alpha: http://github.com/BorisMoore/jsviews and http://jsviews.com/jsviews
informal pre V1.0 commit counter: 44 (Beta Candidate) */
(function(n,t,i){"use strict";function v(n){return u(n)?new d(n):new k(n)}function k(n){return this._data=n,this}function d(n){return this._data=n,this}function h(n){return u(n)?[n]:n}function rt(n,t){n=u(n)?n:[n];for(var i,e=t,o=e,h=n.length,r=[],s=0;s<h;s++){if(i=n[s],f(i)){y.apply(r,[r.length,1].concat(rt(i.call(t,t),t)));continue}else if(""+i!==i){t=o=i,o!==e&&r.push(e=o);continue}o!==e&&r.push(e=o),r.push(i)}return r}function ut(n,t){var r,i;for(r in n){i=!0;break}i||delete p[t]}function w(n,t){if(!(n.data&&n.data.off)){var r=t.oldValue,i=n.data;n.type===a?(i.cb.array||i.cb)(n,t):(i.prop===t.path||i.prop==="*")&&(typeof r===c&&(i.path||u(r))&&b(h(r),i.path,i.cb),typeof(r=t.value)===c&&(i.path||u(r))&&e(h(r),i.path,i.cb),i.cb(n,t))}}function e(){function ni(i,u,f,e){var c=it(n),y=h(n);if(r=0,d||e)c&&(t(y).off(i,w),r&&delete r[t.data(n,"obId")]);else{if(v=c&&t._data(n))for(v=v&&v.events,v=v&&v[f?a:l],yt=v&&v.length;yt--;)if((et=v[yt].data)&&et.cb===s){if(f)return;u==="*"&&et.prop!==u&&(t(n).off(i+"."+et.prop,w),r&&delete r[t.data(n,"obId")])}t(y).on(i,null,f?{cb:s}:{fullPath:o,path:u,prop:k,cb:s},w);kt&&(kt[t.data(n,"obId")||t.data(n,"obId",ot++)]=n)}}function ei(n,t){n._ob=ht(n,pt);var i=pt;return function(){var r=n._ob,u=t.length;typeof r===c&&(bt(r,!0),u&&b(h(r),t,s,ht)),r=n._ob=ht(n,i),typeof r===c&&(bt(r),u&&e(h(r),t,s,ht,i))}}function bt(t,r){if(s&&u(t)){var f=n;n=t,ni(a+".observe.obs"+s._bnd,i,!0,r),n=f}}var vt,ri,nt,k,o,gt,d,s,wt,yt,et,v,ht,ti,kt,dt,ui,fi=1,ii=tt,g=ft.apply([],arguments),ct=g.pop(),pt=g.shift(),at=pt,n=at,lt=g.length;for(f(ct)?s=ct:(ct===!0?d=ct:ct&&(pt=ct,fi=0),ct=g[lt-1],(lt&&ct===i||f(ct))&&(s=g.pop(),lt--)),lt&&f(g[lt-1])&&(ht=s,s=g.pop(),lt--),ii+=d?s?".obs"+s._bnd:"":".obs"+(wt=s._bnd=s._bnd||st++),d&&lt===0&&at&&t(at).off(tt,w),d||(kt=p[wt]=p[wt]||{}),dt=0,bt(at,d),vt=0;vt<lt;vt++){if(o=g[vt],n=at,""+o===o){if(nt=o.split("^"),nt[1]&&(dt=nt[0].split(".").length,o=nt.join("."),dt=o.split(".").length-dt),ht&&(ti=ht(o,at))){lt+=ti.length-1,y.apply(g,[vt--,1].concat(ti));continue}nt=o.split(".")}else fi&&!f(o)&&(o._jsvOb&&(d||(o._cb=ui=ei(o,g.slice(vt+1)),o._rt=pt,ui._bnd=s._bnd),e(o._rt,g.slice(0,vt),o._cb,ht,d),o=o._ob),n=o),at=o,nt=[at];while(n&&(k=nt.shift())!==i)if(typeof n===c){if(""+k===k){if(k==="")continue;if(nt.length<dt+1&&!n.nodeType){if(!d&&(v=it(n)&&t._data(n))){for(v=v.events,v=v&&v.propertyChange,yt=v&&v.length;yt--;)if(et=v[yt].data,et&&et.cb===s&&(et.prop===k&&et.path===nt.join(".")||et.prop==="*"))break;if(yt>-1){n=n[k];continue}}if(k==="*"){f(n)?(gt=n.depends)&&e(gt,s,d||pt):ni(ii,"");for(ri in n)bt(n[ri],d);break}else k&&ni(ii+"."+k,nt.join("."))}k=n[k]}if(f(k)){(gt=k.depends)&&e(n,rt(gt,n),s,ht,d||h(pt));break}n=k}bt(n,d)}return wt&&ut(kt,wt),{cbId:wt,bnd:kt,leaf:n}}function b(){return[].push.call(arguments,!0),e.apply(this,arguments)}if(!t)throw"requires jQuery or JsRender";if(!t.observable){var r,g,nt=t.event.special,o=t.views?t.views.sub:{},y=[].splice,ft=[].concat,u=t.isArray,et=t.expando,c="object",s=parseInt,l=o.propChng=o.propChng||"propertyChange",a=o.arrChng=o.arrChng||"arrayChange",p=o._cbBnds=o._cbBnds||{},tt=l+".observe",f=t.isFunction,ot=1,st=1,it=t.hasData;t.observable=v,v.Object=k,v.Array=d,v.observe=e,v.unobserve=b,k.prototype={_data:null,data:function(){return this._data},observe:function(n,t){return e(this._data,n,t)},unobserve:function(n,t){return b(this._data,n,t)},setProperty:function(n,t,r){var f,h,s,e=this,o=e._data;if(n=n||"",o)if(u(n))for(f=n.length;f--;)h=n[f],e.setProperty(h.name,h.value,r===i||r);else if(""+n!==n)for(f in n)e.setProperty(f,n[f],t);else if(n.indexOf(et)<0){for(s=n.split(".");o&&s.length>1;)o=o[s.shift()];e._setProperty(o,s.join("."),t,r)}return e},_setProperty:function(n,t,i,r){var e,o,u=t?n[t]:n;f(u)&&u.set&&(o=u,e=u.set===!0?u:u.set,u=u.call(n)),(u!==i||r&&u!=i)&&(!(u instanceof Date)||u>i||u<i)&&(e?(e.call(n,i),i=o.call(n)):n[t]=i,this._trigger(n,{change:"prop",path:t,value:i,oldValue:u}))},_trigger:function(n,i){t(n).triggerHandler(l,i)}},d.prototype={_data:null,data:function(){return this._data},insert:function(n,t){var i=this._data;return arguments.length===1&&(t=n,n=i.length),n=s(n),n>-1&&n<=i.length&&(t=u(t)?t:[t],t.length&&this._insert(n,t)),this},_insert:function(n,t){var i=this._data,r=i.length;y.apply(i,[n,0].concat(t)),this._trigger({change:"insert",index:n,items:t},r)},remove:function(n,t){var r,u=this._data;return n===i&&(n=u.length-1),n=s(n),t=t?s(t):t===0?0:1,t>-1&&n>-1&&(r=u.slice(n,n+t),t=r.length,t&&this._remove(n,t,r)),this},_remove:function(n,t,i){var r=this._data,u=r.length;r.splice(n,t),this._trigger({change:"remove",index:n,items:i},u)},move:function(n,t,i){if(i=i?s(i):i===0?0:1,n=s(n),t=s(t),i>0&&n>-1&&t>-1&&n!==t){var r=this._data.slice(n,n+i);i=r.length,i&&this._move(n,t,i,r)}return this},_move:function(n,t,i,r){var u=this._data,f=u.length;u.splice(n,i),u.splice.apply(u,[t,0].concat(r)),this._trigger({change:"move",oldIndex:n,index:t,items:r},f)},refresh:function(n){var t=this._data.slice(0);return this._refresh(t,n),this},_refresh:function(n,t){var i=this._data,r=i.length;y.apply(i,[0,i.length].concat(t)),this._trigger({change:"refresh",oldItems:n},r)},_trigger:function(n,i){var r=this._data,u=r.length,f=t([r]);f.triggerHandler(a,n),u!==i&&f.triggerHandler(l,{change:"prop",path:"length",value:u,oldValue:i})}},nt[l]=nt[a]={remove:function(n){(n=n.data)&&(n.off=1,n=n.cb)&&(r=p[g=n._bnd])},teardown:function(){r&&(delete r[t.data(this,"obId")],ut(r,g))}}}})(this,this.jQuery||this.jsviews);
//# sourceMappingURL=jquery.observable.min.js.map