/*! JsViews v1.0.0-alpha: http://github.com/BorisMoore/jsviews and http://jsviews.com/jsviews
informal pre V1.0 commit counter: 49 (Beta Candidate) */
(function(n,t,i){"use strict";function or(n){var i=this.linkedElem;i&&et({target:i[0],stopImmediatePropagation:t.noop},n)}function et(n,r){var p,w,c,f,b,l,e,k,o,a,tt,g,nt,u,s,v,y=n.target,rt=y._jsvBnd,ut=/&(\d+)\+?/g;if(rt)while(a=ut.exec(rt))if((a=h[a[1]])&&(s=a.to)){if(f=a.linkCtx,o=f.view,u=f.tag,k=t(y),g=o.hlp(bt),nt=o.hlp(kt),c=ot(y),p=ni[c],r===i&&(r=it(c)?c(y):p?k[p]():k.attr(c)),l=s[1],s=s[0],l&&(b=it(l)?l:o.getRsc("converters",l)),b&&(r=b.call(u,r)),tt=o.linkCtx,o.linkCtx=f,v={change:"change",oldValue:f._val,value:r},(!g||!(w=g.call(f,n,v)===!1))&&(!u||!u.onBeforeChange||!(w=u.onBeforeChange(n,v)===!1))&&r!==i&&(e=s[0],r!==i&&e&&(e=e._jsvOb?e._ob:e,u&&(u._.chging=!0),d(e).setProperty(s[2]||s[1],r),nt&&nt.call(f,n,v),u))){if(u.onAfterChange)u.onAfterChange(n,v);delete u._.chging}o.linkCtx=tt;w&&n.stopImmediatePropagation()}}function au(n,t,u){var h,s,f,e=this,y=e.data,a=e.elem,l=e.convert,p=a.parentNode,b=p,o=e.view,k=o.ctx,w=o.linkCtx,v=o.hlp(bt);if(o.linkCtx=e,p&&(!v||!(t&&v.call(e,n,t)===!1))&&!(t&&n.data.prop!=="*"&&n.data.prop!==t.path)){if(t&&(e.eventArgs=t),t||e._initVal){if(delete e._initVal,s=u.call(o.tmpl,y,o,r),h=vu(s,e,f,e.attr||ot(a,!0,l!==i)),f=e.tag){if(t&&f.onUpdate&&f.onUpdate(n,t,s)===!1||h==="none"){f.tagCtxs=s=s[0]?s:[s];f.tagCtx=s[0];h===c&&f.onBeforeLink&&f.onBeforeLink();ct(f,f.tagCtx);ei(e,y,a);o.linkCtx=w;return}if(f._.chging)return;s=f.tagName.slice(-1)===":"?r._cnvt(f.tagName.slice(0,-1),o,s):r._tag(f,o,o.tmpl,s,!0)}else u._ctxs&&(l=l===""?"true":l,s=l?r._cnvt(l,o,s):r._tag(u._ctxs,o,o.tmpl,s,!0),f=o._.tag,h=e.attr||h);sr(s,e,h,f)&&t&&(v=o.hlp(kt))&&v.call(e,n,t)}f&&(f.contents=hi,f.nodes=ci,f.childTags=li,f.currentCtxs=pr,f.update=or,f.refresh=br,ct(f,f.tagCtx));ei(e,y,a);o.linkCtx=w}}function vu(n,r,u,f){var e,h,c,o,s=u&&u.parentElem||r.elem;if(n!==i){if(o=t(s),f=u&&u.attr||f,it(n)&&ut(r.expr+": missing parens"),f==="visible"&&(f="css-display"),c=/^css-/.test(f)&&f.slice(4))e=t.style(s,c),+n===n&&(e=parseInt(e)),e=t.style(s,c);else if(f!=="link"){if(f==="value")s.type===dt&&(e=o.prop(f=w));else if(f===rt)if(s.value===""+n)e=o.prop(w);else return f;e===i&&(h=ni[f],e=h?o[h]():o.attr(f))}r._val=e}return f}function sr(n,r,u,f){var k,o,h,v,d,a,y=n!==i,g=r.data,e=f&&f.parentElem||r.elem,p=t(e),s=r.view,b=r._val,nt=s.ctx,tt=s.linkCtx,l=f||u===c;if(f&&(f.parentElem=f.parentElem||r.expr||f._elCnt?e:e.parentNode,o=f._prv,h=f._nxt),!y){u===c&&f&&f.onBeforeLink&&f.onBeforeLink();return}if(/^css-/.test(u))u==="css-display"&&(n=n?yu(e):"none"),(l=l||b!==n)&&t.style(e,u.slice(4),n);else if(u!=="link"){if(u===w)a=1,n=n&&n!=="false";else if(u===rt)if(e.value===""+n)n=!0,a=1,u=w;else{ei(r,g,e);return}else(u==="selected"||u==="disabled"||u==="multiple"||u==="readonly")&&(n=n&&n!=="false"?u:null);(k=ni[u])?u===c?(s.linkCtx=r,s.ctx=r.ctx,f&&f._.inline?(d=f.nodes(!0),f._elCnt&&(o&&o!==h&&vi(o,h,e,f._tgId,"^",!0),o=o?o.previousSibling:h?h.previousSibling:e.lastChild),t(d).remove(),f&&f.onBeforeLink&&f.onBeforeLink(),v=s.link(s.data,e,o,h,n,f&&{tag:f._tgId,lazyLink:f.tagCtx.props.lazyLink})):(y&&p.empty(),f&&f.onBeforeLink&&f.onBeforeLink(),y&&(v=s.link(g,e,o,h,n,f&&{tag:f._tgId}))),s.linkCtx=tt,s.ctx=nt):(l=l||b!==n)&&(u==="text"&&e.children&&!e.children[0]?e.textContent!==i?e.textContent=n:e.innerText=n===null?"":n:p[k](n)):(l=l||b!==n)&&p[a?"prop":"attr"](u,n===i&&!a?null:n);r._val=n}return v||l}function hr(n,t){var i=this,r=i.hlp(bt),u=i.hlp(kt);if(!r||r.call(this,n,t)!==!1){if(t){var o=t.change,f=t.index,e=t.items;switch(o){case"insert":i.addViews(f,e);break;case"remove":i.removeViews(f,e.length);break;case"move":i.refresh();break;case"refresh":i.refresh()}}u&&u.call(this,n,t)}}function yu(t){var i,u,f=n.getComputedStyle,r=(t.currentStyle||f.call(n,t,"")).display;return r!=="none"||(r=ur[u=t.nodeName])||(i=o.createElement(u),o.body.appendChild(i),r=(f?f.call(n,i,""):i.currentStyle).display,ur[u]=r,o.body.removeChild(i)),r}function ui(n){var f,e,u=n.data,r=n._.bnd;if(!n._.useKey&&r)if((e=n._.bndArr)&&(t([e[1]]).off(wt,e[0]),n._.bndArr=i),r!==!!r&&r._.inline)u?r._.arrVws[n._.id]=n:delete r._.arrVws[n._.id];else if(u){f=function(t){t.data&&t.data.off||hr.apply(n,arguments)};t([u]).on(wt,f);n._.bndArr=[f,u]}}function ot(n,t,i){var u=n.nodeName.toLowerCase(),r=f.merge[u]||n.contentEditable==="true"&&{to:c,from:c};return r?t?u==="input"&&n.type===rt?rt:r.to:r.from:t?i?"text":c:""}function cr(n,r,u,f,e,o,s){var p,c,v,w,b,l=n.parentElem,h=n._prv,a=n._nxt,y=n._elCnt;if(h&&h.parentNode!==l&&ut("Missing parentNode"),s){w=n.nodes();y&&h&&h!==a&&vi(h,a,l,n._.id,"_",!0);n.removeViews(i,i,!0);c=a;y&&(h=h?h.previousSibling:a?a.previousSibling:l.lastChild);t(w).remove();for(b in n._.bnds)at(b)}else{if(r){if(v=f[r-1],!v)return!1;h=v._nxt}y?(c=h,h=c?c.previousSibling:l.lastChild):c=h.nextSibling}p=u.render(e,o,n._.useKey&&s,n,s||r,!0);n.link(e,l,h,c,p,v)}function fi(n,t,r){var u,f,e;return r?(e="^`",f=t._.tag||{_:{inline:!0,bnd:r},tagCtx:{view:t},flow:!0},u=f._tgId,u||(h[u=fr++]=f,f._tgId=""+u)):(e="_`",v[u=t._.id]=t),"#"+u+e+(n===i?"":n)+"/"+u+e}function ei(n,t,r){var f,l,c,a=n.convertBack,u=n.tag,e=[],o=n._bndId||""+fr++,v=n._hdlr;if(delete n._bndId,u&&(c=u.linkedElem,e=u.depends||e,e=it(e)?u.depends(u):e),!n._depends||""+n._depends!=""+e){if(n._depends&&d._apply(!1,[t],n._depends,v,!0),f=d._apply(!1,[t],n.fn.paths,e,v,n._ctxCb),f.elem=r,f.linkCtx=n,f._tgId=o,r._jsvBnd=r._jsvBnd||"",r._jsvBnd+="&"+o,c)for(f.to=[[],a],l=c.length;l--;)c[l]._jsvBnd=r._jsvBnd+"+";if(n._depends=e,n.view._.bnds[o]=o,h[o]=f,u){if(u.onAfterBind)u.onAfterBind(f);u.flow||u._.inline||(r.setAttribute(s,(r.getAttribute(s)||"")+"#"+o+"^/"+o+"^"),u._tgId=""+o)}(c||a!==i)&&wr(f,a)}}function lr(n,t,i,r,u,f,e){return oi(this,n,t,i,r,u,f,e)}function oi(n,r,u,e,s,h,c,a){if(n&&r){if(r=r.jquery?r:t(r),!b){b=o.body;t(b).on(di,et).on("blur","[contenteditable]",function(n){var t=f.noValidate;f.noValidate=!0;et(n);f.noValidate=t})}for(var k,nt,tt,g,w,d,y,it,rt=fi,ft=e&&e.target==="replace",ut=r.length;ut--;)if(y=r[ut],""+n===n)w=p(y),it=w.ctx,w.ctx=e,st(n,y,p(y),u),w.ctx=it;else{if(h=h||p(y),n.markup!==i)h.link===!1&&(e=e||{},e.link=rt=!1),ft&&(d=y.parentNode),tt=n.render(u,e,s,h,i,rt),d?(c=y.previousSibling,a=y.nextSibling,t.cleanData([y],!0),d.removeChild(y),y=d):(c=a=i,t(y).empty());else if(n!==!0)break;if(y._dfr&&!a){for(g=l(y._dfr,!0,er),k=0,nt=g.length;k<nt;k++)w=g[k],(w=v[w.id])&&w.data!==i&&w.parent.removeViews(w._.key,i,!0);y._dfr=""}h.link(u,y,c,a,tt,i,e)}}return r}function pu(n,r,u,f,c,y,w){function au(n,t,r,u,f,e,o,h,l,a,v,y){var p,w="";return b=h||l||"",u=u||a,r=r||y,ai&&!r&&(u||b||e)&&(ai=i,nt=dt.shift()),u=u||r,u&&(ai=i,pt&&(r||y?ri[nt]||(p="'<"+nt+".../"):ri[u]?p="'<\/"+u:dt.length&&u===nt||(p="Mismatch: '<\/"+u),p&&ir(p+">' in:\n"+c)),ur=it,nt=dt.shift(),it=ii[nt],a=a?"<\/"+a+">":"",ur&&(ot+=at,at="",it?ot+="-":(w=a+nr+"@"+ot+gi+(v||""),ot=hu.shift()))),it?(e?at+=e:t=a||y||"",b&&(t+=b,at&&(t+=" "+s+'="'+at+'"',at=""))):t=e?t+w+f+nr+e+gi+o+b:w||n,b&&(dt.unshift(nt),nt=b.slice(1),dt[0]&&dt[0]===fu[nt]&&ut("Parent of <tr> must be <tbody>"),ai=ri[nt],(it=ii[nt])&&!ur&&(hu.unshift(ot),ot=""),ur=it,ot&&it&&(ot+="+")),t}function yi(n,t){var o,l,u,e,f,a,s,c=[];if(n){for(n._tkns.charAt(0)==="@"&&(t=d.previousSibling,d.parentNode.removeChild(d),d=null),wt=n.length;wt--;){if(ft=n[wt],u=ft.ch,o=ft.path)for(rt=o.length-1;l=o.charAt(rt--);)l==="+"?o.charAt(rt)==="-"?(rt--,t=t.previousSibling):t=t.parentNode:t=t.lastChild;u==="^"?(b=h[f=ft.id])&&(s=t&&(!d||d.parentNode!==t),(!d||s)&&(b.parentElem=t),ft.elCnt&&s&&(t._dfr=(ft.open?"#":"/")+f+u+(t._dfr||"")),c.push([s?null:d,ft])):(g=v[f=ft.id])&&(g.link||(g.parentElem=t||d&&d.parentNode||r,k(g,vt),g._.onRender=fi,g._.onArrayChange=hr,ui(g)),e=g.parentElem,ft.open?(g._elCnt=ft.elCnt,t?t._dfr="#"+f+u+(t._dfr||""):(g._prv||(e._dfr=ht(e._dfr,"#"+f+u)),g._prv=d)):(t&&(!d||d.parentNode!==t)?(t._dfr="/"+f+u+(t._dfr||""),g._nxt=i):d&&(g._nxt||(e._dfr=ht(e._dfr,"/"+f+u)),g._nxt=d),oi=g.linkCtx,(a=g.ctx&&g.ctx.onAfterCreate||yu)&&a.call(oi,g)))}for(wt=c.length;wt--;)er.push(c[wt])}return!n||n.elCnt}function vu(n){var t,i;if(n)for(wt=n.length,rt=0;rt<wt;rt++)if(ft=n[rt],lt.id)lt.id=lt.id!==ft.id&&lt.id;else if(i=b=h[ft.id].linkCtx.tag,!b.flow){if(!ar){for(t=1;i=i.parent;)t++;di=di||t}(ar||t===di)&&(!wr||b.tagName===wr)&&lr.push(b)}}function tu(){for(sr=ti?r.querySelectorAll(tt):t(tt,r).get(),gt=sr.length,u&&u.innerHTML&&(pi=ti?u.querySelectorAll(tt):t(tt,u).get(),u=pi.length?pi[pi.length-1]:u),di=0,yt=0;yt<gt;yt++)if(d=sr[yt],u&&!eu)eu=d===u;else if(f&&d===f)break;else d.parentNode&&lu(l(d,i,lr&&cu))&&!lt&&d.getAttribute(a)&&er.push([d]);if(vr(u,it),vr(f,it),lt){bt&&bt.resolve();return}for(it&&ot+at&&(d=f,ot&&(f?yi(l(ot+"+",!0),f):yi(l(ot,!0),r)),yi(l(at,!0),r),f&&(et=f.getAttribute(s),(gt=et.indexOf(fr)+1)&&(et=et.slice(gt+fr.length-1)),f.setAttribute(s,at+et))),gt=er.length,yt=0;yt<gt;yt++)d=er[yt],kt=d[1],d=d[0],kt?(b=h[kt.id],(oi=b.linkCtx)&&(b=oi.tag,b.linkCtx=oi),kt.open?(d&&(b.parentElem=d.parentNode,b._prv=d),b._elCnt=kt.elCnt,!b||b.onBeforeLink&&b.onBeforeLink()===!1||b._.bound||(b._.bound=!0,g=b.tagCtx.view,st(i,b._prv,g,g.data||n,kt.id)),b._.linking=!0):(b._nxt=d,b._.linking&&(kr=b.tagCtx,g=kr.view,b.contents=hi,b.nodes=ci,b.childTags=li,b.currentCtxs=pr,b.update=or,b.refresh=br,delete b._.linking,b._.bound||(b._.bound=!0,st(i,b._prv,g,g.data||n,kt.id)),ct(b,kr)))):(g=p(d),st(d.getAttribute(a),d,g,g.data||n,i,w));bt&&bt.resolve()}var oi,b,yt,gt,rt,wt,sr,d,g,ft,kt,pi,wi,cr,ki,ni,lr,ar,wr,kr,di,lt,iu,dr,uu,si,nt,ai,vi,tr,et,it,ur,ei,at,fr,eu,bt,gr=this,su=gr._.id+"_",ot="",er=[],dt=[],hu=[],yu=gr.hlp(nu),lu=yi;if(y&&(bt=y.lazyLink&&t.Deferred(),y.tmpl?cr="/"+y._.id+"_":(lt=y.get,y.tag&&(su=y.tag+"^",y=!0)),y=y===!0),lt&&(lu=vu,lr=lt.tags,ar=lt.deep,wr=lt.name),r=r?""+r===r?t(r)[0]:r.jquery?r[0]:r:gr.parentElem||o.body,nt=r.tagName.toLowerCase(),it=!!ii[nt],u=u&&yr(u,it),f=f&&yr(f,it)||null,c!==i){if(tr=o.createElement("div"),vi=tr,fr=at="",ei=r.namespaceURI==="http://www.w3.org/2000/svg"?"svg_ns":(si=ru.exec(c))&&si[1]||"",bi&&si&&si[2]&&ut("Unsupported: "+si[2]),it){for(ni=f;ni&&!(ki=l(ni));)ni=ni.nextSibling;(et=ki?ki._tkns:r._dfr)&&(wi=cr||"",(y||!cr)&&(wi+="#"+su),rt=et.indexOf(wi),rt+1&&(rt+=wi.length,fr=at=et.slice(0,rt),et=et.slice(rt),ki?ni.setAttribute(s,et):r._dfr=et))}for(ai=i,c=(""+c).replace(ou,au),pt&&dt.length&&ir("Mismatched '<"+nt+"...>' in:\n"+c),rr.appendChild(tr),ei=e[ei]||e.div,iu=ei[0],vi.innerHTML=ei[1]+c+ei[2];iu--;)vi=vi.lastChild;for(rr.removeChild(tr),dr=o.createDocumentFragment();uu=vi.firstChild;)dr.appendChild(uu);r.insertBefore(dr,f)}return bt?setTimeout(tu,0):tu(),bt&&bt.promise()}function st(n,t,r,f,e,o){var w,v,b,l,k,d,y,p,a,s,tt;if(e)s=h[e],s=s.linkCtx?s.linkCtx.tag:s,a=s.linkCtx||{data:f,elem:s._elCnt?s.parentElem:t,view:r,ctx:r.ctx,attr:c,fn:s._.bnd,tag:s,_bndId:e},ar(a,a.fn);else if(n&&t)for(w=r.tmpl,n=wu(n,ot(t)),g.lastIndex=0;v=g.exec(n);)tt=g.lastIndex,b=e?c:v[1],y=v[3],k=v[10],l=i,a={data:f,elem:s&&s._elCnt?s.parentElem:t,view:r,ctx:o||r.ctx,attr:b,_initVal:!v[2]},v[6]&&(!b&&(l=/:([\w$]*)$/.exec(k))&&(l=l[1],l!==i&&(d=-l.length-1,y=y.slice(0,d-1)+nt,k=k.slice(0,d))),l===null&&(l=i),a.convert=v[5]||""),a.expr=b+y,p=w.links[y],p||(w.links[y]=p=u.tmplFn(yi+y+pi,w,!0,l),u.parse(k,p.paths=[],w)),a.fn=p,b||l===i||(a.convertBack=l),ar(a,p),g.lastIndex=tt}function ar(n,t){function i(i,r){au.call(n,i,r,t)}i.noArray=!0;n._ctxCb=bu(n.view);n._hdlr=i;i(!0)}function ht(n,t){var i;return n?(i=n.indexOf(t),i+1?n.slice(0,i)+n.slice(i+t.length):n):""}function si(n){return n&&(""+n===n?n:n.tagName==="SCRIPT"?n.type.slice(3):n.nodeType===1&&n.getAttribute(s)||"")}function l(n,t,i){function e(n,t,i,r,e,o){u.push({elCnt:f,id:r,ch:e,open:t,close:i,path:o,token:n})}var f,r,u=[];if(r=t?n:si(n))return u.elCnt=!n.type,f=r.charAt(0)==="@"||!n.type,u._tkns=r,r.replace(i||lu,e),u}function vr(n,t){n&&(n.type==="jsv"?n.parentNode.removeChild(n):t&&n.getAttribute(a)===""&&n.removeAttribute(a))}function yr(n,t){for(var i=n;t&&i&&i.nodeType!==1;)i=i.previousSibling;return i&&(i.nodeType!==1?(i=o.createElement("SCRIPT"),i.type="jsv",n.parentNode.insertBefore(i,n)):si(i)||i.getAttribute(a)||i.setAttribute(a,"")),i}function wu(n,i){return n=t.trim(n).replace(uu,"\\$&"),n.slice(-1)!==nt?n=yt+":"+n+(i?":":"")+nt:n}function hi(n,r){n!==!!n&&(r=n,n=i);var f,u=t(this.nodes());return u[0]&&(f=r?u.filter(r):u,u=n&&r?f.add(u.find(r)):f),u}function ci(n,t,i){var r,u=this,f=u._elCnt,o=!t&&f,e=[];for(t=t||u._prv,i=i||u._nxt,r=o?t===u._nxt?u.parentElem.lastSibling:t:u._.inline===!1?t||u.linkCtx.elem.firstChild:t&&t.nextSibling;r&&(!i||r!==i);)(n||f||r.tagName!=="SCRIPT")&&e.push(r),r=r.nextSibling;return e}function li(n,t){n!==!!n&&(t=n,n=i);var r=this,o=r.link?r:r.tagCtx.view,u=r._prv,f=r._elCnt,e=[];return u&&o.link(i,r.parentElem,f?u.previousSibling:u,r._nxt,i,{get:{tags:e,deep:n,name:t,id:f&&r._tgId}}),e}function pr(){var n=this.tagCtx.view;return this._.bnd.call(n.tmpl,n.data,n,r)}function ct(n,t){var o,s,u,a,f,v,y,p,c,l=t.view,e=n.linkCtx=n.linkCtx||{tag:n,data:l.data,view:l,ctx:l.ctx};if(n.onAfterLink)n.onAfterLink(t,e);if(s=n.targetTag?n.targetTag.linkedElem:n.linkedElem,!n._.chging&&s&&(u=s[0])){if(a=u.type===rt,o=e.convert,f=o?it(o)?o(t.args[0]):r._cnvt(o,l,t):t.args[0],u!==e.elem)for(p=s.length;p--;){if(u=s[p],c=u._jsvLnkdEl,n._.inline&&(!c||c!==n&&c.targetTag!==n))for(u._jsvLnkdEl=n,u._jsvBnd=e.elem?e.elem._jsvBnd:n._prv._jsvBnd,v=u._jsvBnd.slice(1).split("&"),y=v.length;y--;)wr(h[v[y]],e.convertBack);a&&(u[w]=f===u.value)}a||u.value===i||f===i||(u.type===dt?u[w]=f&&f!=="false":u.value=f)}}function wr(n,t){var e,f,r,o,u=n.linkCtx,s=u.data,i=u.fn.paths;if(n){for((e=i._jsvto)&&(i=e),f=i.length;f&&""+(r=i[--f])!==r;);r&&(!u.tag||u.tag.tagCtx.args.length)?(r=i[f]=r.split("^").join("."),n.to=r.charAt(0)==="."?[[o=i[f-1],r.slice(1)],t]:[u._ctxCb(i[0])||[s,i[0]],t],e&&o&&(n.to[0][0]=u._ctxCb(o,s))):n.to=[[],t]}}function br(n){var u,f,t=this,e=t.linkCtx,o=t.tagCtx.view;return t.disposed&&ut("Removed tag"),n===i&&(n=r._tag(t,o,o.tmpl,t.currentCtxs?t.currentCtxs():t.tagCtxs,!0)),n+""===n&&(f=t._.inline?c:e.attr||ot(t.parentElem,!0),u=sr(n,e,f,t)),ct(t,t.tagCtx),u||t}function lt(n){for(var e,o,h,r,s,t,u,c=[],a=n.length,f=a;f--;)c.push(n[f]);for(f=a;f--;)if(r=c[f],r.parentNode){if(u=r._jsvBnd)for(u=u.slice(1).split("&"),r._jsvBnd="",o=u.length;o--;)at(u[o],r._jsvLnkdEl);if(s=l(si(r)+(r._dfr||""),!0,su))for(e=0,h=s.length;e<h;e++)t=s[e],t.ch==="_"?(t=v[t.id])&&t.data!==i&&t.parent.removeViews(t._.key,i,!0):at(t.id)}}function at(n,i){var c,e,r,o,s,l,a,v,f=h[n];if(f)if(e=f.linkCtx,r=e.tag,i)delete r.linkedElem;else{for(c in f.bnd)o=f.bnd[c],s=".obs"+f.cbId,t.isArray(o)?t([o]).off(wt+s).off(ki+s):t(o).off(ki+s),delete f.bnd[c];if(e=f.linkCtx,r){if(l=r.tagCtxs)for(a=l.length;a--;)(v=l[a].map)&&v.unmap();r.onDispose&&r.onDispose();r._elCnt||(r._prv&&r._prv.parentNode.removeChild(r._prv),r._nxt&&r._nxt.parentNode.removeChild(r._nxt));r.disposed=!0}delete e.view._.bnds[n];delete h[n];delete u._cbBnds[f.cbId]}}function ai(n,r){return n===i?(b&&(t(b).off(di,et),b=i),n=!0,y.removeViews(),lt(o.body.getElementsByTagName("*"))):r&&(r=r.jquery?r:t(r),n===!0?r.each(function(){for(var n;(n=p(this,!0))&&n.parent;)n.parent.removeViews(n._.key,i,!0);lt(this.getElementsByTagName("*"))}):n===i&&lt(r)),r}function kr(n,t){return ai(this,n,t)}function bu(n){return n=n||t.view(),function(t,i){var f,u,e=[i];if(n&&t){if(t._jsvOb)return t._jsvOb.call(n.tmpl,i,n,r);if(t.charAt(0)==="~")return t.slice(0,4)==="~tag"&&(u=n.ctx,t.charAt(4)==="."&&(f=t.slice(5).split("."),u=u.tag),f)?u?[u,f.join("."),i]:[]:(t=t.slice(1).split("."),(i=n.hlp(t.shift()))&&(t.length&&e.unshift(t.join(".")),e.unshift(i)),i?e:[]);if(t.charAt(0)==="#")return t==="#data"?[]:[n,t.replace(eu,""),i]}}}function ku(n){return n.type===dt?n[w]:n.value}function vi(n,t,i,r,u,f){var y,c,p,o,b,a,e,w=0,k=n===t;if(n){for(p=l(n)||[],y=0,c=p.length;y<c;y++){if(o=p[y],a=o.id,a===r&&o.ch===u)if(f)c=0;else break;k||(b=o.ch==="_"?v[a]:h[a].linkCtx.tag,o.open?b._prv=t:o.close&&(b._nxt=t));w+=a.length+2}w&&n.setAttribute(s,n.getAttribute(s).slice(w));e=t?t.getAttribute(s):i._dfr;(c=e.indexOf("/"+r+u)+1)&&(e=p._tkns.slice(0,w)+e.slice(c+(f?-1:r.length+1)));e&&(t?t.setAttribute(s,e):i._dfr=e)}else i._dfr=ht(i._dfr,"#"+r+u),f||t||(i._dfr=ht(i._dfr,"/"+r+u))}function du(n,i,r,u){switch(u.change){case"set":for(var f=i.length;f--;)if(i[f].key===u.path)break;f===-1?u.path&&t.observable(i).insert({key:u.path,prop:u.value}):u.value===null?(delete n[u.path],t.observable(i).remove(f)):t.observable(i[f]).setProperty("prop",u.value)}}function gu(n,i,r,u){var f;switch(u.change){case"set":u.path==="prop"?t.observable(n).setProperty(r.target.key,u.value):(t.observable(n).setProperty(u.oldValue,null),delete n[u.oldValue],t.observable(n).setProperty(u.value,r.target.prop));break;case"remove":f=u.items[0];t.observable(n).setProperty(f.key,null);delete n[f.key];break;case"insert":f=u.items[0];f.key&&t.observable(n).setProperty(f.key,f.prop)}}if(!t)throw"requires jQuery";if(!t.views)throw"requires JsRender";if(!t.observable)throw"requires jquery.observable";if(!t.link){var vt,b,p,g,yi,yt,nt,pi,wi,pt,bi,a,tt,e,o=n.document,r=t.views,u=r.sub,f=r.settings,k=u.extend,y=u.View(i,"top"),it=t.isFunction,dr=r.templates,gr=r.converters,d=t.observable,ft=d.observe,s="data-jsv",ki=u.propChng=u.propChng||"propertyChange",wt=u.arrChng=u.arrChng||"arrayChange",nf=u._cbBnds=u._cbBnds||{},di="change.jsv",bt="onBeforeChange",kt="onAfterChange",nu="onAfterCreate",w="checked",dt="checkbox",rt="radio",gi='"><\/script>',nr='<script type="jsv',gt="script,["+s+"]",c="html",ni={value:"val",input:"val",html:c,text:"text"},tr={from:"value",to:"value"},tu=t.cleanData,iu=f.delimiters,ut=u.error,ir=u.syntaxError,ru=/<(?!script)(\w+)(?:[^>]*(on\w+)\s*=)?[^>]*>/,uu=/['"\\]/g,rr=o.createDocumentFragment(),ti=o.querySelector,ii={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},fu={tr:"table"},ri={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},ur={},v={0:y},h={},fr=1,eu=/^#(view\.?)?/,ou=/(^|(\/>)|<\/(\w+)>|>|)(\s*)([#\/]\d+[_^])`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*)/g,er=/(#)()(\d+)(_)/g,su=/(#)()(\d+)([_^])/g,hu=/(?:(#)|(\/))(\d+)(_)/g,cu=/(#)()(\d+)(\^)/g,lu=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g;u.onStoreItem=function(n,i,r){r&&n===dr&&(r.link=lr,r.unlink=kr,i&&(t.link[i]=function(){return lr.apply(r,arguments)},t.unlink[i]=function(){return kr.apply(r,arguments)}))};(f.delimiters=function(){var n=iu.apply(r,arguments);return yi=n[0],yt=n[1],nt=n[2],pi=n[3],wi=n[4],g=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+wi+")?(\\"+yt+u.rTag+"\\"+nt+")","g"),this})();u.viewInfos=l;vt={addViews:function(n,t,i){var u,o,r=this,f=t.length,e=r.views;if(!r._.useKey&&f&&(i=r.tmpl)&&(o=e.length+f,cr(r,n,i,e,t,r.ctx)!==!1))for(u=n+f;u<o;u++)d(e[u]).setProperty("index",u);return r},removeViews:function(n,r,u){function o(n){var s,h,c,e,o,l,r=f[n];if(r&&r.link){if(s=r._.id,u||(l=r.nodes()),r.removeViews(i,i,!0),r.data=i,e=r._prv,o=r._nxt,c=r.parentElem,u||(r._elCnt&&vi(e,o,c,s,"_"),t(l).remove()),!r._elCnt)try{e.parentNode.removeChild(e);o.parentNode.removeChild(o)}catch(a){}ui(r);for(h in r._.bnds)at(h);delete v[s]}}var e,l,s,h=this,c=!h._.useKey,f=h.views;if(c&&(s=f.length),n===i)if(c){for(e=s;e--;)o(e);h.views=[]}else{for(l in f)o(l);h.views={}}else if(r===i&&(c?r=1:(o(n),delete f[n])),c&&r){for(e=n+r;e-->n;)o(e);if(f.splice(n,r),s=f.length)while(n<s)d(f[n]).setProperty("index",n++)}return this},refresh:function(n){var t=this,i=t.parent;return i&&(cr(t,t.index,t.tmpl,i.views,t.data,n,!0),ui(t)),t},nodes:ci,contents:hi,childTags:li,link:pu};gr.merge=function(n){var t,i=this.linkCtx._val||"",r=this.tagCtx.props.toggle;return r&&(t=r.replace(/[\\^$.|?*+()[{]/g,"\\$&"),t="(\\s(?="+t+"$)|(\\s)|^)("+t+"(\\s|$))",i=i.replace(new RegExp(t),"$2"),n=i+(n?(i&&" ")+r:"")),n};r.tags("on",{attr:"none",onAfterLink:function(n,r){var o=this,s=t(r.elem),f=n.args,u=n.props.data,e=f.pop(),h=f[1]||null,c=n.props.context;if(u=u!==i?u:null,e&&e.call)s.on(f[0]||"click",h,u,function(n){e.call(c||o.leaf,n,{change:n.type,view:r.view,linkCtx:r})})},onAfterBind:function(n){this.leaf=n.leaf},flow:!0});k(r.tags["for"],{onArrayChange:function(n,t){var i,r=this,u=t.change;if(r.tagCtxs[1]&&(u==="insert"&&n.target.length===t.items.length||u==="remove"&&!n.target.length||u==="refresh"&&!t.oldItems.length!=!n.target.length))r.refresh();else for(i in r._.arrVws)i=r._.arrVws[i],i.data===n.target&&i._.onArrayChange.apply(i,arguments);n.done=!0},onAfterLink:function(){for(var u,o,i,f,e=this,r=e._ars||{},s=e.tagCtxs,c=s.length,h=e.selected||0,n=0;n<=h;n++)u=s[n],f=u.map?u.map.tgt:u.args.length?u.args[0]:u.view.data,(i=r[n])&&f!==i[0]&&(ft(i[0],i[1],!0),delete r[n]),!r[n]&&t.isArray(f)&&(ft(f,o=function(n,t){e.onArrayChange(n,t)}),r[n]=[f,o]);for(n=h+1;n<c;n++)(i=r[n])&&(ft(i[0],i[1],!0),delete r[n]);e._ars=r},onDispose:function(){var n,t=this;for(n in t._ars)ft(t._ars[n][0],t._ars[n][1],!0)}});r.tags({props:t.extend({},r.tags["for"],u.DataMap(r.tags.props.getTgt,du,gu))});k(t,{view:r.view=p=function(n,r,u){r!==!!r&&(u=r,r=i);var f,e,h,c,w,s,b,a,p=0,k=o.body;if(n&&n!==k&&y._.useKey>1&&(n=""+n===n?t(n)[0]:n.jquery?n[0]:n,n))if(r){for(a=ti?n.querySelectorAll(gt):t(gt,n).get(),s=a.length,h=0;h<s;h++)for(b=a[h],e=l(b,i,er),c=0,w=e.length;c<w;c++)if(f=e[c],(f=v[f.id])&&(f=f&&u?f.get(!0,u):f,f))return f}else while(n){if(e=l(n,i,hu))for(s=e.length;s--;)if(f=e[s],f.open){if(p<1)return f=v[f.id],f&&u?f.get(u):f||y;p--}else p++;n=n.previousSibling||n.parentNode}return r?i:y},link:r.link=oi,unlink:r.unlink=ai,cleanData:function(n){n.length&&(lt(n),tu.call(t,n))}});k(t.fn,{link:function(n,t,i,r,u,f,e){return oi(n,this,t,i,r,u,f,e)},unlink:function(n){return ai(n,this)},view:function(n){return p(this[0],n)}});k(y,{tmpl:{links:{},tags:{}}});k(y,vt);y._.onRender=fi;f({wrapMap:e={option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],area:[1,"<map>","<\/map>"],param:[1,"<object>","<\/object>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],svg_ns:[1,"<svg>","<\/svg>"],div:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","<\/div>"]},linkAttr:a="data-link",merge:{input:{from:ku,to:"value"},textarea:tr,select:tr,optgroup:{to:"label"}},jsrDbgMode:f.debugMode,debugMode:function(t){f.jsrDbgMode(t);t?n._jsv={views:v,bindings:h}:delete n._jsv},jsv:function(){f.debugMode(f._dbgMode);a=f.linkAttr;tt=gt+",["+a+"]";pt=!f.noValidate;bi=f.noDomLevel0;e.optgroup=e.option;e.tbody=e.tfoot=e.colgroup=e.caption=e.thead;e.th=e.td}})}})(this,this.jQuery);
/*
//# sourceMappingURL=jquery.views.min.js.map
*/