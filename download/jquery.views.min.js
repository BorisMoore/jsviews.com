/*! JsViews v1.0.0-alpha: http://github.com/BorisMoore/jsviews and http://jsviews.com/jsviews
informal pre V1.0 commit counter: 42 (Beta Candidate) */
(function(n,t,i){"use strict";function ir(n){var i=this.linkedElem;i&&kt({target:i[0],stopImmediatePropagation:t.noop},n)}function kt(n,u){var w,b,v,s,h,a,c,k,e,y,rt,g,tt,f,l,p=n.target,ut=p._jsvBnd,ft=/&(\d+)\+?/g;if(ut)while(y=ft.exec(ut))(y=o[y[1]])&&(l=y.to)&&(s=y.linkCtx,e=s.view,f=s.tag,k=t(p),g=e.hlp(at,s.ctx),tt=e.hlp(vt,s.ctx),v=it(p),w=wi[v],u===i&&(u=d(v)?v(p):w?k[w]():k.attr(v)),a=l[1],l=l[0],a&&(d(a)?h=a:(h=e.tmpl.converters,h=h&&h[a]||r.converters[a])),h&&(u=h.call(f,u)),rt=e.linkCtx,e.linkCtx=s,g&&(b=g.call(e,n,u)===!1)||f&&f.onBeforeChange&&(b=f.onBeforeChange(n,u)===!1)||u===i||(f&&f.onChange&&(u=f.onChange(u)),c=l[0],u!==i&&c&&(c=c._jsvOb?c._ob:c,f&&(f._.chging=!0),nt(c).setProperty(l[2]||l[1],u),f&&delete f._.chging,tt&&tt.call(s,n))),e.linkCtx=rt,b&&n.stopImmediatePropagation())}function fu(n,t,u){var h,w,s,f,o=this,v=o.data,l=o.elem,c=o.convert,y=l.parentNode,k=y,e=o.view,b=e.ctx,p=e.linkCtx,a=e.hlp(at);if(e.linkCtx=o,e.ctx=o.ctx,y&&(!a||!(t&&a.call(o,n,t)===!1))&&!(t&&n.data.prop!=="*"&&n.data.prop!==t.path)){if(t&&(o.eventArgs=t),t||o._initVal){if(delete o._initVal,s=u.call(e.tmpl,v,e,r),h=o.attr||it(l,!0,c!==i),f=o.tag){if(t&&f.onUpdate&&f.onUpdate(n,t,s)===!1||h==="none"){f.tagCtxs=s=s[0]?s:[s],f.tagCtx=s[0],h==="html"&&f.onBeforeLink&&f.onBeforeLink(),ft(f,f.tagCtx),ni(o,v,l),e.linkCtx=p;return}if(f._.chging)return;s=f.tagName.slice(-1)===":"?r._cnvt(f.tagName.slice(0,-1),e,s):r._tag(f,e,e.tmpl,s,!0)}else u._ctxs&&(c=c===""?"true":c,s=c?r._cnvt(c,e,s):r._tag(u._ctxs,e,e.tmpl,s,!0),f=e._.tag,h=o.attr||h);rr(s,this,h,f),t&&w&&(a=e.hlp(vt))&&a.call(o,n,t)}f&&(f.contents=ri,f.nodes=ui,f.childTags=fi,f.currentCtxs=cr,f.update=ir,f.refresh=ar,ft(f,f.tagCtx)),ni(o,v,l),e.linkCtx=p,e.ctx=b}}function rr(n,r,u,f){var a,v,y,f,o,h,p,b,w=n!==i,k=r.data,e=f&&f.parentElem||r.elem,c="attr",l=t(e),s=r.view,nt=s.ctx,tt=s.linkCtx;if(f&&(f.parentElem=f.parentElem||r.expr||f._elCnt?e:e.parentNode,o=f._prv,h=f._nxt,u=f.attr||u),!w){u==="html"&&f&&f.onBeforeLink&&f.onBeforeLink();return}if(d(n)&&g(r.expr+": missing parens"),u==="visible"&&(u="css-display",n=n?eu(e):"none"),y=u.lastIndexOf("css-",0)===0&&u.substr(4))(v=t.style(e,y)!==n)&&t.style(e,y,n);else if(u!=="link"){if(u==="value")e.type==="checkbox"&&(n=n&&n!=="false",c="prop",u="checked");else if(u==="radio")if(e.value===""+n)n=!0,c="prop",u="checked";else{ni(r,k,e);return}else(u==="selected"||u==="disabled"||u==="multiple"||u==="readlonly")&&(n=n&&n!=="false"?u:null);a=wi[u],a?(v=f||l[a]()!==n)&&(u==="html"?(s.linkCtx=r,s.ctx=r.ctx,f&&f._.inline?(b=f.nodes(!0),f._elCnt&&(o&&o!==h&&oi(o,h,e,f._tgId,"^",!0),o=o?o.previousSibling:h?h.previousSibling:e.lastChild),t(b).remove(),f&&f.onBeforeLink&&f.onBeforeLink(),p=s.link(s.data,e,o,h,n,f&&{tag:f._tgId,lazyLink:f.tagCtx.props.lazyLink})):(w&&l.empty(),f&&f.onBeforeLink&&f.onBeforeLink(),w&&(p=s.link(k,e,o,h,n,f&&{tag:f._tgId}))),s.linkCtx=tt,s.ctx=nt):u!=="text"||e.children[0]?l[a](n):e.textContent!==i?e.textContent=n:e.innerText=n===null?"":n):(v=l[c](u)!=n)&&l[c](u,n===i&&c==="attr"?null:n)}return p}function ur(n,t){var i=this,r=i.hlp(at),u=i.hlp(vt);if(!r||r.call(n,t)!==!1){if(t){var o=t.change,f=t.index,e=t.items;switch(o){case"insert":i.addViews(f,e);break;case"remove":i.removeViews(f,e.length);break;case"move":i.refresh();break;case"refresh":i.refresh()}}u&&u.call(this,n,t)}}function eu(t){var i,u,e=n.getComputedStyle,r=(t.currentStyle||e.call(n,t,"")).display;return r!=="none"||(r=gi[u=t.nodeName])||(i=f.createElement(u),f.body.appendChild(i),r=(e?e.call(n,i,""):i.currentStyle).display,gi[u]=r,f.body.removeChild(i)),r}function dt(n){var f,e,u=n.data,r=n._.bnd;if(!n._.useKey&&r)if((e=n._.bndArr)&&(t([e[1]]).off(lt,e[0]),n._.bndArr=i),r!==!!r&&r._.inline)u?r._.arrVws[n._.id]=n:delete r._.arrVws[n._.id];else if(u){f=function(t){t.data&&t.data.off||ur.apply(n,arguments)};t([u]).on(lt,f);n._.bndArr=[f,u]}}function it(n,t,i){var u=n.nodeName.toLowerCase(),r=c.merge[u];return r?t?u==="input"&&n.type==="radio"?"radio":r.to.toAttr:r.from.fromAttr:t?i?"text":"html":""}function fr(n,r,u,f,e,o,s){var p,c,v,w,b,l=n.parentElem,h=n._prv,a=n._nxt,y=n._elCnt;if(h&&h.parentNode!==l&&g("Missing parentNode"),s){w=n.nodes(),y&&h&&h!==a&&oi(h,a,l,n._.id,"_",!0),n.removeViews(i,i,!0),c=a,y&&(h=h?h.previousSibling:a?a.previousSibling:l.lastChild),t(w).remove();for(b in n._.bnds)ot(b)}else{if(r){if(v=f[r-1],!v)return!1;h=v._nxt}y?(c=h,h=c?c.previousSibling:l.lastChild):c=h.nextSibling}p=u.render(e,o,n,s||r,n._.useKey&&s,!0),n.link(e,l,h,c,p,v)}function gt(n,t,r){var u,f,e;return r?(e="^`",f=t._.tag||{_:{inline:!0,bnd:r},tagCtx:{view:t},flow:!0},u=f._tgId,u||(o[u=nr++]=f,f._tgId=""+u)):(e="_`",l[u=t._.id]=t),"#"+u+e+(n===i?"":n)+"/"+u+e}function ni(n,r,u){var c,a,l,v=n.convertBack,f=n.tag,s=[],h=n._bndId||""+nr++,y=n._hdlr;if(delete n._bndId,f&&(l=f.linkedElem,s=f.depends||s,s=d(s)?f.depends(f):s),!n._depends||""+n._depends!=""+s){if(n._depends&&li(r,n._depends,y,!0),c=li(t.isArray(r)?[r]:r,n.fn.paths||n.fn,s,y,n._ctxCb),c.elem=u,c.linkCtx=n,c._tgId=h,u._jsvBnd=u._jsvBnd||"",u._jsvBnd+="&"+h,l)for(c.to=[[],v],a=l.length;a--;)l[a]._jsvBnd=u._jsvBnd+"+";n._depends=s,n.view._.bnds[h]=h,o[h]=c,!f||f.flow||f._.inline||(u.setAttribute(e,(u.getAttribute(e)||"")+"#"+h+"^/"+h+"^"),f._tgId=""+h),(l||v!==i)&&lr(c,v)}}function er(n,t,i,r,u,f){return ti(this,n,t,i,r,u,f)}function ti(n,r,u,e,o,s,c){if(n&&r){if(r=r.jquery?r:t(r),!p){p=f.body;t(p).on(vi,kt)}for(var w,g,nt,d,y,b,a,k,tt,it=gt,ft=e&&e.target==="replace",ut=r.length;ut--;)if(a=r[ut],""+n===n)y=v(a),k=y.ctx,y.ctx=e,rt(n,a,v(a),u),y.ctx=k;else{if(o=o||v(a),n.markup!==i)o.link===!1&&(e=e||{},e.link=it=!1),ft&&(b=a.parentNode),nt=n.render(u,e,o,i,i,it),b?(s=a.previousSibling,c=a.nextSibling,t.cleanData([a],!0),b.removeChild(a),a=b):(s=c=i,t(a).empty());else if(n!==!0)break;if(a._dfr&&!c){for(d=h(a._dfr,!0,tr),w=0,g=d.length;w<g;w++)y=d[w],(y=l[y.id])&&y.data!==i&&y.parent.removeViews(y._.key,i,!0);a._dfr=""}tt=o.data,k=o.ctx,o.data=u,o.ctx=e,o.link(u,a,s,c,nt),o.data=tt,o.ctx=k}}return r}function ou(n,r,u,a,p,w){function lu(n,t,r,u,f,o,s,h,c,l,a,v){var y,w="";return b=h||c||"",u=u||l,r=r||v,ai&&!r&&(u||b||o)&&(ai=i,it=ei.shift()),u=u||r,u&&(ai=i,ct&&(r||v?bt[it]||(y="'<"+it+".../"):bt[u]?y="'<\/"+u:ei.length&&u===it||(y="Mismatch: '<\/"+u),y&&ki(y+">' in:\n"+p)),fr=et,it=ei.shift(),et=wt[it],l=l?"<\/"+l+">":"",fr&&(at+=yt,yt="",et?at+="-":(w=l+pi+"@"+at+yi+(a||""),at=hu.shift()))),et?(o?yt+=o:t=l||v||"",b&&(t+=b,yt&&(t+=" "+e+'="'+yt+'"',yt=""))):t=o?t+w+f+pi+o+yi+s+b:w||n,b&&(ei.unshift(it),it=b.slice(1),ei[0]&&ei[0]===dr[it]&&g("Parent of <tr> must be <tbody>"),ai=bt[it],(et=wt[it])&&!fr&&(hu.unshift(at),at=""),fr=et,at&&et&&(at+="+")),t}function wi(n,t){var s,a,u,e,f,v,h,c=[];if(n){for(n.tokens.charAt(0)==="@"&&(t=d.previousSibling,d.parentNode.removeChild(d),d=null),ni=n.length;ni--;){if(ht=n[ni],u=ht.ch,s=ht.path)for(ot=s.length-1;a=s.charAt(ot--);)a==="+"?s.charAt(ot)==="-"?(ot--,t=t.previousSibling):t=t.parentNode:t=t.lastChild;u==="^"?(b=o[f=ht.id])&&(h=t&&(!d||d.parentNode!==t),(!d||h)&&(b.parentElem=t),ht.elCnt&&(ht.open?t&&(t._dfr="#"+f+u+(t._dfr||"")):h&&(t._dfr="/"+f+u+(t._dfr||""))),c.push([h?null:d,ht])):(nt=l[f=ht.id])&&(nt.link||(nt.parentElem=t||d&&d.parentNode||r,k(nt,st),nt._.onRender=gt,nt._.onArrayChange=ur,dt(nt)),e=nt.parentElem,ht.open?(nt._elCnt=ht.elCnt,t?t._dfr="#"+f+u+(t._dfr||""):(nt._prv||(e._dfr=ut(e._dfr,"#"+f+u)),nt._prv=d)):(t&&(!d||d.parentNode!==t)?(t._dfr="/"+f+u+(t._dfr||""),nt._nxt=i):d&&(nt._nxt||(e._dfr=ut(e._dfr,"/"+f+u)),nt._nxt=d),ci=nt.linkCtx,(v=yu||nt.ctx&&nt.ctx.onAfterCreate)&&v.call(ci,nt)))}for(ni=c.length;ni--;)or.push(c[ni])}return!n||n.elCnt}function au(n){var t,i;if(n)for(ni=n.length,ot=0;ot<ni;ot++)if(ht=n[ot],vt.id)vt.id=vt.id!==ht.id&&vt.id;else if(i=b=o[ht.id].linkCtx.tag,!b.flow){if(!wr){for(t=1;i=i.parent;)t++;tr=tr||t}(wr||t===tr)&&(!br||b.tagName===br)&&yr.push(b)}}function uu(){for(lr=pt?r.querySelectorAll(tt):t(tt,r).get(),oi=lr.length,u&&u.innerHTML&&(bi=pt?u.querySelectorAll(tt):t(tt,u).get(),u=bi.length?bi[bi.length-1]:u),tr=0,kt=0;kt<oi;kt++)if(d=lr[kt],u&&!ou)ou=d===u;else if(a&&d===a)break;else d.parentNode&&cu(h(d,i,yr&&ru))&&!vt&&d.getAttribute(y)&&or.push([d]);if(sr(u,et),sr(a,et),vt){ti&&ti.resolve();return}for(et&&at+yt&&(d=a,at&&(a?wi(h(at+"+",!0),a):wi(h(at,!0),r)),wi(h(yt,!0),r),a&&(lt=a.getAttribute(e),(oi=lt.indexOf(er)+1)&&(lt=lt.slice(oi+er.length-1)),a.setAttribute(e,yt+lt))),oi=or.length,kt=0;kt<oi;kt++)d=or[kt],ii=d[1],d=d[0],ii?(b=o[ii.id],(ci=b.linkCtx)&&(b=ci.tag,b.linkCtx=ci),ii.open?(d&&(b.parentElem=d.parentNode,b._prv=d),b._elCnt=ii.elCnt,!b||b.onBeforeLink&&b.onBeforeLink()===!1||b._.bound||(b._.bound=!0,nt=b.tagCtx.view,rt(i,b._prv,nt,nt.data||n,ii.id)),b._.linking=!0):(b._nxt=d,b._.linking&&(gr=b.tagCtx,nt=gr.view,b.contents=ri,b.nodes=ui,b.childTags=fi,b.currentCtxs=cr,b.update=ir,b.refresh=ar,delete b._.linking,b._.bound||(b._.bound=!0,rt(i,b._prv,nt,nt.data||n,ii.id)),ft(b,gr)))):(nt=v(d),rt(d.getAttribute(y),d,nt,nt.data||n));ti&&ti.resolve()}var ci,b,kt,oi,ot,ni,lr,d,nt,ht,ii,bi,gi,vr,nr,si,yr,wr,br,gr,tr,vt,fu,tu,eu,li,it,ai,vi,rr,lt,et,fr,hi,yt,er,ou,ti,vu=c.noDomLevel0,iu=this,su=iu._.id+"_",at="",or=[],ei=[],hu=[],yu=iu.hlp(pr),cu=wi;if(w&&(ti=w.lazyLink&&t.Deferred(),w.tmpl?vr="/"+w._.id+"_":(vt=w.get,w.tag&&(su=w.tag+"^",w=!0)),w=w===!0),vt&&(cu=au,yr=vt.tags,wr=vt.deep,br=vt.name),r=r?""+r===r?t(r)[0]:r.jquery?r[0]:r:iu.parentElem||f.body,it=r.tagName.toLowerCase(),et=!!wt[it],u=u&&hr(u,et),a=a&&hr(a,et)||null,p!==i){if(rr=f.createElement("div"),vi=rr,er=yt="",hi=r.namespaceURI==="http://www.w3.org/2000/svg"?"svg_ns":(li=kr.exec(p))&&li[1]||"",vu&&li&&li[2]&&g("Unsupported: "+li[2]),et){for(si=a;si&&!(nr=h(si));)si=si.nextSibling;(lt=nr?nr.tokens:r._dfr)&&(gi=vr||"",(w||!vr)&&(gi+="#"+su),ot=lt.indexOf(gi),ot+1&&(ot+=gi.length,er=yt=lt.slice(0,ot),lt=lt.slice(ot),nr?si.setAttribute(e,lt):r._dfr=lt))}for(ai=i,p=(""+p).replace(nu,lu),ct&&ei.length&&ki("Mismatched '<"+it+"...>' in:\n"+p),di.appendChild(rr),hi=s[hi]||s.div,fu=hi[0],vi.innerHTML=hi[1]+p+hi[2];fu--;)vi=vi.lastChild;for(di.removeChild(rr),tu=f.createDocumentFragment();eu=vi.firstChild;)tu.appendChild(eu);r.insertBefore(tu,a)}return ti?setTimeout(uu,0):uu(),ti&&ti.promise()}function rt(n,t,r,f,e){var y,l,p,h,k,d,a,v,c,s,g;if(e)s=o[e],s=s.linkCtx?s.linkCtx.tag:s,c=s.linkCtx||{data:f,elem:s._elCnt?s.parentElem:t,view:r,ctx:r.ctx,attr:"html",fn:s._.bnd,tag:s,_bndId:e},or(c,c.fn);else if(n&&t)for(y=r.tmpl,n=su(n,t),w.lastIndex=0;l=w.exec(n);)g=w.lastIndex,p=e?"html":l[1],a=l[3],k=l[10],h=i,c={data:f,elem:s&&s._elCnt?s.parentElem:t,view:r,ctx:r.ctx,attr:p,_initVal:!l[2]},l[6]&&(!p&&(h=/:([\w$]*)$/.exec(k))&&(h=h[1],h!==i&&(d=-h.length-1,a=a.slice(0,d-1)+b,k=k.slice(0,d))),h===null&&(h=i),c.convert=l[5]||""),c.expr=p+a,v=y.links[a],v||(y.links[a]=v=u.tmplFn(si+a+hi,y,!0,h),u.parse(k,v.paths=[],y)),c.fn=v,p||h===i||(c.convertBack=h),or(c,v),w.lastIndex=g}function or(n,t){function i(i,r){fu.call(n,i,r,t)}n._ctxCb=hu(n.view),n._hdlr=i,n.tag&&n.tag.onArrayChange&&(i.array=function(t,i){n.tag.onArrayChange(t,i)}),i(!0)}function ut(n,t){var i;return n?(i=n.indexOf(t),i+1?n.slice(0,i)+n.slice(i+t.length):n):""}function ii(n){return n&&(""+n===n?n:n.tagName==="SCRIPT"?n.type.slice(3):n.nodeType===1&&n.getAttribute(e)||"")}function h(n,t,i){function e(n,t,i,r,e,o){u.push({elCnt:f,id:r,ch:e,open:t,close:i,path:o,token:n})}var f,r,u=[];if(r=t?n:ii(n))return u.elCnt=!n.type,f=r.charAt(0)==="@"||!n.type,u.tokens=r,r.replace(i||uu,e),u}function sr(n,t){n&&(n.type==="jsv"?n.parentNode.removeChild(n):t&&n.getAttribute(y)===""&&n.removeAttribute(y))}function hr(n,t){for(var i=n;t&&i&&i.nodeType!==1;)i=i.previousSibling;return i&&(i.nodeType!==1?(i=f.createElement("SCRIPT"),i.type="jsv",n.parentNode.insertBefore(i,n)):ii(i)||i.getAttribute(y)||i.setAttribute(y,"")),i}function su(n,i){return n=t.trim(n),n.slice(-1)!==b?n=ht+":"+n+(it(i)?":":"")+b:n}function ri(n,r){n!==!!n&&(r=n,n=i);var f,u=t(this.nodes());return u[0]&&(f=r?u.filter(r):u,u=n&&r?f.add(u.find(r)):f),u}function ui(n,t,i){var r,u=this,f=u._elCnt,o=!t&&f,e=[];for(t=t||u._prv,i=i||u._nxt,r=o?t===u._nxt?u.parentElem.lastSibling:t:u._.inline===!1?t||u.linkCtx.elem.firstChild:t&&t.nextSibling;r&&(!i||r!==i);)(n||f||r.tagName!=="SCRIPT")&&e.push(r),r=r.nextSibling;return e}function fi(n,t){n!==!!n&&(t=n,n=i);var r=this,o=r.link?r:r.tagCtx.view,u=r._prv,f=r._elCnt,e=[];return u&&o.link(i,r.parentElem,f?u.previousSibling:u,r._nxt,i,{get:{tags:e,deep:n,name:t,id:f&&r._tgId}}),e}function cr(){var n=this.tagCtx.view;return this._.bnd.call(n.tmpl,n.data,n,r)}function ft(n,t){var s,h,u,a,f,v,y,p,c,l=t.view,e=n.linkCtx=n.linkCtx||{tag:n,data:l.data,view:l,ctx:l.ctx};if(n.onAfterLink)n.onAfterLink(t,e);if(h=n.targetTag?n.targetTag.linkedElem:n.linkedElem,!n._.chging&&h&&(u=h[0])){if(a=u.type==="radio",s=e.convert,f=s?d(s)?s(t.args[0]):r._cnvt(s,l,t):t.args[0],u!==e.elem)for(p=h.length;p--;){if(u=h[p],c=u._jsvLnkdEl,n._.inline&&(!c||c!==n&&c.targetTag!==n))for(u._jsvLnkdEl=n,u._jsvBnd=e.elem?e.elem._jsvBnd:n._prv._jsvBnd,v=u._jsvBnd.slice(1).split("&"),y=v.length;y--;)lr(o[v[y]],e.convertBack);a&&(u.checked=f===u.value)}a||u.value===i||f===i||(u.type==="checkbox"?u.checked=f&&f!=="false":u.value=f)}}function lr(n,t){var e,f,r,o,u=n.linkCtx,s=u.data,i=u.fn.paths;if(n){for((e=i.to)&&(i=e),f=i.length;f&&""+(r=i[--f])!==r;);r&&(!u.tag||u.tag.tagCtx.args.length)?(r=i[f]=r.split("^").join("."),n.to=r.charAt(0)==="."?[[o=i[f-1],r.slice(1)],t]:[u._ctxCb(i[0])||[s,i[0]],t],e&&o&&(n.to[0][0]=u._ctxCb(o,s))):n.to=[[],t]}}function ar(n){var u,f,t=this,e=t.linkCtx,o=t.tagCtx.view;return t.disposed&&g("Removed tag"),n===i&&(n=r._tag(t,o,o.tmpl,t.currentCtxs?t.currentCtxs():t.tagCtxs,!0)),n+""===n&&(f=t._.inline?"html":e.attr||it(t.parentElem,!0),u=rr(n,e,f,t)),ft(t,t.tagCtx),u||t}function et(n){for(var e,o,c,r,s,t,u,a=[],v=n.length,f=v;f--;)a.push(n[f]);for(f=v;f--;)if(r=a[f],r.parentNode){if(u=r._jsvBnd)for(u=u.slice(1).split("&"),r._jsvBnd="",o=u.length;o--;)ot(u[o],r._jsvLnkdEl);if(s=h(ii(r)+(r._dfr||""),!0,tu))for(e=0,c=s.length;e<c;e++)t=s[e],t.ch==="_"?(t=l[t.id])&&t.data!==i&&t.parent.removeViews(t._.key,i,!0):ot(t.id)}}function ot(n,i){var c,e,r,s,h,f=o[n];if(f)if(e=f.linkCtx,r=e.tag,i)delete r.linkedElem;else{for(c in f.bnd)s=f.bnd[c],h=".obs"+f.cbId,t.isArray(s)?t([s]).off(lt+h).off(ai+h):t(s).off(ai+h),delete f.bnd[c];e=f.linkCtx,r&&(r.onDispose&&r.onDispose(),r._elCnt||(r._prv&&r._prv.parentNode.removeChild(r._prv),r._nxt&&r._nxt.parentNode.removeChild(r._nxt)),r.disposed=!0),delete e.view._.bnds[n],delete o[n],delete u._cbBnds[f.cbId]}}function ei(n,r){return arguments.length?r&&(r=r.jquery?r:t(r),n===!0?r.each(function(){for(var n;(n=v(this,!0))&&n.parent;)n.parent.removeViews(n._.key,i,!0);et(this.getElementsByTagName("*"))}):n===i&&et(r)):(p&&(t(p).off(vi,kt),p=i),n=!0,a.removeViews(),et(f.body.getElementsByTagName("*"))),r}function vr(n,t){return ei(this,n,t)}function hu(n){return n=n||t.view(),function(t,i){var f,u,e=[i];if(n&&t){if(t._jsvOb)return t._jsvOb.call(n.tmpl,i,n,r);if(t.charAt(0)==="~")return t.slice(0,4)==="~tag"&&(u=n.ctx,t.charAt(4)==="."&&(f=t.slice(5).split("."),u=u.tag),f)?u?[u,f.join("."),i]:[]:(t=t.slice(1).split("."),(i=n.hlp(t.shift()))&&(t.length&&e.unshift(t.join(".")),e.unshift(i)),i?e:[]);if(t.charAt(0)==="#")return t==="#data"?[]:[n,t.replace(gr,""),i]}}}function cu(n){return n.type==="checkbox"?n.checked:n.value}function oi(n,t,i,r,u,f){var y,a,p,c,b,v,s,w=0,k=n===t;if(n){for(p=h(n)||[],y=0,a=p.length;y<a;y++){if(c=p[y],v=c.id,v===r&&c.ch===u)if(f)a=0;else break;k||(b=c.ch==="_"?l[v]:o[v].linkCtx.tag,c.open?b._prv=t:c.close&&(b._nxt=t)),w+=v.length+2}w&&n.setAttribute(e,n.getAttribute(e).slice(w)),s=t?t.getAttribute(e):i._dfr,(a=s.indexOf("/"+r+u)+1)&&(s=p.tokens.slice(0,w)+s.slice(a+(f?-1:r.length+1))),s&&(t?t.setAttribute(e,s):i._dfr=s)}else i._dfr=ut(i._dfr,"#"+r+u),f||t||(i._dfr=ut(i._dfr,"/"+r+u))}if(!t)throw"requires jQuery";if(!t.views)throw"requires JsRender";if(!t.observable)throw"requires jquery.observable";if(!t.link){var st,p,v,w,si,ht,b,hi,ci,ct,f=n.document,r=t.views,u=r.sub,c=r.settings,k=u.extend,a=u.View(i,"top"),d=t.isFunction,yr=r.templates,nt=t.observable,li=nt.observe,e="data-jsv",y=c.linkAttr||"data-link",ai=u.propChng=u.propChng||"propertyChange",lt=u.arrChng=u.arrChng||"arrayChange",lu=u._cbBnds=u._cbBnds||{},vi="change.jsv",at="onBeforeChange",vt="onAfterChange",pr="onAfterCreate",yi='"><\/script>',pi='<script type="jsv',yt="script,["+e+"]",tt=yt+",["+y+"]",wi={value:"val",input:"val",html:"html",text:"text"},bi={from:{fromAttr:"value"},to:{toAttr:"value"}},wr=t.cleanData,br=c.delimiters,g=u.error,ki=u.syntaxError,kr=/<(?!script)(\w+)(?:[^>]*(on\w+)\s*=)?[^>]*>/,di=f.createDocumentFragment(),pt=f.querySelector,wt={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},dr={tr:"table"},s=c.wrapMap={option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],area:[1,"<map>","<\/map>"],param:[1,"<object>","<\/object>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],svg_ns:[1,"<svg>","<\/svg>"],div:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","<\/div>"]},bt={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},gi={},l={0:a},o={},nr=1,gr=/^#(view\.?)?/,nu=/(^|(\/>)|<\/(\w+)>|>|)(\s*)([#\/]\d+[_^])`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*)/g,tr=/(#)()(\d+)(_)/g,tu=/(#)()(\d+)([_^])/g,iu=/(?:(#)|(\/))(\d+)(_)/g,ru=/(#)()(\d+)(\^)/g,uu=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g;s.optgroup=s.option,s.tbody=s.tfoot=s.colgroup=s.caption=s.thead,s.th=s.td,u.onStoreItem=function(n,i,r){r&&n===yr&&(r.link=er,r.unlink=vr,i&&(t.link[i]=function(){return er.apply(r,arguments)},t.unlink[i]=function(){return vr.apply(r,arguments)}))},(c.delimiters=function(){var n=br.apply(r,arguments);return si=n[0],ht=n[1],b=n[2],hi=n[3],ci=n[4],w=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+ci+")?(\\"+ht+u.rTag+"\\"+b+")","g"),this})(),u.viewInfos=h,st={addViews:function(n,t,i){var u,o,r=this,f=t.length,e=r.views;if(!r._.useKey&&f&&(i=r.tmpl)&&(o=e.length+f,fr(r,n,i,e,t,r.ctx)!==!1))for(u=n+f;u<o;u++)nt(e[u]).setProperty("index",u);return r},removeViews:function(n,r,u){function o(n){var h,c,e,o,s,a,r=f[n];if(r&&r.link){h=r._.id,u||(a=r.nodes()),r.removeViews(i,i,!0),r.data=i,o=r._prv,s=r._nxt,e=r.parentElem,u||(r._elCnt&&oi(o,s,e,h,"_"),t(a).remove()),r._elCnt||(o.parentNode&&e.removeChild(o),s.parentNode&&e.removeChild(s)),dt(r);for(c in r._.bnds)ot(c);delete l[h]}}var e,a,s,h=this,c=!h._.useKey,f=h.views;if(c&&(s=f.length),n===i)if(c){for(e=s;e--;)o(e);h.views=[]}else{for(a in f)o(a);h.views={}}else if(r===i&&(c?r=1:(o(n),delete f[n])),c&&r){for(e=n+r;e-->n;)o(e);if(f.splice(n,r),s=f.length)while(n<s)nt(f[n]).setProperty("index",n++)}return this},refresh:function(n){var t=this,i=t.parent;return i&&(fr(t,t.index,t.tmpl,i.views,t.data,n,!0),dt(t)),t},nodes:ui,contents:ri,childTags:fi,link:ou},c.merge={input:{from:{fromAttr:cu},to:{toAttr:"value"}},textarea:bi,select:bi,optgroup:{from:{fromAttr:"label"},to:{toAttr:"label"}}},c.debugMode&&(ct=!c.noValidate,n._jsv={views:l,bindings:o}),k(t,{view:r.view=v=function(n,r,u){r!==!!r&&(u=r,r=i);var e,o,c,v,w,s,b,y,p=0,k=f.body;if(n&&n!==k&&a._.useKey>1&&(n=""+n===n?t(n)[0]:n.jquery?n[0]:n,n))if(r){for(y=pt?n.querySelectorAll(yt):t(yt,n).get(),s=y.length,c=0;c<s;c++)for(b=y[c],o=h(b,i,tr),v=0,w=o.length;v<w;v++)if(e=o[v],(e=l[e.id])&&(e=e&&u?e.get(!0,u):e,e))return e}else while(n){if(o=h(n,i,iu))for(s=o.length;s--;)if(e=o[s],e.open){if(p<1)return e=l[e.id],e&&u?e.get(u):e||a;p--}else p++;n=n.previousSibling||n.parentNode}return r?i:a},link:r.link=ti,unlink:r.unlink=ei,cleanData:function(n){n.length&&(et(n),wr.call(t,n))}}),k(t.fn,{link:function(n,t,i,r,u,f){return ti(n,this,t,i,r,u,f)},unlink:function(n){return ei(n,this)},view:function(n){return v(this[0],n)}}),k(a,{tmpl:{links:{},tags:{}}}),k(a,st),a._.onRender=gt}})(this,this.jQuery);
//@ sourceMappingURL=jquery.views.min.js.map