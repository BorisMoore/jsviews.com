/*! jquery.views.js v0.9.79 (Beta): http://jsviews.com/ */
!function(e,t){var n=t.jQuery;"object"==typeof exports?module.exports=n?e(t,n):function(n){return e(t,n)}:"function"==typeof define&&define.amd?define(["jquery","./jsrender","./jquery.observable"],function(n,i,r){return e(t,n,i,r)}):e(t,!1)}(function(e,t,n,i){"use strict";function r(e,n,i){var r,a,o,l,s,d,f,p,c,g,u,h,_,m,x,b,k,y=e.target,C=y._jsvBnd;if(C)for(;g=lt.exec(C);)if((g=Ye[g[1]])&&(x=g.to)){if(l=g.linkCtx,c=l.view,m=l.tag,p=t(y),h=c.hlp(Ee),_=c.hlp(Se),o=v(y),r=Me[o],void 0===i&&(i=ae(o)?o(y):r?p[r]():p.attr(o)),d=x[1],x=x[0],x=x+""===x?[l.data,x]:x,d&&(s=ae(d)?d:c.getRsc("converters",d)),"SELECT"===l.elem.nodeName&&(l.elem._jsvSel=i=i||(l.elem.multiple?[]:i)),s&&(i=s.call(m,i)),u=c.linkCtx,c.linkCtx=l,b={change:"change",oldValue:l._val,value:i},!(h&&(a=h.call(l,e,b)===!1)||m&&m.onBeforeChange&&(a=m.onBeforeChange(e,b)===!1)||void 0===i)&&(f=x[0],void 0!==i&&f)){if(f._jsv)for(k=f,f=l.data;k&&k.sb;)f=l._ctxCb(k,f),k=k.sb;m&&(m._.chging=!0),K(f).setProperty(x[2]||x[1],i),_&&_.call(l,e,b),m&&(m.onAfterChange&&m.onAfterChange(e,b),m._.chging=void 0),l._val=i}c.linkCtx=u}}function a(e,t,n){var i,r,a,l,d,f,p=this,c=p.tag,u=p.data,h=p.elem,_=p.convert,m=h.parentNode,x=p.view,b=x.linkCtx,k=x.hlp(Ee);if(x.linkCtx=p,m&&(!k||!t||k.call(p,e,t)!==!1)&&(!t||"*"===e.data.prop||e.data.prop===t.path)){if(t&&(p.eventArgs=t),t||p._toLk){if(p._toLk=0,n._er)try{r=n(u,x)}catch(y){d=n._er,f=ue(y,x,new Function("data,view","return "+d+";")(u,x)),r=[{props:{},args:[f]}]}else r=n(u,x,ne);if(i=o(r,p,c=p.tag,p.attr||v(h,!0,void 0!==_)),c){if(l=d||c._er,r=r[0]?r:[r],a=!l&&t&&c.onUpdate&&c.onUpdate(e,t,r)===!1,N(c,r,l),a||i===Ve)return i===ve&&c.onBeforeLink&&c.onBeforeLink(),A(c),g(p,u,h),void(x.linkCtx=b);if(c._.chging)return;r=":"===c.tagName?ne._cnvt(c.cvt,x,r[0]):ne._tag(c,x,x.tmpl,r,!0,f)}else n._tag&&(_=""===_?De:_,r=_?ne._cnvt(_,x,r[0]||r):ne._tag(n._tag,x,x.tmpl,r,!0,f),O(c=p.tag,!0),i=p.attr||i);s(r,p,i,c)&&t&&(k=x.hlp(Se))&&k.call(p,e,t),p._noUpd=0,c&&(c._er=d,A(c,t))}g(p,u,h),x.linkCtx=b}}function o(e,n,i,r){var a,o,l,s,d=i&&i.parentElem||n.elem;if(void 0!==e){if(s=t(d),r=i&&i.attr||r,ae(e)&&ge(n.expr+": missing parens"),l=/^css-/.test(r)&&r.slice(4))a=t.style(d,l),+e===e&&(a=parseInt(a));else if("link"!==r){if("value"===r)d.type===Be&&(a=s.prop(r=Ne));else if(r===Ie){if(d.value!==""+e)return r;a=s.prop(Ne)}void 0===a&&(o=Me[r],a=o?s[o]():s.attr(r))}n._val=a}return r}function l(e,t){e._df=t,e[(t?"set":"remove")+"Attribute"](Ue,"")}function s(n,i,r,a){var o,s,d,f,v,p,c,u,h,_,m,x,b,k,y=r!==Ve&&void 0!==n&&!i._noUpd,C=i.data,w=a&&a.parentElem||i.elem,j=w.parentNode,A=t(w),E=i.view,S=i._val,L=E.linkCtx,N=a;if(a&&(a.parentElem=a.parentElem||i.expr||a._elCnt?w:j,s=a._prv,d=a._nxt),!y)return void(r===ve&&a&&a.onBeforeLink&&a.onBeforeLink());if("visible"===r&&(r="css-display"),/^css-/.test(r))"visible"===i.attr&&(b=(w.currentStyle||st.call(e,w,"")).display,n?(n=w._jsvd||b,n!==Ve||(n=Ge[x=w.nodeName])||(m=ee.createElement(x),ee.body.appendChild(m),n=Ge[x]=(m.currentStyle||st.call(e,m,"")).display,ee.body.removeChild(m))):(w._jsvd=b,n=Ve)),(N=N||S!==n)&&t.style(w,r.slice(4),n);else if("link"!==r){if(/^data-/.test(r)&&t.data(w,r.slice(5),n),r===Ne)p=!0,n=n&&"false"!==n;else if(r===Ie){if(w.value!==""+n)return void g(i,C,w);n=p=!0,r=Ne}else"selected"===r||"disabled"===r||"multiple"===r||"readonly"===r?n=n&&"false"!==n?r:null:"value"===r&&"SELECT"===w.nodeName&&(w._jsvSel=H(n)?n:""+n);(o=Me[r])?r===ve?(E.linkCtx=i,a&&a._.inline?(v=a.nodes(!0),a._elCnt&&(s&&s!==d?D(s,d,w,a._tgId,"^",!0):(c=w._df)&&(u=a._tgId+"^",h=c.indexOf("#"+u)+1,_=c.indexOf("/"+u),h&&_>0&&(h+=u.length,_>h&&(l(w,c.slice(0,h)+c.slice(_)),P(c.slice(h,_))))),s=s?s.previousSibling:d?d.previousSibling:w.lastChild),t(v).remove(),a&&a.onBeforeLink&&a.onBeforeLink(),f=E.link(E.data,w,s,d,n,a&&{tag:a._tgId,lazyLink:a.tagCtx.props.lazyLink})):(y=y&&S!==n,y&&A.empty(),a&&a.onBeforeLink&&a.onBeforeLink(),y&&(f=E.link(C,w,s,d,n,a&&{tag:a._tgId}))),E.linkCtx=L):((N=N||S!==n)&&("text"===r&&w.children&&!w.children[0]?void 0!==w.textContent?w.textContent=n:w.innerText=null===n?"":n:A[o](n)),!(k=j._jsvSel)||"value"!==r&&A.attr("value")||(w.selected=t.inArray(""+n,H(k)?k:[k])>-1)):(N=N||S!==n)&&A[p?"prop":"attr"](r,void 0!==n||p?n:null),i._val=n}return f||N}function d(e,t){var n=this,i=n.hlp(Ee),r=n.hlp(Se);if(!i||i.call(this,e,t)!==!1){if(t){var a=t.change,o=t.index,l=t.items;switch(n._.srt=t.refresh,a){case"insert":n.addViews(o,l);break;case"remove":n.removeViews(o,l.length);break;case"move":n.removeViews(t.oldIndex,l.length,void 0,!0),n.addViews(o,l);break;case"refresh":n._.srt=void 0,n.fixIndex(0)}}r&&r.call(this,e,t)}}function f(e){var n,i,r=e.type,a=e.data,o=e._.bnd;!e._.useKey&&o&&((i=e._.bndArr)&&(t([i[1]]).off(fe,i[0]),e._.bndArr=void 0),o!==!!o?r?o._.arrVws[e._.id]=e:delete o._.arrVws[e._.id]:r&&a&&(n=function(t){t.data&&t.data.off||d.apply(e,arguments)},t([a]).on(fe,n),e._.bndArr=[n,a]))}function v(e,t,n){var i=e.nodeName.toLowerCase(),r=se._fe[i]||e.contentEditable===De&&{to:ve,from:ve};return r?t?"input"===i&&e.type===Ie?Ie:r.to:r.from:t?n?"text":ve:""}function p(e,n,i,r,a,o,l){var s,d,f,v,p,c=e.parentElem,g=e._prv,u=e._nxt,h=e._elCnt;if(g&&g.parentNode!==c&&ge("Missing parentNode"),l){v=e.nodes(),h&&g&&g!==u&&D(g,u,c,e._.id,"_",!0),e.removeViews(void 0,void 0,!0),d=u,h&&(g=g?g.previousSibling:u?u.previousSibling:c.lastChild),t(v).remove();for(p in e._.bnds)I(p)}else{if(n){if(f=r[n-1],!f)return!1;g=f._nxt}h?(d=g,g=d?d.previousSibling:c.lastChild):d=g.nextSibling}s=i.render(a,o,e._.useKey&&l,e,l||n,!0),e.link(a,c,g,d,s,f)}function c(e,t,n){var i,r;return n?(r="^`",O(n,!0),i=n._tgId,i||(Ye[i=Ze++]=n,n._tgId=""+i)):(r="_`",O(Ce[i=t._.id]=t)),"#"+i+r+(void 0!=e?e:"")+"/"+i+r}function g(e,t,n){var i,r,a,o,l,s=e.tag,d=e.convertBack,f=[],v=e._bndId||""+Ze++,p=e._hdl;if(e._bndId=void 0,s&&(f=s.depends||f,f=ae(f)?s.depends(s):f,a=s.linkedElem),!e._depends||""+e._depends!=""+f){for(e._depends&&K._apply(!1,[t],e._depends,p,!0),o=e.fn.deps.slice(),r=o.length;r--;)l=o[r],l._jsv&&(o[r]=re({},l));i=K._apply(!1,[t],o,f,p,e._ctxCb),i.elem=n,i.linkCtx=e,i._tgId=v,n._jsvBnd=n._jsvBnd||"",n._jsvBnd+="&"+v,e._depends=f,e.view._.bnds[v]=v,Ye[v]=i,a&&(i.to=[[],d]),(a||void 0!==d)&&L(i,s,a&&a[0]||n,d),s&&(s.onAfterBind&&s.onAfterBind(i),s.flow||s._.inline||(n.setAttribute(je,(n.getAttribute(je)||"")+"#"+v+"^/"+v+"^"),s._tgId=""+v))}if(a&&a[0])for(s._.radio&&(a=a.find(Te)),r=a.length;r--;)a[r]._jsvBnd=a[r]._jsvBnd||n._jsvBnd+"+",a[r]._jsvLkEl=s}function u(e,t,n,i,r,a,o){return h(this,e,t,n,i,r,a,o)}function h(e,n,i,a,o,s,d,f){if(a===!0?(o=a,a=void 0):a="object"!=typeof a?void 0:re({},a),e&&n){n=n.jquery?n:t(n),_e||(_e=ee.body,t(_e).on(Ae,r).on("blur","[contenteditable]",r));for(var v,p,g,u,h,_,x,b,k,C=c,w=a&&"replace"===a.target,j=n.length;j--;){if(x=n[j],s=s||xe(x),(k=s===Z)&&(Z.data=(Z.ctx=a||{}).root=i),""+e===e)m(e,x,s,void 0,!0,i,a);else{if(void 0!==e.markup)w&&(_=x.parentNode),g=e.render(i,a,o,s,void 0,C),_?(d=x.previousSibling,f=x.nextSibling,t.cleanData([x],!0),_.removeChild(x),x=_):(d=f=void 0,t(x).empty());else{if(e!==!0||s!==Z)break;b={lnk:1}}if(x._df&&!f){for(u=y(x._df,!0,nt),v=0,p=u.length;p>v;v++)h=u[v],(h=Ce[h.id])&&void 0!==h.data&&h.parent.removeViews(h._.key,void 0,!0);l(x)}s.link(i,x,d,f,g,b,a)}k&&(Z.data=Z.ctx=void 0)}}return n}function _(e,n,i,r,a,o,s,v){function p(e,t,n,i,r,o,l,s,d,f,v,p,c,g){var u,h,m="";return g?(_=0,e):(j=d||f||"",i=i||v,n=n||c,Y&&!n&&(!e||i||j||o&&!_)&&(Y=void 0,G=Ee.shift()),i=i||n,i&&(_=0,Y=void 0,K&&(n||c?Xe[G]||/;svg;|;math;/.test(";"+Ee.join(";")+";")||(u="'<"+G+".../"):Xe[i]?u="'</"+i:Ee.length&&i===G||(u="Mismatch: '</"+i),u&&pe(u+">' in:\n"+a)),re=ie,G=Ee.shift(),ie=Qe[G],v=v?"</"+v+">":"",re&&(we+=oe,oe="",ie?we+="-":(m=v+Oe+"@"+we+Pe+(p||""),we=Se.shift()))),ie?(o?oe+=o:t=v||c||"",j&&(t+=j,oe&&(t+=" "+je+'="'+oe+'"',oe=""))):t=o?t+m+r+(_?"":Oe+o+Pe)+s+j:m||e,K&&l&&(_&&pe("{^{ within elem markup ("+_+' ). Use data-link="..."'),"#"===o.charAt(0)?Ee.unshift(o.slice(1)):o.slice(1)!==(h=Ee.shift())&&pe("Closing tag for {^{...}} under different elem: <"+h+">")),j&&(_=j,Ee.unshift(G),G=j.slice(1),K&&Ee[0]&&Ee[0]===We[G]&&ge("Parent of <tr> must be <tbody>"),Y=Xe[G],(ie=Qe[G])&&!re&&(Se.unshift(we),we=""),re=ie,we&&ie&&(we+="+")),t)}function g(e,t){var i,r,a,o,s,v,p,g=[];if(e){for("@"===e._tkns.charAt(0)&&(t=I.previousSibling,I.parentNode.removeChild(I),I=void 0),N=e.length;N--;){if(V=e[N],a=V.ch,i=V.path)for(L=i.length-1;r=i.charAt(L--);)"+"===r?"-"===i.charAt(L)?(L--,t=t.previousSibling):t=t.parentNode:t=t.lastChild;"^"===a?(j=Ye[s=V.id])&&(p=t&&(!I||I.parentNode!==t),I&&!p||(j.parentElem=t),V.elCnt&&p&&l(t,(V.open?"#":"/")+s+a+(t._df||"")),g.push([p?null:I,V])):(T=Ce[s=V.id])&&(T.parentElem||(T.parentElem=t||I&&I.parentNode||n,T._.onRender=c,T._.onArrayChange=d,f(T)),o=T.parentElem,V.open?(T._elCnt=V.elCnt,t&&!I?l(t,"#"+s+a+(t._df||"")):(T._prv||l(o,b(o._df,"#"+s+a)),T._prv=I)):(!t||I&&I.parentNode===t?I&&(T._nxt||l(o,b(o._df,"/"+s+a)),T._nxt=I):(l(t,"/"+s+a+(t._df||"")),T._nxt=void 0),x=T.linkCtx,(v=T.ctx&&T.ctx.onAfterCreate||Ne)&&v.call(x,T)))}for(N=g.length;N--;)Ae.push(g[N])}return!e||e.elCnt}function u(e){var t,n,i;if(e)for(N=e.length,L=0;N>L;L++)if(V=e[L],n=j=Ye[V.id].linkCtx.tag,i=j.tagName===F,!j.flow||i){if(!R){for(t=1;n=n.parent;)t++;H=H||t}!R&&t!==H||F&&!i||M.push(j)}}function h(){var o,l,d="",f={},v=ke+(he?",["+Ue+"]":"");for(B=Je?n.querySelectorAll(v):t(v,n).get(),S=B.length,i&&i.innerHTML&&(D=Je?i.querySelectorAll(v):t(v,i).get(),i=D.length?D[D.length-1]:i),H=0,E=0;S>E;E++)if(I=B[E],i&&!de)de=I===i;else{if(r&&I===r){he&&(d+=k(I));break}if(I.parentNode)if(he){if(d+=k(I),I._df){for(o=E+1;S>o&&I.contains(B[o]);)o++;f[o-1]=I._df}f[E]&&(d+=f[E]||"")}else ue&&(V=y(I,void 0,rt))&&(V=V[0])&&(fe=fe?V.id!==fe&&fe:V.open&&V.id),!fe&&Be(y(I))&&I.getAttribute(be)&&Ae.push([I])}if(he&&(d+=n._df||"",(l=d.indexOf("#"+he.id)+1)&&(d=d.slice(l+he.id.length)),l=d.indexOf("/"+he.id),l+1&&(d=d.slice(0,l)),u(y(d,void 0,at))),void 0===a&&n.getAttribute(be)&&Ae.push([n]),C(i,ie),C(r,ie),he)return void(ve&&ve.resolve());for(ie&&we+oe&&(I=r,we&&(r?g(y(we+"+",!0),r):g(y(we,!0),n)),g(y(oe,!0),n),r&&(d=r.getAttribute(je),(S=d.indexOf(le)+1)&&(d=d.slice(S+le.length-1)),r.setAttribute(je,oe+d))),S=Ae.length,E=0;S>E;E++)I=Ae[E],q=I[1],I=I[0],q?(j=Ye[q.id])&&((x=j.linkCtx)&&(j=x.tag,j.linkCtx=x),q.open?(I&&(j.parentElem=I.parentNode,j._prv=I),j._elCnt=q.elCnt,j.onBeforeLink&&j.onBeforeLink(),T=j.tagCtx.view,m(void 0,j._prv,T,q.id)):(j._nxt=I,j._.unlinked&&(z=j.tagCtx,T=z.view,A(j)))):m(I.getAttribute(be),I,xe(I),void 0,ue,e,s);ve&&ve.resolve()}var _,x,j,E,S,L,N,B,I,T,V,q,D,P,O,U,$,M,R,F,z,K,H,J,Q,W,X,G,Y,Z,te,ne,ie,re,ae,oe,le,de,fe,ve,ue,he,_e=this,me=_e._.id+"_",we="",Ae=[],Ee=[],Se=[],Ne=_e.hlp(Le),Be=g;if(o&&(ve=o.lazyLink&&t.Deferred(),o.tmpl?O="/"+o._.id+"_":(ue=o.lnk,o.tag&&(me=o.tag+"^",o=!0),(he=o.get)&&(Be=u,M=he.tags,R=he.deep,F=he.name)),o=o===!0),n=n?""+n===n?t(n)[0]:n.jquery?n[0]:n:_e.parentElem||ee.body,K=!se.noValidate&&n.contentEditable!==De,G=n.tagName.toLowerCase(),ie=!!Qe[G],i=i&&w(i,ie),r=r&&w(r,ie)||null,void 0!=a){if(te=ee.createElement("div"),Z=te,le=oe="",ae="http://www.w3.org/2000/svg"===n.namespaceURI?"svg_ns":(X=ce.exec(a))&&X[1]||"",ie){for($=r;$&&!(U=y($));)$=$.nextSibling;(ne=U?U._tkns:n._df)&&(P=O||"",!o&&O||(P+="#"+me),L=ne.indexOf(P),L+1&&(L+=P.length,le=oe=ne.slice(0,L),ne=ne.slice(L),U?$.setAttribute(je,ne):l(n,ne)))}if(Y=void 0,a=(""+a).replace(tt,p),K&&Ee.length&&pe("Mismatched '<"+G+"...>' in:\n"+a),v)return;for(He.appendChild(te),ae=ye[ae]||ye.div,J=ae[0],Z.innerHTML=ae[1]+a+ae[2];J--;)Z=Z.lastChild;for(He.removeChild(te),Q=ee.createDocumentFragment();W=Z.firstChild;)Q.appendChild(W);n.insertBefore(Q,r)}return ve?setTimeout(h,0):h(),ve&&ve.promise()}function m(e,t,n,i,r,a,o){var l,s,d,f,p,c,g,u,h,_,m,b,k=[];if(i)h=Ye[i],h=h.linkCtx?h.linkCtx.tag:h,u=h.linkCtx||{type:"inline",data:n.data,elem:h._elCnt?h.parentElem:t,view:n,ctx:n.ctx,attr:ve,fn:h._.bnd,tag:h,_bndId:i},x(u,u.fn);else if(e&&t){for(a=r?a:n.data,l=n.tmpl,e=j(e,v(t)),b=me.lastIndex=0;s=me.exec(e);)k.push(s),b=me.lastIndex;for(b<e.length&&pe(e);s=k.shift();){for(_=me.lastIndex,d=s[1],c=s[3];k[0]&&"else"===k[0][4];)c+="}{"+k.shift()[3],m=!0;m&&(c+="}{{/"+s[4]+"}"),p=s[9],u={type:r?"top":"link",data:a,elem:t,view:n,ctx:o,attr:d,isLk:r,_toLk:1,_noUpd:s[2]},f=void 0,s[6]&&(f=s[10]||void 0,u.convert=s[5]||"",!d&&void 0!==f&&v(t)&&(u.convertBack=f=f.slice(1))),u.expr=d+c,g=l.links[c],g||(l.links[c]=g=ne.tmplFn(c,l,!0,f,m)),u.fn=g,x(u,g),me.lastIndex=_}}}function x(e,t){function n(n,i){a.call(e,n,i,t)}n.noArray=!0,e.isLk&&O(e.view=new ne.View(ne.extendCtx(e.ctx,e.view.ctx),"link",e.view,e.data,e.expr,void 0,c)),e._ctxCb=V(e.view),e._hdl=n,n(!0)}function b(e,t){var n;return e?(n=e.indexOf(t),n+1?e.slice(0,n)+e.slice(n+t.length):e):""}function k(e){return e&&(""+e===e?e:e.tagName===qe?e.type.slice(3):1===e.nodeType&&e.getAttribute(je)||"")}function y(e,t,n){function i(e,t,n,i,a,l){o.push({elCnt:r,id:i,ch:a,open:t,close:n,path:l,token:e})}var r,a,o=[];return(a=t?e:k(e))?(r=o.elCnt=e.tagName!==qe,r="@"===a.charAt(0)||r,o._tkns=a,a.replace(n||ot,i),o):void 0}function C(e,t){e&&("jsv"===e.type?e.parentNode.removeChild(e):t&&""===e.getAttribute(be)&&e.removeAttribute(be))}function w(e,t){for(var n=e;t&&n&&1!==n.nodeType;)n=n.previousSibling;return n&&(1!==n.nodeType?(n=ee.createElement(qe),n.type="jsv",e.parentNode.insertBefore(n,e)):k(n)||n.getAttribute(be)||n.setAttribute(be,"")),n}function j(e,n){return e=t.trim(e).replace(he,"\\$&"),e.slice(-1)!==X?e=W+":"+e+(n?":":"")+X:e}function A(e,t){var n,i,r,a,o,l,s=e.tagCtx,d=(s.view,s.props),f=e.linkCtx;if(e.onAfterLink&&e.onAfterLink(s,f,t),e._.unlinked=void 0,n=e.targetTag?e.targetTag.linkedElem:e.linkedElem,!e.noVal&&(i=n&&n[0])){if((r=e._.radio)&&(n=n.find(Te)),r||!e._.chging){if(a=e.cvtArgs()[0],r||i!==f.elem){for(o=n.length;o--;)i=n[o],l=i._jsvLkEl,e._.inline&&(!l||l!==e&&l.targetTag!==e)&&(i._jsvLkEl=e,L(Ye[e._tgId],e,i),i._jsvBnd="&"+e._tgId+"+"),r&&(i[Ne]=a===i.value);f._val=a}void 0!==a&&(r||void 0===i.value?i.contentEditable===De&&(i.innerHTML=a):i.type===Be?i[Ne]=a&&"false"!==a:n.val(a))}e.setSize&&(d.height&&n.height(d.height),d.width&&n.width(d.width)),d["class"]&&n.addClass(d["class"]),d.id&&(n[0].id=d.id),d.name&&n.attr("name",d.name)}}function E(e){setTimeout(function(){r(e)},0)}function S(e,t,n){t&&(t=""+t===t?t:"keydown",e[n](t,"keydown"===t?E:r))}function L(e,n,i,r){var a,o,l,s,d,f,v,p,c=e.linkCtx,g=c.data,u=c.fn.paths;if(e&&u)if(p=i._jsvTr||!1,n&&(r=n.convertBack||r,v=n.tagCtx.props.trigger),v=void 0===v?ie.trigger:v,p!==v&&(f=t(i),S(f,p,"off"),S(f,i._jsvTr=("INPUT"===i.tagName&&i.type!==Be&&i.type!==Ie||"textarea"===i.type||i.contentEditable===De)&&v,"on")),u=(a=u._jsvto)||u[0],o=u&&u.length,!o||n&&!n.tagCtx.args.length)e.to=[[],r];else{if(s=u[o-1],s._jsv){for(d=s;s.sb&&s.sb._jsv;)l=s=s.sb;l=s.sb||l&&l.path,s=l?l.slice(1):d.path}e.to=l?[[d,s],r]:[c._ctxCb(l=s.split("^").join("."))||[g,l],r]}}function N(e,t,n){var i,r,a=e.tagCtx.view,o=e.tagCtxs||[e.tagCtx],l=o.length,s=!t;if(t=t||e._.bnd.call(a.tmpl,(e.linkCtx||a).data,a,ne),n)o=e.tagCtxs=t,e.tagCtx=o[0];else for(;l--;)i=o[l],r=t[l],K(i.props).setProperty(r.props),re(i.ctx,r.ctx),i.args=r.args,s&&(i.tmpl=r.tmpl);return ne._ths(e,o[0]),o}function B(e){for(var t,n,i,r=[],a=e.length,o=a;o--;)r.push(e[o]);for(o=a;o--;)if(n=r[o],n.parentNode){if(i=n._jsvBnd)for(i=i.slice(1).split("&"),n._jsvBnd="",t=i.length;t--;)I(i[t],n._jsvLkEl,n);P(k(n)+(n._df||""))}}function I(e,n,i){var r,a,o,l,s,d,f,v,p,c,g,u,h=Ye[e];if(n)i===n.linkedElem[0]&&(i._jsvLkEl=void 0,n.linkedElem=void 0);else if(h){delete Ye[e];for(r in h.bnd)l=h.bnd[r],s=h.cbId,H(l)?t([l]).off(fe+s).off(de+s):t(l).off(de+s),delete h.bnd[r];if(a=h.linkCtx){if(o=a.tag){if(d=o.tagCtxs)for(f=d.length;f--;)(v=d[f].map)&&v.unmap();p=o.linkedElem,o.onDispose&&o.onDispose(),o._elCnt||(o._prv&&o._prv.parentNode.removeChild(o._prv),o._nxt&&o._nxt.parentNode.removeChild(o._nxt))}c=p&&p[0]||a.elem,(g=c&&c._jsvTr)&&(S(p||t(c),g,"off"),c._jsvTr=void 0),u=a.view,"link"===u.type?u.parent.removeViews(u._.key,void 0,!0):delete u._.bnds[e]}delete h.s[h.cbId]}}function T(e){e?(e=e.jquery?e:t(e),e.each(function(){for(var e;(e=xe(this,!0))&&e.parent;)e.parent.removeViews(e._.key,void 0,!0);B(this.getElementsByTagName("*"))}),B(e)):(_e&&(t(_e).off(Ae,r).off("blur","[contenteditable]",r),_e=void 0),Z.removeViews(),B(ee.body.getElementsByTagName("*")))}function V(e){return function(t,n){var i,r,a=[n];if(e&&t){if(t._jsv)return t._jsv.call(e.tmpl,n,e,ne);if("~"===t.charAt(0))return"~tag"===t.slice(0,4)&&(r=e.ctx,"."===t.charAt(4)&&(i=t.slice(5).split("."),r=r.tag),i)?r?[r,i.join("."),n]:[]:(t=t.slice(1).split("."),(n=e.hlp(t.shift()))&&(t.length&&a.unshift(t.join(".")),a.unshift(n)),n?a:[]);if("#"===t.charAt(0))return"#data"===t?[]:[e,t.replace(et,""),n]}}}function q(e){return e.type===Be?e[Ne]:e.value}function D(e,t,n,i,r,a){var o,s,d,f,v,p,c,g=0,u=e===t;if(e){for(d=y(e)||[],o=0,s=d.length;s>o;o++){if(f=d[o],p=f.id,p===i&&f.ch===r){if(!a)break;s=0}u||(v="_"===f.ch?Ce[p]:Ye[p].linkCtx.tag,f.open?v._prv=t:f.close&&(v._nxt=t)),g+=p.length+2}g&&e.setAttribute(je,e.getAttribute(je).slice(g)),c=t?t.getAttribute(je):n._df,(s=c.indexOf("/"+i+r)+1)&&(c=d._tkns.slice(0,g)+c.slice(s+(a?-1:i.length+1))),c&&(t?t.setAttribute(je,c):l(n,c))}else l(n,b(n._df,"#"+i+r)),a||t||l(n,b(n._df,"/"+i+r))}function P(e){var t,n,i,r;if(r=y(e,!0,it))for(t=0,n=r.length;n>t;t++)i=r[t],"_"===i.ch?(i=Ce[i.id])&&i.type&&i.parent.removeViews(i._.key,void 0,!0):I(i.id)}function O(e,n){e.contents=function(e,n){e!==!!e&&(n=e,e=void 0);var i,r=t(this.nodes());return r[0]&&(i=n?r.filter(n):r,r=e&&n?i.add(r.find(n)):i),r},e.nodes=function(e,t,n){var i,r=this,a=r._elCnt,o=!t&&a,l=[];for(t=t||r._prv,n=n||r._nxt,i=o?t===r._nxt?r.parentElem.lastSibling:t:r._.inline===!1?t||r.linkCtx.elem.firstChild:t&&t.nextSibling;i&&(!n||i!==n);)(e||a||i.tagName!==qe)&&l.push(i),i=i.nextSibling;return l},e.childTags=function(e,t){e!==!!e&&(t=e,e=void 0);var n=this,i=n.link?n:n.tagCtx.view,r=n._prv,a=n._elCnt,o=[];return i.link(void 0,n.parentElem,a?r&&r.previousSibling:r,n._nxt,void 0,{get:{tags:o,deep:e,name:t,id:n.link?n._.id+"_":n._tgId+"^"}}),o},e.refresh=function(e){var t,n,i=this,r=i.linkCtx,a=i.tagCtx.view;return i.disposed&&ge("Removed tag"),void 0===e&&(e=ne._tag(i,a,a.tmpl,N(i),!0)),e+""===e&&(n=i._.inline?ve:r.attr||v(i.parentElem,!0),t=s(e,r,n,i)),A(i),t||i},e.update=function(e){var t=this.linkedElem;t&&r({target:t[0]},void 0,e)},n?e.domChange=function(){var e=this.parentElem,n=t.hasData(e)&&t._data(e).events,i="jsv-domchange";n&&n[i]&&t(e).triggerHandler(i,arguments)}:(e.addViews=function(e,t){var n,i=this,r=t.length,a=i.views;!i._.useKey&&r&&(n=a.length+r,n===i.data.length&&p(i,e,i.tmpl,a,t,i.ctx)!==!1&&(i._.srt||i.fixIndex(e+r)))},e.removeViews=function(e,n,i,r){function a(e){var n,r,a,o,l,s,d=p[e];if(d&&d.link){if(n=d._.id,i||(s=d.nodes()),d.removeViews(void 0,void 0,!0),d.type=void 0,o=d._prv,l=d._nxt,a=d.parentElem,i||(d._elCnt&&D(o,l,a,n,"_"),t(s).remove()),!d._elCnt)try{o.parentNode.removeChild(o),l.parentNode.removeChild(l)}catch(v){}f(d);for(r in d._.bnds)I(r);delete Ce[n]}}var o,l,s,d=this,v=!d._.useKey,p=d.views;if(v&&(s=p.length),void 0===e)if(v){for(o=s;o--;)a(o);d.views=[]}else{for(l in p)a(l);d.views={}}else if(void 0===n&&(v?n=1:(a(e),delete p[e])),v&&n&&(r||s-n===d.data.length)){for(o=e+n;o-- >e;)a(o);p.splice(e,n),d._.sort||d.fixIndex(e)}},e.refresh=function(){var e=this,t=e.parent;t&&(p(e,e.index,e.tmpl,t.views,e.data,void 0,!0),f(e))},e.fixIndex=function(e){for(var t=this.views,n=t.length;e<n--;)t[n].index!==n&&K(t[n]).setProperty("index",n)},e.link=_)}function U(e,t,n){if("set"===n.change){for(var i=e.tgt,r=i.length;r--&&i[r].key!==n.path;);-1===r?n.path&&!n.remove&&K(i).insert({key:n.path,prop:n.value}):n.remove?K(i).remove(r):K(i[r]).setProperty("prop",n.value)}}function $(e,t,n){var i,r=e.src,a=n.change;"set"===a?"prop"===n.path?K(r).setProperty(t.target.key,n.value):(K(r).removeProperty(n.oldValue),K(r).setProperty(n.value,t.target.prop)):"remove"===a?(i=n.items[0],K(r).removeProperty(i.key),delete r[i.key]):"insert"===a&&(i=n.items[0],i.key&&K(r).setProperty(i.key,i.prop))}function M(e){return e.indexOf(".")<0}var R=t===!1;n=n||R&&e.jsrender,t=t||e.jQuery;var F="JsViews requires ";if(!t||!t.fn)throw F+"jQuery";n&&!n.fn&&n.views.sub._jq(t);var z,K,H=t.isArray,J=t.views;if(!J||!J.map)throw F+"JsRender";var Q,W,X,G,Y,Z,ee=e.document,te=J.settings,ne=J.sub,ie=ne.settings,re=ne.extend,ae=t.isFunction,oe=(t.expando,J.converters),le=J.tags,se=ie.advanced,de=ne.propChng=ne.propChng||"propertyChange",fe=ne.arrChng=ne.arrChng||"arrayChange",ve="html",pe=ne.syntaxErr,ce=/<(?!script)(\w+)[>\s]/,ge=ne._er,ue=ne._err,he=/['"\\]/g;if(t.link)return t;ie.trigger=!0;var _e,me,xe,be,ke,ye,Ce,we,je="data-jsv",Ae="change.jsv",Ee="onBeforeChange",Se="onAfterChange",Le="onAfterCreate",Ne="checked",Be="checkbox",Ie="radio",Te="input[type=radio]",Ve="none",qe="SCRIPT",De="true",Pe='"></script>',Oe='<script type="jsv',Ue=je+"-df",$e="script,["+je+"]",Me={value:"val",input:"val",html:ve,text:"text"},Re={from:"value",to:"value"},Fe=0,ze=t.cleanData,Ke=te.delimiters,He=ee.createDocumentFragment(),Je=ee.querySelector,Qe={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},We={tr:"table"},Xe={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},Ge={},Ye={},Ze=1,et=/^#(view\.?)?/,tt=/((\/>)|<\/(\w+)>|)(\s*)([#\/]\d+(?:_|(\^)))`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*|(>)|$)/g,nt=/(#)()(\d+)(_)/g,it=/(#)()(\d+)([_^])/g,rt=/(?:(#)|(\/))(\d+)(_)/g,at=/(#)()(\d+)(\^)/g,ot=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g,lt=/&(\d+)\+?/g,st=e.getComputedStyle;if(K=t.observable,!K)throw F+"JsObservable";return z=K.observe,ne.onStore.template=function(e,n){n.link=u,e&&(t.link[e]=function(){return u.apply(n,arguments)})},ne.viewInfos=y,(te.delimiters=function(){var e=Ke.apply(0,arguments),t=ie.delimiters;return Q=t[0].charAt(0),W=t[0].charAt(1),X=t[1].charAt(0),G=t[1].charAt(1),Y=t[2],me=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+Y+")?(\\"+W+ne.rTag+"(:\\w*)?\\"+X+")","g"),e})(),ne.addSetting("trigger"),oe.merge=function(e){var t,n=this.linkCtx._val||"",i=this.tagCtx.props.toggle;return i&&(t=i.replace(/[\\^$.|?*+()[{]/g,"\\$&"),t="(\\s(?="+t+"$)|(\\s)|^)("+t+"(\\s|$))",n=n.replace(new RegExp(t),"$2"),e=n+(e?(n&&" ")+i:"")),e},le("on",{attr:Ve,init:function(e){for(var n,i=this,r=0,a=e.args,o=a.length;o>r&&!ae(a[r]);r++);i._hi=o>r&&r+1,i._.inline&&(ne.rTmpl.exec(n=e.tmpl.markup)||(i.template="<button>"+(t.trim(n)||e.params.args[r]||"noop")+"</button>"),i.attr=ve)},render:function(){var e=this.tagCtx;return e.render(e.view,!0)},onAfterLink:function(e,n){var i,r,a,o=this,l=o._hi,s=e.args,d=s.length,f=e.props,v=f.data,p=e.view,c=f.context;l&&(i=s[l-1],r=s.slice(l),s=s.slice(0,l-1),o._sel=s[1],a=o.activeElem=o.activeElem||t(o._.inline?(o._sel=s[1]||"*",o.parentElem):n.elem),c||(c=/^(.*)[\.^][\w$]+$/.exec(e.params.args.slice(-r.length-1)[0]),c=c&&ne.tmplFn("{:"+c[1]+"}",p.tmpl,!0)(n.data,p)),o._evs&&o.onDispose(),a.on(o._evs=s[0]||"click",o._sel,void 0==v?null:v,o._hlr=function(e){var t,a=!o._.inline;if(!a)for(t=o.contents("*"),d=t.length;!a&&d--;)t[d].contains(e.target)&&(a=!0);return a?i.apply(c||n.data,[].concat(r,e,{change:e.type,view:p,linkCtx:n},r.slice.call(arguments,1))):void 0}))},onUpdate:function(){return!1},onDispose:function(){var e=this;e.activeElem&&e.activeElem.off(e._evs,e._sel,e._hlr)},flow:!0,dataBoundOnly:!0}),re(le["for"],{onArrayChange:function(e,t,n,i){var r,a=e.target,o=a.length,l=this,s=t.change;if(l._.noVws||l.tagCtxs[1]&&("insert"===s&&o===t.items.length||"remove"===s&&!o))l.refresh();else for(r in l._.arrVws)r=l._.arrVws[r],r.data===a&&r._.onArrayChange.apply(r,arguments);l.domChange(n,i,t),e.done=!0},onAfterLink:function(e,t){var n,i,r,a,o=this,l=o._ars||{},s=o.tagCtxs,d=s.length,f=o.selected||0;for(n=0;f>=n;n++)e=s[n],a=e.map?e.map.tgt:e.args.length?e.args[0]:e.view.data,(r=l[n])&&a!==r[0]&&(z(r[0],r[1],!0),delete l[n]),!l[n]&&H(a)&&(z(a,i=function(n,i){var r=e;o.onArrayChange(n,i,r,t)}),l[n]=[a,i]);for(n=f+1;d>n;n++)(r=l[n])&&(z(r[0],r[1],!0),delete l[n]);o._ars=l},onDispose:function(){var e,t=this;for(e in t._ars)z(t._ars[e][0],t._ars[e][1],!0)}}),re(le["if"],{onUpdate:function(e,t,n){var i,r,a;for(i=0;r=this.tagCtxs[i];i++)if(a=r.props.tmpl!==n[i].props.tmpl||r.args.length&&!(r=r.args[0])!=!n[i].args[0],!this.convert&&r||a)return a;return!1},onAfterLink:function(e,t,n){n&&this.domChange(e,t,n)}}),le("props",{baseTag:"for",dataMap:J.map({getTgt:le.props.dataMap.getTgt,obsSrc:U,obsTgt:$,tgtFlt:M}),flow:!0}),re(t,{view:xe=function(e,n,i){function r(e,t){if(e)for(o=y(e,t,nt),s=0,d=o.length;d>s&&(!(a=Ce[o[s].id])||!(a=a&&i?a.get(!0,i):a));s++);}n!==!!n&&(i=n,n=void 0);var a,o,l,s,d,f,v,p=0,c=ee.body;if(e&&e!==c&&Z._.useKey>1&&(e=""+e===e?t(e)[0]:e.jquery?e[0]:e)){if(n){if(r(e._df,!0),!a)for(v=Je?e.querySelectorAll($e):t($e,e).get(),f=v.length,l=0;!a&&f>l;l++)r(v[l]);return a}for(;e;){if(o=y(e,void 0,rt))for(f=o.length;f--;)if(a=o[f],a.open){if(1>p)return a=Ce[a.id],a&&i?a.get(i):a||Z;p--}else p++;e=e.previousSibling||e.parentNode}}return Z},link:h,unlink:T,cleanData:function(e){e.length&&Fe&&B(e),ze.apply(t,arguments)}}),re(t.fn,{link:function(e,t,n,i,r,a,o){return h(e,this,t,n,i,r,a,o)},unlink:function(){return T(this)},view:function(e,t){return xe(this[0],e,t)}}),t.each([ve,"replaceWith","empty","remove"],function(e,n){var i=t.fn[n];t.fn[n]=function(){var e;Fe=1;try{e=i.apply(this,arguments)}finally{Fe=0}return e}}),O(re(Z=ne.topView,{tmpl:{links:{}}})),Ce={0:Z},we=ne.advSet,ne.advSet=function(){we(),e._jsv=se._jsv?re(e._jsv||{},{views:Ce,bindings:Ye}):void 0,be=se.linkAttr,ke=$e+",["+be+"]",ye=se._wm,ye.optgroup=ye.option,ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td},te.advanced({linkAttr:"data-link",useViews:!1,noValidate:!1,_wm:{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],svg_ns:[1,"<svg>","</svg>"],div:t.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},_fe:{input:{from:q,to:"value"},textarea:Re,select:Re,optgroup:{to:"label"}}}),t},window);
//# sourceMappingURL=jquery.views.min.js.map
