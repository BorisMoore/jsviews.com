{"version":3,"sources":["index.js"],"names":["window","$","undefined","treeGroup","searchIncludeHash","hash","searchInclude","jsr","jsv","smp","txt","searchContent","searchValue","i","category","foundInCat","foundInCats","categories","content","l","length","filter","observable","setProperty","searchtextElem","removeClass","hidden","searchCat","toLowerCase","name","find","noSearch","filterlen","search","topCatContent","topCatFindContent","found","foundInTopic","foundInSubCat","subCategory","searchTopic","topicName","text","index","displayText","ind","section","preText","postText","filtered","sectionId","searchItem","findSection","searchAnchor","topic","findTopic","sections","_type","indexOf","substring","lastIndexOf","slice","substr","encodeURIComponent","searchTerm","htmlConverter","push","clearSearch","clearSearchCat","clearSearchTopic","getCategory","catName","searchExclude","getCategoryNode","subcategories","parent","selectedCategory","topCategory","homeCategory","stack","pop","expanded","topCat","oldTopCategory","topCategoryName","loadedPromise","Deferred","jsrender","searchCategory","page","addClass","searched","loadAllContent","then","setTimeout","resolve","loaded","loading","getScript","promise","fetchCategory","save","categoryName","sectionIndex","oldCategory","lochash","location","history","replaceState","state","url","document","URL","historyIndex","historyStates","newState","scroll","scrollTop","key","searchRegex","exec","decodeURIComponent","newTopCat","navTo","initPageParams","initPage","searchTitle","title","topSearchTree","parseInt","selected","signature","api","param","sig","this","data","ret","object","method","params","optional","getContent","topics","path","stringify","val","JSON","parse","eval","e","editable","textareas","contents","loadedfind","loadingfind","localStorage","setItem","value","prefix","notLoaded","allLoadedPromise","loadingLabel","loadedLabel","loadedAll","scrollTargetElem","skipLoad","searchbox","prevLochash","isSearchTreeSelectionChange","isLeftNavSelectionChange","searchNavElem","sideNavElem","hoverTextElem","views","documentation","include","class","allowEdit","md","Remarkable","html","breaks","linkify","typographer","highlight","str","lang","hljs","getLanguage","err","highlightAuto","converters","sampleFrames","pageTag","init","pagetag","onAfterLink","on","addSection","view","innerText","getAttribute","className","ev","addSignature","stopImmediatePropagation","addParam","addLink","addTopic","addCodeTab","isJsr","jsrJsvJqui","code","removeSection","get","getIndex","ctx","parentTags","sampleFrame","runCode","tag","tagName","parents","sampleSection","tabsControl","tabs","tryitTab","tabCount","setTab","selectedIndex","tree","onDispose","template","modes","details","summary","edit","mode","setTree","onSelectionChange","refresh","onExpansionChange","iframeLoaded","tagId","loadScript","signatures","newSignature","extend","subTypes","_removeData","insert","isTagArg","args","newParam","links","newLink","link","newTopic","codetabs","newTab","codetab","type","sectionType","append","getLinks","cat","recurse","childCat","childCats","newSection","label","selectList","left","sectionTypes","leftsections","tagCtx","props","childTags","toggleSelect","remove","tryIt","sample","hideCategory","scrollTo","newCat","searchTreeNode","offset","wasSearch","navTreeNode","searchtext","getElementById","top","navigator","userAgent","delay","animate","height","offsetTop","searchTreeTag","baseTag","self","toggle","searchTreeNodeTag","sectionTag","render","buttons","tmpl","templates","ctxPrm","stopPropagation","target","is","moveUp","moveDown","selectedChild","move","onToggleSelect","sectionButtonsTag","nestedSectionType","sectionTitleTag","sectionHeaderTag","sampleFrameTag","parseJSON","trim","iframeWnd","body","innerHTML","replace","toremove","header","head","origData","sampleData","tryItData","loadTabs","markup","action","nocss","activateTabs","each","tab","onBind","parentElem","contentWindow","_tgId","onTabChange","apply","arguments","linkCtx","observe","unobserve","revert","sampleFieldsTag","arg1","arg2","fullCode","headerInsert","codeInHeader","headerAction","renderField","isData","highlightSyntax","tags","sectionButtons","sectionHeader","sectionTitle","newsearch","sectionTemplates","para","helpers","sampleFields","tabsTmpl","codetabsLength","pathname","testDiv","onkeydown","event","keyCode","altKey","shiftKey","searchTree","close","ctrlKey","next","prev","focus","prototype","select","unselect","changing","eventArgs","newSearch","oldValue","newIndex","mouseenter","hoverText","hoverTopicSel","show","elem","mouseleave","hide","mousewheel","preventDefault","originalEvent","deltaY","click","leftTarget","position","elementFromPoint","clientY","editview","detail","syntax","selectedLogo","scrollRestoration","id","jQuery"],"mappings":"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","file":"index.min.js","sourcesContent":["(function(window, $, undefined) {\n\"use strict\";\nvar page, selectedCategory, topCategory, homeCategory, topCategoryName, scrollTargetElem, skipLoad, searchbox, initPageParams, prevLochash,\n\tisSearchTreeSelectionChange, isLeftNavSelectionChange, topSearchTree, loadedAll, searchtextElem, searchNavElem, sideNavElem, hoverTextElem,\n\n\tcontent = $.views.documentation.content,\n\tsearchInclude = content.include,\n\tsearchRegex = /#(?:search\\?s=([^&]+)(&f=(jsr-)?(jsv-)?(smp-)?(txt-)?)?(?:&l=)?)?([^@]+)?(?:@(.+))?$/,\n\tsearchCategory = {\n\t\tname: \"home\",\n\t\t\"class\": \"search\",\n\t\tloaded: true,\n\t\tsearch: true\n\t},\n\tallowEdit = false,\n\tmd = new Remarkable('full', {\n\t\thtml: true,\n\t\tbreaks: false,\n\t\tlinkify: true,\n\t\ttypographer: true,\n\t\thighlight: function (str, lang) {\n\t\t\tif (lang && hljs.getLanguage(lang)) {\n\t\t\t\ttry {\n\t\t\t\t\treturn hljs.highlight(lang, str).value;\n\t\t\t\t} catch (err) {}\n\t\t\t}\n\t\t\ttry {\n\t\t\t\treturn hljs.highlightAuto(str).value;\n\t\t\t} catch (err) {}\n\t\t\treturn ''; // use external default escaping\n\t\t}\n\t}),\n\thtmlConverter = $.views.converters.html,\n//#region TAG CONTROLS\n\n// {{page}}\n\n\thistoryIndex = -1,\n\thistoryStates = {},\n\tsampleFrames = {},\n\tpageTag = {\n\t\tinit: function() {\n\t\t\twindow.pagetag = page = this;\n\t\t\tpage.data = content;\n\t\t\tpage.category = selectedCategory;\n\t\t},\n\t\tonAfterLink: function() {\n\t\t\tvar page = this, activeContainer;\n\t\t\tpage.contents()\n\t\t\t\t.on(\"click\", \".insertsection\", function() {\n\t\t\t\t\tpage.addSection($.view(this), this.innerText, this.getAttribute(\"data-type\"), this.className.indexOf(\"append\") >= 0);\n\t\t\t\t})\n\t\t\t\t.on(\"click\", \".savedata\", function() {\n\t\t\t\t\tsave();\n\t\t\t\t})\n\t\t\t\t.on(\"click\", \".addsignature\", function(ev) {\n\t\t\t\t\tpage.addSignature($.view(this));\n\t\t\t\t\tev.stopImmediatePropagation();\n\t\t\t\t})\n\t\t\t\t.on(\"click\", \".addparam\", function() {\n\t\t\t\t\tpage.addParam($.view(this));\n\t\t\t\t})\n\t\t\t\t.on(\"click\", \".addarg\", function() {\n\t\t\t\t\tpage.addParam($.view(this), true);\n\t\t\t\t})\n\t\t\t\t.on(\"click\", \".addlink\", function() {\n\t\t\t\t\tpage.addLink($.view(this));\n\t\t\t\t})\n\t\t\t\t.on(\"click\", \".addtopic\", function() {\n\t\t\t\t\tpage.addTopic($.view(this));\n\t\t\t\t})\n\t\t\t\t.on(\"click\", \".addcodetab\", function() {\n\t\t\t\t\tpage.addCodeTab($.view(this));\n\t\t\t\t})\n\t\t\t\t.on(\"click\", \".defaultsample\", function() {\n\t\t\t\t\tvar data = $.view(this).data,\n\t\t\t\t\t\tisJsr = data.jsrJsvJqui === \"jsr\";\n\t\t\t\t\t$.observable(data).setProperty({\n\t\t\t\t\t\thtml: '<script id=\"myTmpl\" type=\"text/x-jsrender\">\\n  {{:name}}\\n</script>\\n\\n<div id=\"page\"></div>',\n\t\t\t\t\t\tcode: 'var myTmpl = $.templates(\"#myTmpl\"),\\n  data = { name: \"Jo\" }' + (isJsr ? ',\\n  html = myTmpl.render(data);\\n\\n$(\"#page\").html(html);' : ';\\n\\nmyTmpl.link(\"#page\", data);')\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.on(\"click\", \".removesection\", function() {\n\t\t\t\t\tvar view = $.view(this);\n\t\t\t\t\tpage.removeSection(view.get(\"array\").data, view.getIndex());\n\t\t\t\t})\n\t\t\t\t.on(\"click\", \".runSample\", function() {\n\t\t\t\t\t$.view(this).ctx.parentTags.section.sampleFrame.runCode();\n\t\t\t\t})\n\t\t\t\t.on(\"click\", \".revertSample\", function() {\n\t\t\t\t\tvar tag = $.view(this).ctx.tag,\n\t\t\t\t\t\tsection = tag.tagName === \"section\" ? tag : tag.parent.parents.section;\n\t\t\t\t\tsection.sampleFrame.runCode(true);\n\t\t\t\t})\n\t\t\t\t.on(\"click\", \".tryIt\", function() {\n\t\t\t\t\tvar sampleSection = $.view(this).parent.tag,\n\t\t\t\t\t\ttabsControl = sampleSection.tabs,\n\t\t\t\t\t\ttryitTab = tabsControl.tabCount - 1;\n\t\t\t\t\ttabsControl.setTab(tabsControl.selectedIndex === tryitTab ? 0 : tryitTab);\n\t\t\t\t})\n\t\t\t\t.on(\"keyup\", \".try textarea\", function() {\n\t\t\t\t\t$.observable($.view(this).ctx.parentTags.section.sampleFrame).setProperty(\"ranIt\", true);\n\t\t\t\t})\n\t\t\t\t.on(\"contextmenu\", function() {\n\t\t\t\t\tvar editable = !page.editable;\n\t\t\t\t\tif (!editable || !content.search && (allowEdit || content.allowEdit)) {\n\t\t\t\t\t\t$.observable(content).setProperty(\"editable\", editable);\n\t\t\t\t\t\tif (page.tree) {\n\t\t\t\t\t\t\t$.observable(page.tree).setProperty(\"editable\", editable);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$.observable(page).setProperty(\"editable\", editable);\n\t\t\t\t\t\tsave();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tonDispose: function() {\n\t\t\tsave();\n\t\t},\n\t\ttemplate: \"#pagePanelTmpl\",\n\n\t// properties\n\t\tmodes: {\n\t\t\tdetails: 1,\n\t\t\tsummary: 0,\n\t\t\tedit: 2\n\t\t},\n\t\tmode: 0,\n\t\teditable: false,\n\n\t// methods\n\t\tsetTree: function(tree) {\n\t\t\tthis.tree = tree;\n\t\t\t$.observable(tree).setProperty(\"selected\", selectedCategory);\n\t\t\ttree.onSelectionChange = function(selected) {\n\t\t\t\tsave(location.hash = selected.name);\n\t\t\t\tif (tree.editable) {\n\t\t\t\t\ttree.refresh();\n\t\t\t\t}\n\t\t\t\tisLeftNavSelectionChange = true;\n\t\t\t};\n\t\t\ttree.onExpansionChange = function(selected) {\n\t\t\t\tsave(selected.name);\n\t\t\t};\n\t\t},\n\t\tiframeLoaded: function(tagId, loadScript) {\n\t\t\tsampleFrames[tagId].getScript(loadScript);\n\t\t},\n\t\taddSignature: function(view) {\n\t\t\tvar signatures = view.data.signatures,\n\t\t\t\tlength = signatures.length,\n\t\t\t\tnewSignature = $.extend(true, {}, this.data.subTypes.signature);\n\t\t\tif (signatures[length-1]) {\n\t\t\t\t// Copy over the previous signature, but don't copy the event data, since we want new data-linking for the new instances.\n\t\t\t\t$.extend(true, newSignature, signatures[length-1]);\n\t\t\t\t$._removeData(newSignature);\n\t\t\t\t$._removeData(newSignature.params);\n\t\t\t}\n\t\t\t$.observable(signatures).insert(newSignature);\n\t\t},\n\t\taddParam: function(view, isTagArg) {\n\t\t\tvar params = isTagArg ? view.data.args : view.data.params,\n\t\t\t\tnewParam = $.extend(true, {}, this.data.subTypes.param);\n\t\t\t$.observable(params).insert(newParam);\n\t\t},\n\t\taddLink: function(view) {\n\t\t\tvar links = view.data.links,\n\t\t\t\tnewLink = $.extend(true, {}, this.data.subTypes.link);\n\t\t\t$.observable(links).insert(newLink);\n\t\t},\n\t\taddTopic: function(view) {\n\t\t\tvar topics = view.data.topics,\n\t\t\t\tnewTopic = $.extend(true, {}, this.data.subTypes.topic);\n\t\t\t$.observable(topics).insert(newTopic);\n\t\t},\n\t\taddCodeTab: function(view) {\n\t\t\tvar tabs = view.data.codetabs = view.data.codetabs || [],\n\t\t\t\tnewTab = $.extend(true, {}, this.data.subTypes.codetab);\n\t\t\t$.observable(tabs).insert(newTab);\n\t\t},\n\t\taddSection: function(view, type, sectionType, append) {\n\t\t\tfunction getLinks(cat, recurse) {\n\t\t\t\tvar childCat, i,\n\t\t\t\t\tchildCats = cat.categories || [],\n\t\t\t\t\tl = childCats.length;\n\t\t\t\tfor (i =0; i<l; i++) {\n\t\t\t\t\tchildCat = childCats[i];\n\t\t\t\t\tif (topics[hash = childCat.name]) {\n\t\t\t\t\t\tnewSection.topics.push({\n\t\t\t\t\t\t\thash: hash,\n\t\t\t\t\t\t\tlabel: childCat.label\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (recurse) {\n\t\t\t\t\t\tgetLinks(childCat, recurse);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar selectList, index, sections, hash, left,\n\t\t\t\tcategory = this.category,\n\t\t\t\ttopics = this.data[topCategoryName],\n\t\t\t\ttopic = (topics || topCategory)[category.name],\n\t\t\t\tsectionTypes = this.data.sectionTypes,\n\t\t\t\tnewSection = $.extend(true, {}, sectionTypes[type]);\n\n\t\t\tif (sectionType) {\n\t\t\t\ttopic = append ? view.data : view.parent.get(\"item\").data;\n\t\t\t}\n\n\t\t\tif (topic) {\n\t\t\t\tif (topic.leftsections) {\n\t\t\t\t\tselectList = view.ctx.tag;\n\t\t\t\t\tleft = selectList.tagCtx.props.left;\n\t\t\t\t}\n\t\t\t\tsections = left ? topic.leftsections : topic.sections;\n\t\t\t\tif (!sections) {\n\t\t\t\t\tsections = [];\n\t\t\t\t\t$.observable(topic).setProperty(\"sections\", sections);\n\t\t\t\t}\n\t\t\t\tindex = append ? sections.length : view.getIndex();\n\t\t\t\tif (type === \"links\") {\n\t\t\t\t\tgetLinks(category);\n\t\t\t\t}\n\t\t\t\t$.observable(sections).insert(index, newSection);\n\t\t\t} else if (!topic) {\n\t\t\t\ttopics[category.name] = {\n\t\t\t\t\ttitle: category.label,\n\t\t\t\t\tpath: \"\",\n\t\t\t\t\tsections: [newSection]\n\t\t\t\t};\n\t\t\t\tview.refresh();\n\t\t\t\tif (selectList = view.childTags(true, \"selectList\")[0]) {\n\t\t\t\t\tselectList.toggleSelect(0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tsave();\n\t\t},\n\t\tremoveSection: function(sections, index) {\n\t\t\t$.observable(sections).remove(index);\n\t\t\tsave();\n\t\t},\n\t\ttryIt: function(view) {\n\t\t\tvar sample = view.data;\n\t\t\t$.observable(sample).setProperty(\"tryIt\", !sample.tryIt);\n\t\t},\n\t\thideCategory: function(hash) {\n\t\t\tfunction getCategoryNode(name, categories, parent) {\n\t\t\t\tstack.push(parent);\n\t\t\t\tvar category,\n\t\t\t\t\tl = categories.length;\n\t\t\t\twhile (l--) {\n\t\t\t\t\tcategory = categories[l];\n\t\t\t\t\tif (category.name === name || category.categories && (category = getCategoryNode(name, category.categories, category))) {\n\t\t\t\t\t\twhile (parent = stack.pop()) {\n\t\t\t\t\t\t\tif (parent.hidden) {\n\t\t\t\t\t\t\t\treturn parent;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn category;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstack.pop();\n\t\t\t}\n\t\t\tvar hidden,\n\t\t\t\tstack = [],\n\t\t\t\tcategories = this.data.categories;\n\n\t\t\thidden = hash && getCategoryNode(hash, categories);\n\t\t\treturn hidden && hidden.hidden;\n\t\t},\n\t\tscrollTo: function(lochash) {\n\t\t\tlocation.hash = lochash;\n\t\t},\n\t\tnavTo: function(lochash, newCat) {\n\t\t\tvar section, searchTreeNode, offset, categoryName, sectionIndex, filter, searchTerm, scrollTo, wasSearch, navTreeNode;\n\t\t\tif (prevLochash !== lochash) {\n\t\t\t\tif (section = searchRegex.exec(lochash)) {\n\t\t\t\t\tif (searchTerm = section[1]) {\n\t\t\t\t\t\t$.observable(searchInclude).setProperty({\n\t\t\t\t\t\t\tjsr: !section[3],\n\t\t\t\t\t\t\tjsv: !section[4],\n\t\t\t\t\t\t\tsmp: !section[5],\n\t\t\t\t\t\t\ttxt: !section[6]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tcategoryName = section[7];\n\t\t\t\t\tsectionIndex = section[8];\n\t\t\t\t\tif (searchTreeNode = sectionIndex && searchTerm) {\n\t\t\t\t\t\tsearchTreeNode = categoryName + \"@\" + sectionIndex;\n\t\t\t\t\t\tsection = content.filter[sectionIndex].text;\n\t\t\t\t\t\t$.observable(content).setProperty(\"searchtext\", topSearchTree.searchtext = section);\n\t\t\t\t\t\tsearchtextElem.addClass(\"selected\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsection = sectionIndex;\n\t\t\t\t\t\twasSearch = content.searchtext;\n\t\t\t\t\t\t$.observable(content).setProperty(\"searchtext\", topSearchTree.searchtext = undefined);\n\t\t\t\t\t\tsearchtextElem.removeClass(\"selected\");\n\t\t\t\t\t}\n\t\t\t\t\tinitPage(categoryName, searchTerm, sectionIndex);\n\t\t\t\t\tif (!searchTerm && page.tree) { // If tree not yet instantiated, will set selection in page.setTree()\n\t\t\t\t\t\t$.observable(page.tree).setProperty(\"selected\", selectedCategory);\n\t\t\t\t\t\tnavTreeNode = $(\".sidenav li.selected\")[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (section && (scrollTargetElem = document.getElementById(lochash + \"$\"))) {\n\t\t\t\t\tskipLoad = true;\n\t\t\t\t\tnewCat = newCat === true || !isSearchTreeSelectionChange;\n\t\t\t\t\tsetTimeout(function() { // Need short delay for Chrome to scroll to 0 - after it has moved to previous scroll position\n\t\t\t\t\t\tif (lochash === location.hash) { // If a new request has started, skip this one. (Fast clicking on prev, next, or history back/forward)\n\t\t\t\t\t\t\tif (newCat || !scrollTargetElem) {\n\t\t\t\t\t\t\t\twindow.scrollTo(0, 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (scrollTargetElem) {\n\t\t\t\t\t\t\t\toffset = $(scrollTargetElem).offset().top\n\t\t\t\t\t\t\t\t\t- (!content.searched\n\t\t\t\t\t\t\t\t\t\t? 40\n\t\t\t\t\t\t\t\t\t\t: searchTreeNode\n\t\t\t\t\t\t\t\t\t\t\t? 140\n\t\t\t\t\t\t\t\t\t\t\t: 120);\n\n\t\t\t\t\t\t\t\t$.observable(content).setProperty(\"loc\", lochash);\n\n\t\t\t\t\t\t\t\t$(navigator.userAgent.toLowerCase().indexOf('webkit') > 0 ? 'body' : 'html')\n\t\t\t\t\t\t\t\t\t.delay(150).animate({scrollTop: offset}, searchTreeNode ? 100 : 625, function() {\n\t\t\t\t\t\t\t\t\tif (!isSearchTreeSelectionChange && lochash === location.hash) { // If a new request has started, skip this one.\n\t\t\t\t\t\t\t\t\t\tif (searchTreeNode = document.getElementById(searchTreeNode + \"$\")) {\n\t\t\t\t\t\t\t\t\t\t\tsearchNavElem.animate({scrollTop: searchNavElem.scrollTop() - searchNavElem.height()/2\n\t\t\t\t\t\t\t\t\t\t\t\t+ $(searchTreeNode).offset().top - searchbox.offset().top - 60}, 150);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tscrollTargetElem = isSearchTreeSelectionChange = false;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tnavTreeNode = !isLeftNavSelectionChange && navTreeNode;\n\t\t\t\t\tscrollTargetElem = isSearchTreeSelectionChange = isLeftNavSelectionChange = false;\n\t\t\t\t\tsetTimeout(function() { // Need short delay for Chrome to scroll to 0 - after it has moved to previous scroll position\n\t\t\t\t\t\tif (!wasSearch) {\n\t\t\t\t\t\t\twindow.scrollTo(0, historyStates[historyIndex] && historyStates[historyIndex].scroll || 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (navTreeNode) {\n\t\t\t\t\t\t\tsideNavElem.animate({scrollTop: navTreeNode.offsetTop - sideNavElem.height()/2}, 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tprevLochash = lochash;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t},\n\n// {{searchTree}}\n \n\tsearchTreeTag = {\n\t\tbaseTag: \"tree\",\n\t\tfilter: true,\n\t\tinit: function(tagCtx) {\n\t\t\ttagCtx.ctx.tree = topSearchTree; // Set contextual property ~tree\n\t\t},\n\t\tonAfterLink: function() {\n\t\t\tvar self = this;\n\t\t\tself.contents(\"ul\")\n\t\t\t\t.on(\"click\", \".toggle\", function(ev) {\n\t\t\t\t\t$.view(this).ctx.tag.toggle();\n\t\t\t\t\tev.stopImmediatePropagation();\n\t\t\t\t})\n\t\t},\n\t\ttemplate: \"<ul class=\\\"tree\\\">\" +\n\t\t\t\"{^{for}}\" +\n\t\t\t\t\"{^{searchTreeNode/}}\" +\n\t\t\t\"{{/for}}\" +\n\t\t\"</ul>\"\n\t},\n\n\tsearchTreeNodeTag = {\n\t\tbaseTag: \"treeNode\",\n\t\ttemplate: \"{^{if !hidden && filtered}}<li {{:filtered.length ? 'class=\\\"withgroup\\\"' : ''}} data-link=\\\"class{merge: ~tree.topicName === name toggle='topicsel'}\\\">\" +\n\t\t\t\"{^{if categories && categories.length }}\" +\n\t\t\t\t\"<span class=\\\"spacerbox\\\"></span>\" +\n\t\t\t\"{{else}}\" +\n\t\t\t\t\"<span class=\\\"spacer\\\">&bull;</span>\" +\n\t\t\t\"{{/if}}\" +\n\t\t\t\"<span class=\\\"searchitem\\\">{{>label}}</span> {{if filtered.length}}<span class='searchgroup'>{^{for filtered ~name=name}}<div class='searchcontext' id='{{:section}}$' data-link=\\\"{on ~tree.select section true} class{merge: ~tree.selected === section toggle='sectionsel'} {on 'mouseenter' ~tree.mouseenter ~name}\\\">{{:text}}</div><span class='searchplace'></span>{{/for}}</span>{{/if}}\" +\n\t\t\"</li>{{if filtered.length}}<li class='aftergroup'></li>{{/if}}\" +\n\t\t\t\"<li>\" +\n\t\t\t\t\"<ul>\" +\n\t\t\t\t\t\"{^{for categories }}\" +\n\t\t\t\t\t\t\"{^{searchTreeNode/}}\" +\n\t\t\t\t\t\"{{/for}}\" +\n\t\t\t\t\"</ul>\" +\n\t\t\t\"</li>\" +\n\t\t\"{{/if}}\"\n\t},\n\n// {{section}}\n\n\tsectionTag = {\n\t\tinit: function(tagCtx) {\n\t\t\tthis.data = tagCtx.view.data;\n\t\t},\n\t\trender: function(type, mode) {\n\t\t\tvar editable = mode === \"edit\",\n\t\t\t\tbuttons = \"\";\n\t\t\tif (editable) {\n\t\t\t\tmode = this.selected ? mode : \"editview\";\n\t\t\t\tif (!this.parent.parents.section || this.parent.parents.section.selected) {\n\t\t\t\t\tbuttons = '<button class=\"toggleselect cmdbtn\">' + (this.selected\n\t\t\t\t\t\t? 'ok</button><button class=\"up cmdbtn\">up</button><button class=\"down cmdbtn\">down'\n\t\t\t\t\t\t: \"edit\"\n\t\t\t\t\t) + '</button><span class=\"removesection\"></span><br/>';\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.tagCtx.tmpl = this.templates[mode][type];\n\t\t\t\tbuttons += this.tagCtx.render();\n\t\t\treturn editable\n\t\t\t\t? ('<div class=\"mode-' + mode + '\">' + buttons + \"</div>\") : buttons;\n\t\t},\n\t\tonAfterLink: function() {\n\t\t\tvar self = this;\n\t\t\tif (self.ctxPrm(\"mode\") === \"edit\") {\n\t\t\t\tself.contents(\".cmdbtn\").on(\"click\", function(ev) {\n\t\t\t\t\tev.stopPropagation();\n\t\t\t\t\tev.stopImmediatePropagation();\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t\tself.contents().on(\"click\", function(ev) {\n\t\t\t\t\tif ($(ev.target).is(\"cmdbtn,a,input,textarea,button,img,.removesection\")) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tself.toggleSelect(); \n\t\t\t\t});\n\t\t\t\tself.contents(true, \".toggleselect:first\").on(\"click\", function() {\n\t\t\t\t\tself.toggleSelect();\n\t\t\t\t});\n\t\t\t\tself.contents(true, \".up\").on(\"click\", function(ev) {\n\t\t\t\t\tself.moveUp();\n\t\t\t\t\tev.stopImmediatePropagation();\n\t\t\t\t});\n\t\t\t\tself.contents(true, \".down\").on(\"click\", function(ev) {\n\t\t\t\t\tself.moveDown();\n\t\t\t\t\tev.stopImmediatePropagation();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tonDispose: function() {\n\t\t\tif (this.parent.selectedChild === this) {\n\t\t\t\tthis.parent.selectedChild = null;\n\t\t\t}\n\t\t},\n\n\t// methods\n\t\tmoveUp: function() {\n\t\t\tvar index = this.tagCtx.view.index,\n\t\t\t\tsections = this.parent.tagCtx.args[0];\n\t\t\tif (index) {\n\t\t\t\t$.observable(sections).move(index, index-1);\n\t\t\t}\n\t\t\tsave();\n\t\t},\n\t\tmoveDown: function() {\n\t\t\tvar index = this.tagCtx.view.index,\n\t\t\t\tsections = this.parent.tagCtx.args[0];\n\t\t\tif (index + 1 < sections.length) {\n\t\t\t\t$.observable(sections).move(index, index+1);\n\t\t\t}\n\t\t\tsave();\n\t\t},\n\t\ttoggleSelect: function() {\n\t\t\t$.observable(this).setProperty(\"selected\", !this.selected);\n\t\t\tthis.refresh();\n\t\t\tif (this.parent.onToggleSelect) {\n\t\t\t\tthis.parent.onToggleSelect(this);\n\t\t\t}\n\t\t\tsave();\n\t\t}\n\t},\n\n// {{sectionButton}}\n\n\tsectionButtonsTag = {\n\t\trender: function(sectionTypes) {\n\t\t\tvar ret = \"<div class=\\\"buttons\\\">\",\n\t\t\t\tnestedSectionType = this.ctxPrm(\"sectionType\");\n\t\t\tfor (var type in sectionTypes) {\n\t\t\t\tret += \"<button class=\\\"\"\n\t\t\t\t\t\t\t+ (this.tagCtx.props.append ? \"append \" : \"\")\n\t\t\t\t\t\t\t+ \"insertsection cmdbtn\\\" \"\n\t\t\t\t\t\t\t+ (nestedSectionType ? \"data-type=\\\"\" + nestedSectionType + \"\\\"\" : \"\")\n\t\t\t\t\t\t+ \">\"\n\t\t\t\t\t\t\t+ type\n\t\t\t\t\t\t+ \"</button>\";\n\t\t\t}\n\t\t\treturn ret + \"</div>\";\n\t\t}\n\t},\n\n// {{sectionTitle}}\n\n\tsectionTitleTag = {\n\t\ttemplate: \"#sectionTitleTmpl\"\n\t},\n\n// {{sectionHeader}}\n\n\tsectionHeaderTag = {\n\t\ttemplate: \"#sectionHeaderTmpl\"\n\t},\n\n// {{sampleFrame}}\n\n\tsampleFrameTag = {\n\t\tinit: function() {\n\t\t\tvar self = this,\n\t\t\t\tdata = $.parseJSON(stringify(self.parent.parents.section.data)),\n\t\t\t\tcodetabs = data.codetabs;\n\n\t\t\tself.parent.sampleFrame = self;\n\t\t\tself.getScript = function(loadScript) {\n\t\t\t\tself.loadScript = loadScript;\n\t\t\t\tif (data.url) {\n\t\t\t\t\tvar html = $.trim(self.iframeWnd.document.body.innerHTML).replace(/&#10;/g, \"\\n\"), // IE puts &#10; entities in place of some newlines\n\t\t\t\t\t\ttoremove = html.indexOf(\"\\n<!--<script src=\\\"\"),\n\t\t\t\t\t\theader = self.iframeWnd.document.head || \"\";\n\t\t\t\t\tif (toremove > 0) {\n\t\t\t\t\t\thtml = html.slice(0, toremove);\n\t\t\t\t\t}\n\t\t\t\t\tif (header) { // Fails in IE8 or earlier\n\t\t\t\t\t\theader = header.innerHTML\n\t\t\t\t\t\t\t.replace(/^.*sample-viewer.*$/m, \"\")\n\t\t\t\t\t\t\t.replace(/<style type=\"text\\/css\"><\\/style>/, \"\")\n\t\t\t\t\t\t\t.replace(/^\\n*.*\\.js\"><\\/script>\\n*/, \"\");\n\t\t\t\t\t}\n\t\t\t\t\t$.get(data.url + \".js\", function(content) {\n\t\t\t\t\t\tloadScript({code: content});\n\t\t\t\t\t\tself.origData = self.sampleData = {\n\t\t\t\t\t\t\turl: data.url,\n\t\t\t\t\t\t\thtml: html,\n\t\t\t\t\t\t\theader: header,\n\t\t\t\t\t\t\tcode: content\n\t\t\t\t\t\t};\n\t\t\t\t\t\tself.tryItData = {\n\t\t\t\t\t\t\thtml: html,\n\t\t\t\t\t\t\theader: header,\n\t\t\t\t\t\t\tcode: content\n\t\t\t\t\t\t};\n\t\t\t\t\t\tcodetabs && self.loadTabs(codetabs);\n\t\t\t\t\t}, \"text\");\n\t\t\t\t} else {\n\t\t\t\t\theader = data.header ? data.header + \"\\n\" : \"\";\n\t\t\t\t\tloadScript(data);\n\t\t\t\t\tself.origData = self.sampleData = {\n\t\t\t\t\t\tdata: data.data,\n\t\t\t\t\t\tmarkup: data.markup,\n\t\t\t\t\t\theader: header,\n\t\t\t\t\t\taction: data.action,\n\t\t\t\t\t\thtml: data.html,\n\t\t\t\t\t\tcode: data.code,\n\t\t\t\t\t\tjsrJsvJqui: data.jsrJsvJqui,\n\t\t\t\t\t\tnocss: data.nocss\n\t\t\t\t\t};\n\t\t\t\t\tself.tryItData = {\n\t\t\t\t\t\tdata: data.data,\n\t\t\t\t\t\tmarkup: data.markup,\n\t\t\t\t\t\theader: header,\n\t\t\t\t\t\thtml: data.html,\n\t\t\t\t\t\tcode: data.code,\n\t\t\t\t\t\tjsrJsvJqui: data.jsrJsvJqui,\n\t\t\t\t\t\tnocss: data.nocss\n\t\t\t\t\t};\n\t\t\t\t\tcodetabs && self.loadTabs(codetabs);\n\t\t\t\t}\n\t\t\t\tthis.parent.tabs.activateTabs(); // Do this now sample is loaded\n\t\t\t};\n\t\t},\n\t\tloadTabs: function(codetabs) {\n\t\t\tvar self = this;\n\t\t\t$.each(codetabs, function(index, tab) {\n\t\t\t\t$.get(tab.url, function(content) {\n\t\t\t\t\tself.tryItData['c' + index] = self.sampleData['c' + index] = content;\n\t\t\t\t}, \"text\");\n\t\t\t});\n\t\t},\n\t\ttemplate: \"<div class=\\\"nosearch\\\" style=\\\"height: {{attr:height}}px;\\\"><div style=\\\"padding: 10px;\\\">Loading...</div></div><iframe src=\\\"{{attr:url||'samples/iframedefault' + (jsrJsvJqui||'') + (nocss?'_nocss':'')}}.html\\\" class=\\\"sampleframe\\\" name=\\\"result\\\" style=\\\"height: {{attr:height}}px;\\\"></iframe>\",\n\t\tonBind: function() {\n\t\t\tvar self = this,\n\t\t\t\tiframeWnd = self.iframeWnd = $(self.parentElem).find(\".sampleframe\")[0].contentWindow;\n\t\t\tif (iframeWnd) {\n\t\t\t\tsampleFrames[iframeWnd._tgId = self._tgId] = self;\n\t\t\t}\n\t\t\tself.parent.tabs.onSelectionChange = function() {\n\t\t\t\tself.onTabChange.apply(self, arguments);\n\t\t\t};\n\t\t\tvar data = self.linkCtx.data;\n\t\t},\n\t\tonDispose: function() {\n\t\t\tif (this.iframeWnd.$ && this.iframeWnd.$.observe) {\n\t\t\t\tthis.iframeWnd.$.unobserve();\n\t\t\t}\n\t\t\tthis.iframeWnd = this.parent.sampleFrame = this.parentElem = undefined;\n\t\t},\n\t\tonTabChange: function(index, tabs) {\n\t\t\t$.observable(this).setProperty(\"tryIt\", index === tabs.tabCount - 1);\n\t\t},\n\t\trunCode: function(revert) {\n\t\t\tif (revert) {\n\t\t\t\t$.observable(this.tryItData).setProperty(this.origData);\n\t\t\t\t$.observable(this).setProperty(\"ranIt\", !revert);\n\t\t\t}\n\t\t\t\tthis.loadScript(this.tryItData);\n\t\t}\n\t},\n\n// {{sampleFields}}\n\n\tsampleFieldsTag = {\n\t\tinit: function() {\n\t\t\tthis.data = this.tagCtx.view.data.tryItData;\n\t\t},\n\t\trender: function(mode, arg1, arg2) {\n\t\t\tfunction fullCode() {\n\t\t\t\tvar headerInsert,\n\t\t\t\t\tcode = tryItData.code,\n\t\t\t\t\tcodeInHeader = code && code.indexOf(\"$(function()\") === 0,\n\t\t\t\t\thtml = tryItData.html,\n\t\t\t\t\theader = tryItData.header;\n\t\t\t\tif (!url) {\n\t\t\t\t\theader = header ? header.replace(/^\\S/gm, \"  $&\") : \"\";\n\t\t\t\t\theaderInsert =\n\t\t\t\t\t\tnocss || header && !headerAction\n\t\t\t\t\t\t\t? \"\" // If nocss specified, or if headerAction is replace (\"\") and there is header content provided, don't insert samples.css\n\t\t\t\t\t\t\t: \"  <link href=\\\"samples.css\\\" rel=\\\"stylesheet\\\" />\\n\";\n\t\t\t\t\theader = headerAction === \"append\" ? headerInsert + header : header + headerInsert;\n\t\t\t\t}\n\t\t\t\treturn \"<!DOCTYPE html>\\n\"\n\t\t\t\t\t+ \"<!-- To run the current sample code in your own environment, copy this to an html page. -->\\n\\n\"\n\t\t\t\t\t+ \"<html>\\n\"\n\t\t\t\t\t+ \"<head>\\n\"\n\t\t\t\t\t+ \"  <script src=\\\"//code.jquery.com/jquery-1.12.4.min.js\\\"></script>\\n\"\n\t\t\t\t\t+ (url\n\t\t\t\t\t\t? (\"  <base href=\\\"//www.jsviews.com/\" + url.slice(0, url.lastIndexOf(\"/\")) + \"/\\\" />\\n\"\n\t\t\t\t\t\t\t+ (codeInHeader\n\t\t\t\t\t\t\t\t? (\"<script>\\n\" + code\n\t\t\t\t\t\t\t\t\t+ \"\\n</script>\\n\")\n\t\t\t\t\t\t\t\t: \"\"))\n\t\t\t\t\t\t: (\n\t\t\t\t\t(jsrJsvJqui === \"jqui\"\n\t\t\t\t\t\t? \"  <script src=\\\"//code.jquery.com/ui/1.12.1/jquery-ui.min.js\\\"></script>\\n\"\n\t\t\t\t\t\t\t+ \"  <link href=\\\"//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css\\\" rel=\\\"stylesheet\\\" />\\n\"\n\t\t\t\t\t\t: \"\"\n\t\t\t\t\t)\n\t\t\t\t\t+ \"  <base href=\\\"//www.jsviews.com/samples/\\\" />\\n\"\n\t\t\t\t\t+ \"  <script src=\\\"../download/js\" + (jsrJsvJqui === \"jsr\" ? \"render\" : \"views\")\n\t\t\t\t\t+ \".min.js\\\"></script>\\n\"\n\t\t\t\t\t+ (jsrJsvJqui === \"jqui\"\n\t\t\t\t\t\t? \"  <script src=\\\"../download/sample-tag-controls/jsviews-jqueryui-widgets.min.js\\\"></script>\\n\"\n\t\t\t\t\t\t: \"\")\n\t\t\t\t\t))\n\t\t\t\t\t+ (header || \"\") + \"</head>\\n\"\n\t\t\t\t\t+ \"<body>\\n\\n\"\n\t\t\t\t\t+ (html\n\t\t\t\t\t\t? (html + (code && !codeInHeader ? \"\\n\\n<script>\\n\" + code + \"\\n</script>\" : \"\"))\n\t\t\t\t\t\t: (tryItData.markup\n\t\t\t\t\t\t\t? (\"<div id=\\\"result\\\"></div>\\n\\n\"\n\t\t\t\t\t\t\t\t+ \"<script id=\\\"theTmpl\\\" type=\\\"text/x-jsrender\\\">\\n\"\n\t\t\t\t\t\t\t\t+ tryItData.markup\n\t\t\t\t\t\t\t\t+ \"\\n</script>\\n\\n\"\n\t\t\t\t\t\t\t\t+ \"<script>\\n\"\n\t\t\t\t\t\t\t\t+ \"var data = \" + stringify(tryItData.data) + \";\\n\\n\"\n\t\t\t\t\t\t\t\t+ \"var template = $.templates(\\\"#theTmpl\\\");\\n\\n\"\n\t\t\t\t\t\t\t\t+ (jsrJsvJqui === \"jsr\"\n\t\t\t\t\t\t\t\t\t? (\"var htmlOutput = template.render(data);\\n\\n\"\n\t\t\t\t\t\t\t\t\t\t+ \"$(\\\"#result\\\").html(htmlOutput);\")\n\t\t\t\t\t\t\t\t\t: \"template.link(\\\"#result\\\", data);\")\n\t\t\t\t\t\t\t\t+ \"\\n</script>\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t+ \"\\n\\n</body>\\n\"\n\t\t\t\t\t+ \"</html>\\n\";\n\t\t\t}\n\n\t\t\tfunction renderField(type, label) {\n\t\t\t\tvar value = tryItData[type],\n\t\t\t\t\tisData = type === \"data\",\n\t\t\t\t\thighlightSyntax = {\n\t\t\t\t\t\tcode: \"js\",\n\t\t\t\t\t\tmarkup: \"jsr\",\n\t\t\t\t\t\thtml: \"jsr\"\n\t\t\t\t\t};\n\n\t\t\t\tif (value) {\n\t\t\t\t\tvalue = \"<label>\" + (label||type);\n\t\t\t\t\tif (editable) {\n\t\t\t\t\t\t value += \":<textarea data-link=\\\"\"\n\t\t\t\t\t\t\t+ (isData\n\t\t\t\t\t\t\t\t? \"{stringify:tryItData.\" + type + \":parse}\"\n\t\t\t\t\t\t\t\t: \"tryItData.\" + type\n\t\t\t\t\t\t\t) + \"\\\"></textarea></label>\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue += \":<pre>\"\n\t\t\t\t\t\t\t+ (isData\n\t\t\t\t\t\t\t\t? hljs.highlight(\"json\", stringify(tryItData[type])).value\n\t\t\t\t\t\t\t\t: hljs.highlight(highlightSyntax[type] || \"javascript\", tryItData[type]).value\n\t\t\t\t\t\t\t) + \"</pre></label>\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn value || \"\";\n\t\t\t}\n\n\t\t\tvar ret = \"\",\n\t\t\t\ttryItData = this.data,\n\t\t\t\torigData = this.tagCtx.view.data.origData,\n\t\t\t\tjsrJsvJqui = origData.jsrJsvJqui,\n\t\t\t\tnocss = origData.nocss,\n\t\t\t\theaderAction = origData.action,\n\t\t\t\teditable = mode===\"edit\",\n\t\t\t\turl = this.parent.parents.section.data.url;\n\n\t\t\tif (mode === \"full\") {\n\t\t\t\tret += \"<textarea class=\\\"fullcode\\\">\" + htmlConverter(fullCode()) + \"</textarea>\";\n\t\t\t} else if (mode === \"code\") {\n\t\t\t\tret += renderField(arg1, arg2);\n\t\t\t} else if (tryItData.html) {\n\t\t\t\tret += renderField(\"html\") + renderField(\"code\", \"javascript\"); // Could do + renderField(\"header\");\n\t\t\t} else if (tryItData.markup) {\n\t\t\t\tret += renderField(\"markup\", \"template markup\") + renderField(\"data\");\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t},\n\n//#endregion\n\n//#region TEMPLATES\n\n\ttemplates = {\n\t\tpage: $.templates({\n\t\t\tmarkup: \"#pageTmpl\",\n\t\t\ttags: {\n\t\t\t\tsectionButtons: sectionButtonsTag,\n\t\t\t\tsectionHeader: sectionHeaderTag,\n\t\t\t\tsectionTitle: sectionTitleTag\n\t\t\t},\n\t\t\tconverters: {\n\t\t\t\tnewsearch: function(val) {\n\t\t\t\t\treturn val.toLowerCase();\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t},\n\tsectionTemplates = {\n\t\tsummary: {\n\t\t\tpara: $.templates(\"#paraTmpl\"),\n\t\t\tapi: $.templates({\n\t\t\t\tmarkup: \"#apiTmpl\",\n\t\t\t\thelpers: {\n\t\t\t\t\tsignature: signature\n\t\t\t\t}\n\t\t\t}),\n\t\t\ttag: $.templates({\n\t\t\t\tmarkup: \"#tagTmpl\",\n\t\t\t\thelpers: {\n\t\t\t\t\tsignature: signature\n\t\t\t\t}\n\t\t\t}),\n\t\t\tdata: $.templates(\"#dataTmpl\"),\n\t\t\ttemplate: $.templates({\n\t\t\t\tmarkup: \"#templateTmpl\"\n\t\t\t}),\n\t\t\tcode: $.templates(\"#codeTmpl\"),\n\t\t\tsample: $.templates({\n\t\t\t\tmarkup: \"#sampleTmpl\",\n\t\t\t\ttags: {\n\t\t\t\t\tsampleFrame: sampleFrameTag,\n\t\t\t\t\tsampleFields: sampleFieldsTag\n\t\t\t\t},\n\t\t\t\thelpers: {\n\t\t\t\t\ttabsTmpl: function() {\n\t\t\t\t\t\tvar tab,\n\t\t\t\t\t\t\tcodetabs = this.data.codetabs || [],\n\t\t\t\t\t\t\tcodetabsLength = codetabs.length,\n\t\t\t\t\t\t\ttemplate = '{^{tabs tabCaption=\"How it works\"}}' +\n\t\t\t\t\t\t\t'{{for ~sections}}' +\n\t\t\t\t\t\t\t\t'{{if ~mode!==\"summary\" || !detail}}{^{section _type ~mode /}}{{/if}}' +\n\t\t\t\t\t\t\t'{{/for}}' +\n\t\t\t\t\t\t'{{else tabCaption=\"Code\"}}' +\n\t\t\t\t\t\t\t'<div class=\"code\">' +\n\t\t\t\t\t\t\t\t'{{sampleFields/}}' +\n\t\t\t\t\t\t\t'</div>';\n\n\t\t\t\t\t\tfor (tab = 0; tab < codetabsLength; tab++) { // Add an {{else}} block for each codetab\n\t\t\t\t\t\t\ttemplate += '{{else tabCaption=\"' + codetabs[tab].label + '\"}}' +\n\t\t\t\t\t\t\t\t'<div class=\"codetab\">' +\n\t\t\t\t\t\t\t\t\t'{{sampleFields \"code\" \"c' + tab + '\" \"' + codetabs[tab].url + '\"/}}' +\n\t\t\t\t\t\t\t\t'</div>';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttemplate +=\n\t\t\t\t\t\t'{{else tabCaption=\"Full Code\"}}' +\n\t\t\t\t\t\t\t'{{sampleFields \"full\"/}}' +\n\t\t\t\t\t\t'{{else tabCaption=\"Try it\"}}' +\n\t\t\t\t\t\t\t'<div class=\"runButtons\">' +\n\t\t\t\t\t\t\t\t'<em>Try it:</em> make changes below, then run... <button class=\"runSample\" data-link=\"disabled{:!ranIt}\">Run code</button>' +\n\t\t\t\t\t\t\t\t'<button class=\"revertSample\" data-link=\"disabled{:!ranIt}\">Clear changes</button>' +\n\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t'<div class=\"try\">' +\n\t\t\t\t\t\t\t\t'{{sampleFields \"edit\"/}}' +\n\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t'{{/tabs}}';\n\t\t\t\t\t\treturn template;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t\tlinks: $.templates({\n\t\t\t\tmarkup: \"#linksTmpl\",\n\t\t\t\thelpers: {\n\t\t\t\t\turl: function(hash) {\n\t\t\t\t\t\treturn location.pathname +\"#\" + hash;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tedit: {\n\t\t\tpara: $.templates(\"#editParaTmpl\"),\n\t\t\tapi: $.templates(\"#editApiTmpl\"),\n\t\t\ttag: $.templates(\"#editTagTmpl\"),\n\t\t\tdata: $.templates(\"#editDataTmpl\"),\n\t\t\ttemplate: $.templates(\"#editTemplateTmpl\"),\n\t\t\tcode: $.templates(\"#editCodeTmpl\"),\n\t\t\tsample: $.templates(\"#editSampleTmpl\"),\n\t\t\tlinks: $.templates(\"#editLinksTmpl\")\n\t\t}\n\t};\n\nvar testDiv = $(\"#testHtml\")[0];\n\ndocument.onkeydown = function(ev) {\n\tev = ev || window.event;\n\tvar keyCode = ev.keyCode;\n\tif (!ev.altKey && !ev.shiftKey) {\n\t\tif (keyCode === 27) { // Escape\n\t\t\tcontent.searchTree.close();\n\t\t} else if (ev.ctrlKey) {\n\t\t\tif (content.search) {\n\t\t\t\tif (keyCode === 39) { // Right arrow\n\t\t\t\t\tcontent.searchTree.next();\n\t\t\t\t} else if (keyCode === 37) { //Left Arrow\n\t\t\t\t\tcontent.searchTree.prev();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (keyCode === 191) { // Ctrl+/\n\t\t\t\tsearchbox.focus();\n\t\t\t\twindow.scrollTo(0, 0);\n\t\t\t}\n\t\t}\n\t}\n};\n\nfunction treeGroup () {}\n\ntreeGroup.prototype = {\n\tselect: function(section) {\n\t\tif (section && this.selected !== section) {\n\t\t\tlocation.hash = \"search?s=\" + encodeURIComponent(content.search) + searchIncludeHash() + \"&l=\" + section;\n\t\t\tsearchtextElem.addClass(\"selected\");\n\t\t}\n\t},\n\tunselect: function() {\n\t\tlocation.hash = \"search?s=\" + encodeURIComponent(content.search) + searchIncludeHash();\n\t\tsearchtextElem.removeClass(\"selected\");\n\t},\n\tchanging: function(ev, eventArgs) {\n\t\tvar searchTerm, newSearch,\n\t\t\tnoSearch = \" \";\n\t\tif (eventArgs.value || eventArgs.oldValue) {\n\t\t\tsearchTerm = eventArgs.value;\n\t\t\tif (ev.keyCode === 13 && searchTerm && !content.editable) {\n\t\t\t\tnewSearch = content.search !== searchTerm;\n\t\t\t\tsearchTerm = \"#search?s=\" + encodeURIComponent(searchTerm) + searchIncludeHash();\n\t\t\t\tif (location.hash !== searchTerm) {\n\t\t\t\t\tlocation.hash = searchTerm;\n\t\t\t\t\t$.observable(content).setProperty(\"noSearch\", newSearch ? \"Loading...\" : \"\");\n\t\t\t\t}\n\t\t\t\treturn; // Set content.search to value in text box.\n\t\t\t}\n\t\t\tif (searchTerm !== content.search) {\n\t\t\t\tif (searchTerm) {\n\t\t\t\t\tnoSearch = \"<b>Enter</b>: Search...<br/><b>Escape</b>: Quit<br/><b>Ctrl+Left/Right Arrow</b>: Prev/Next result\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnoSearch = \"\";\n\t\t\t}\n\t\t}\n\t\t$.observable(content).setProperty(\"noSearch\", noSearch);\n\t\treturn false;\n\t},\n\tprev: function() {\n\t\t$(\"#prev\").focus();\n\t\tvar newIndex = this.sectionIndex === undefined ? content.filterlen - 1 : this.sectionIndex - 1;\n\t\tif (newIndex >= 0) {\n\t\t\tthis.select(content.filter[newIndex].section);\n\t\t} else if (newIndex === -1) {\n\t\t\tthis.unselect();\n\t\t}\n\t},\n\tnext: function() {\n\t\t$(\"#next\").focus();\n\t\tvar newIndex = this.sectionIndex === undefined ? 0 : this.sectionIndex + 1;\n\t\tif (newIndex < content.filterlen) {\n\t\t\tthis.select(content.filter[newIndex].section);\n\t\t} else if (newIndex === content.filterlen) {\n\t\t\tthis.unselect();\n\t\t}\n\t},\n\tclose: function() {\n\t\tvar catName = searchRegex.exec(location.hash);\n\t\tlocation.hash = catName && catName[7] || topCategoryName;\n\t},\n\tmouseenter: function(topicName, ev, eventArgs) { // Hover over a search target section\n\t\tvar section = eventArgs.linkCtx.data;\n\n\t\t$.observable(content).setProperty({\n\t\t\thoverText: section.text, // Set section text on hover div, which will also make it visible\n\t\t\thoverTopicSel: this.topicName === topicName // True for search section within the currently selected topic - sets class for colors.\n\t\t});\n\t\thoverTextElem\n\t\t\t.show()\n\t\t\t.offset({top: eventArgs.linkCtx.elem.offsetTop + searchNavElem.offset().top - searchNavElem.scrollTop()});\n\t},\n\tmouseleave: function(ev, eventArgs) {\n\t\thoverTextElem.hide();\n\t},\n\tmousewheel: function(ev, eventArgs) {\n\t\thoverTextElem.hide();\n\t\tev.preventDefault();\n\t\tsearchNavElem.scrollTop(searchNavElem.scrollTop() + ev.originalEvent.deltaY);\n\t},\n\tclick: function(ev, eventArgs) { // Click on overlay: \"#hoverText\"\n\t\tvar leftTarget = searchNavElem.position().left + 10;\n\t\thoverTextElem.hide();\n\t\tisSearchTreeSelectionChange = true;\n\t\tthis.select($.view(document.elementFromPoint(leftTarget, ev.clientY)).data.section);\n\t}\n};\n\nfunction searchIncludeHash() {\n\tvar hash = \"\";\n\tif (!(searchInclude.jsr && searchInclude.jsv && searchInclude.smp && searchInclude.txt)) {\n\t\thash += \"&f=\"\n\t\t+ (searchInclude.jsr ? \"\" : \"jsr-\")\n\t\t+ (searchInclude.jsv ? \"\" : \"jsv-\")\n\t\t+ (searchInclude.smp ? \"\" : \"smp-\")\n\t\t+ (searchInclude.txt ? \"\" : \"txt-\");\n\t}\n\treturn hash;\n}\n\nfunction searchContent(searchValue) {\n\tvar i, category, foundInCat, foundInCats,\n\t\tcategories = content.categories,\n\t\tl = categories.length;\n\tcontent.filter = [];\n\t$.observable(content).setProperty(\"searchtext\", \"\");\n\tsearchtextElem && searchtextElem.removeClass(\"selected\");\n\tfor (i=1; categories && i<l; i++) {\n\t\tcategory = categories[i];\n\t\tfoundInCat = undefined;\n\t\tif ((category.filter !== \"jsr\" || searchInclude.jsr)\n\t\t\t&& (category.filter !== \"jsv\" || searchInclude.jsv)\n\t\t\t&& !category.hidden\n\t\t\t&& searchCat(category, searchValue.toLowerCase(), content[category.name], content.find[category.name])) {\n\t\t\tfoundInCat = true;\n\t\t\tfoundInCats = true;\n\t\t}\n\t\t$.observable(category).setProperty(\"filtered\", foundInCat);\n\t}\n\t$.observable(content).setProperty({\n\t\tnoSearch: foundInCats || !searchValue ? \"\" : \"No results found for <span class='searchterm'>\" + searchValue + \"</span>...\",\n\t\tfilterlen: content.filter.length\n\t});\n}\n\nfunction searchCat(category, search, topCatContent, topCatFindContent) {\n\tvar i, l, found, foundInTopic, foundInSubCat, categories, subCategory;\n\tif (search && (categories = category.categories)) {\n\t\tl = categories.length;\n\t\tfor (i=0; categories && i<l; i++) {\n\t\t\tsubCategory = categories[i];\n\t\t\tfoundInSubCat = foundInTopic = undefined;\n\t\t\tif ((subCategory.filter !== \"jsr\" || searchInclude.jsr)\n\t\t\t\t&& (subCategory.filter !== \"jsv\" || searchInclude.jsv)\n\t\t\t\t&& !subCategory.hidden) {\n\t\t\t\tfoundInTopic = searchTopic(subCategory.name, search, topCatContent, topCatFindContent);\n\t\t\t\tfoundInSubCat = searchCat(subCategory, search, topCatContent, topCatFindContent);\n\t\t\t\tif (foundInTopic && foundInTopic.length || foundInSubCat) {\n\t\t\t\t\tfound = foundInTopic;\n\t\t\t\t} else {\n\t\t\t\t\tfoundInTopic = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\t$.observable(subCategory).setProperty(\"filtered\", foundInTopic);\n\t\t}\n\t}\n\treturn found;\n}\n\nfunction searchTopic(topicName, text, topCatContent, topCatFindContent) {\n\tvar i, l, index, displayText, ind, section, preText, postText, filtered, sectionId, searchItem, findSection, searchAnchor,\n\t\ttopic = topCatContent[topicName],\n\t\tfindTopic = topCatFindContent[topicName];\n\tif (findTopic) {\n\t\tl = findTopic.sections.length;\n\t\tfiltered = [];\n\t\tif ((topic.filter !== \"jsr\" || searchInclude.jsr)\n\t\t\t&& (topic.filter !== \"jsv\" || searchInclude.jsv)) {\n\t\t\tfor (i=0; i<l; i++) {\n\t\t\t\tsection = topic.sections[i];\n\t\t\t\tfindSection = findTopic.sections[i];\n\t\t\t\tsearchAnchor = undefined;\n\t\t\t\tif (section && findSection.text && (section._type === \"sample\" && searchInclude.smp || section._type !== \"sample\" && searchInclude.txt)) {\n\t\t\t\t\tdisplayText = findSection.text;\n\t\t\t\t\tindex = displayText.toLowerCase().indexOf(text);\n\t\t\t\t\tif (index + 1) {\n\t\t\t\t\t\tpreText = displayText.substring(index - 35, index);\n\t\t\t\t\t\tif (ind = (preText.lastIndexOf(\"\\n\") + 1) || (preText.search(/\\s/) + 1)) {\n\t\t\t\t\t\t\tpreText = preText.slice(ind);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpostText = displayText.substr(index + text.length, 210 - text.length - preText.length);\n\t\t\t\t\t\tif (ind = postText.indexOf(\"\\n\") + 1) {\n\t\t\t\t\t\t\tpostText = postText.slice(0, ind - 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsectionId = topicName + \"@\" + content.filter.length;\n\t\t\t\t\t\tsearchAnchor = \"#search?s=\" + encodeURIComponent(text) + searchIncludeHash() + \"&l=\" + sectionId;\n\t\t\t\t\n\t\t\t\t\t\t$.observable(section).setProperty(\"searchAnchor\", \"#search?s=\" + encodeURIComponent(text) + searchIncludeHash() + \"&l=\" + sectionId);\n\t\t\t\t\t\tsearchItem = {\n\t\t\t\t\t\t\tsection: sectionId,\n\t\t\t\t\t\t\tsearchTerm: htmlConverter(displayText.substr(index, text.length)), \n\t\t\t\t\t\t\ttext: htmlConverter(preText)\n\t\t\t\t\t\t\t\t+ \"<span class='searchterm'>\"\n\t\t\t\t\t\t\t\t\t+ htmlConverter(displayText.substr(index, text.length))\n\t\t\t\t\t\t\t\t+ \"</span>\"\n\t\t\t\t\t\t\t\t+ htmlConverter(postText)\n\t\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\t\tfiltered.push(searchItem);\n\t\t\t\t\t\tcontent.filter.push(searchItem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t$.observable(section).setProperty(\"searchAnchor\", searchAnchor);\n\t\t\t}\n\t\t}\n\t\t$.observable(topic).setProperty(\"filtered\", filtered); \n\t\treturn topic.filtered;\n\t}\n}\n\nfunction clearSearch(searchValue) {\n\tvar category,\n\t\tcategories = content.categories,\n\t\tl = categories.length;\n\tcontent.filter = [];\n\twhile (categories && l-- > 1) {\n\t\tcategory = categories[l];\n\t\tcategory.filtered = undefined;\n\t\t!category.hidden && clearSearchCat(category, content[category.name]);\n\t}\n}\n\nfunction clearSearchCat(category, topCatContent) {\n\tvar l, categories, subCategory;\n\tif (categories = category.categories) {\n\t\tl = categories.length;\n\t\twhile (categories && l--) {\n\t\t\tsubCategory = categories[l];\n\t\t\tif (!subCategory.hidden) {\n\t\t\t\tsubCategory.filtered = undefined;\n\t\t\t\tclearSearchTopic(subCategory.name, topCatContent);\n\t\t\t\tclearSearchCat(subCategory, topCatContent);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction clearSearchTopic(topicName, topCatContent) {\n\tvar l, section,\n\t\ttopic = topCatContent[topicName];\n\tif (topic) {\n\t\tl = topic.sections.length;\n\t\ttopic.filtered = undefined;\n\t\twhile (l--) {\n\t\t\tsection = topic.sections[l];\n\t\t\t$.observable(section).setProperty(\"searchAnchor\", undefined);\n\t\t}\n\t}\n}\n\nsectionTemplates.editview = sectionTemplates.detail = sectionTemplates.summary; // for now\nsectionTag.templates = sectionTemplates;\n\n//#endregion\n\n//#region HELPER FUNCTIONS\n\nfunction getCategory(catName, searchTerm, searchExclude) {\n\tfunction getCategoryNode(name, subcategories, parent) {\n\t\tif (selectedCategory = categories[0][name]) {\n\t\t\treturn topCategory = homeCategory = selectedCategory;\n\t\t}\n\t\ttopCategory = undefined;\n\n\t\tstack.push(parent);\n\t\tvar category,\n\t\t\tl = subcategories.length;\n\t\twhile (l--) {\n\t\t\tcategory = subcategories[l];\n\t\t\tif (category.name === name || category.categories && (category = getCategoryNode(name, category.categories, category))) {\n\t\t\t\twhile (parent = stack.pop()) {\n\t\t\t\t\ttopCategory = parent;\n\t\t\t\t\tif (!parent.expanded) {\n\t\t\t\t\t\t$.observable(parent).setProperty(\"expanded\", true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn category;\n\t\t\t}\n\t\t}\n\t\tstack.pop();\n\t}\n\tvar topCat, // specific to this getScript call\n\t\tstack = [],\n\t\tcategories = content.categories,\n\t\toldTopCategory = topCategoryName,\n\t\tloadedPromise = $.Deferred();\n\n\tselectedCategory = catName && getCategoryNode(catName, categories) || categories[0].jsrender;\n\ttopCategory = topCategory || selectedCategory;\n\tif (searchTerm && !catName) {\n\t\ttopCategory = searchCategory;\n\t\tif (page) {\n\t\t\tpage.category = undefined;\n\t\t}\n\t}\n\n\ttopCategoryName = topCategory.name;\n\n\tif (topCategoryName !== oldTopCategory) {\n\t\tif (oldTopCategory) {\n\t\t\t$(\"#id-\" + oldTopCategory)\n\t\t\t\t.removeClass(\"selected\")\n\t\t\t\t.addClass(\"unselected\");\n\t\t}\n\t\t$(\"#id-\" + topCategoryName)\n\t\t\t.removeClass(\"unselected\")\n\t\t\t.addClass(\"selected\");\n\t}\n\n\tif (content.topCategory !== topCategory) {\n\t\tcontent.catName = catName; // Don't change this observably, to avoid triggering an additional UI update before topCategory has been set.\n\t\t$.observable(content).setProperty(\"topCategory\", topCategory);\n\t}\n\n\tif (searchTerm) {\n\t\tif (content.searched !== searchTerm || content.searchExclude !== searchExclude) {\n\t\t\tloadAllContent()\n\t\t\t\t.then(function() {\n\t\t\t\t\tloadAllContent(\"find\")\n\t\t\t\t\t\t.then(function() {\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tsearchContent(searchTerm);\n\t\t\t\t\t\t\t\t$.observable(content).setProperty(\"searched\", searchTerm);\n\t\t\t\t\t\t\t\tcontent.searchExclude = searchExclude;\n\t\t\t\t\t\t\t\tloadedPromise.resolve();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t} else {\n\t\t\tloadedPromise.resolve();\n\t\t}\n\t} else {\n\t\tif (!topCategory.loaded && !topCategory.loading) {\n\t\t\ttopCategory.loading = \" \"; // true, but render blank until after timeout\n\t\t\ttopCat = topCategory; // Specific to this getCategory() call. (Global topCategory var may change before then() returns)\n\n\t\t\t$.getScript(\"documentation/contents-\" + topCategory.name + \".min.js\")\n\t\t\t\t.then(function() {\n\t\t\t\t\t$.observable(topCat).setProperty(\"loaded\", true);\n\t\t\t\t\tloadedPromise.resolve();\n\t\t\t\t});\n\t\t} else if (topCategory.loaded) {\n\t\t\tif (content.searched) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tclearSearch(); // lazy clear search annotations from content\n\t\t\t\t\t$.observable(content).setProperty({\n\t\t\t\t\t\tsearch: undefined,\n\t\t\t\t\t\tfilterlen: 0\n\t\t\t\t\t});\n\t\t\t\t\tcontent.searched = undefined;\n\t\t\t\t});\n\t\t\t}\n\t\t\tloadedPromise.resolve();\n\t\t}\n\t}\n\treturn loadedPromise.promise();\n}\n\nfunction fetchCategory() {\n\tsave();\n\n\tvar categoryName, searchTerm, sectionIndex, searchExclude,\n\t\toldTopCategory = topCategory,\n\t\toldCategory = selectedCategory,\n\t\tlochash = location.hash;\n\n\tif (history && history.replaceState) { // In IE9 history.replaceState not supported\n\t\tif (history.state && history.state.url === document.URL) {\n\t\t\thistoryIndex = history.state.index;\n\t\t\tif (historyStates[historyIndex]) {\n\t\t\t\thistory.replaceState(historyStates[historyIndex], \"\")\n\t\t\t} else {\n\t\t\t\thistoryStates[historyIndex] = history.state;\n\t\t\t}\n\t\t} else {\n\t\t\thistoryIndex++;\n\t\t\tvar newState = historyStates[historyIndex] = {\n\t\t\t\turl: document.URL,\n\t\t\t\tindex: historyIndex\n\t\t\t};\n\n\t\t\thistory.replaceState(newState, \"\")\n\n\t\t\tif (historyStates[historyIndex - 1]) {\n\t\t\t\thistoryStates[historyIndex - 1].scroll = $(window).scrollTop();\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!lochash || lochash === \"#home\") {\n\t\tlochash = \"#\" + (homeCategory && homeCategory.key || \"jsrender\");\n\t}\n\tcategoryName = searchRegex.exec(lochash);\n\n\tif (categoryName[1]) {\n\t\t$.observable(searchInclude).setProperty({\n\t\t\tjsr: !categoryName[3],\n\t\t\tjsv: !categoryName[4],\n\t\t\tsmp: !categoryName[5],\n\t\t\ttxt: !categoryName[6]\n\t\t});\n\t\t$.observable(content).setProperty(\"search\", searchTerm = decodeURIComponent(categoryName[1]));\n\t}\n\n\tsectionIndex = categoryName[8];\n\tsearchExclude = categoryName[2];\n\tcategoryName = categoryName[7];\n\n\treturn getCategory(categoryName, searchTerm, searchExclude)\n\t\t.then(function() {\n\t\t\tif (page) {\n\t\t\t\tvar newTopCat = oldTopCategory !== topCategory;\n\t\t\t\ttopCategoryName = topCategory.name;\n\t\t\t\tif (topCategoryName !== \"home\" && !content[topCategoryName]) {\n\t\t\t\t\tthrow topCategoryName + \" not loaded. Ensure category.loaded not saved as 'true'...\";\n\t\t\t\t}\n\t\t\t\t$.observable(page).setProperty({\n\t\t\t\t\tcategory: selectedCategory\n\t\t\t\t});\n\n\t\t\t\tif (newTopCat) {\n\t\t\t\t\toldTopCategory.loading = \"\"; // false\n\t\t\t\t\tif (oldTopCategory && oldTopCategory.key) {\n\t\t\t\t\t\t$(\"#logo-\" + oldTopCategory.key)\n\t\t\t\t\t\t\t.removeClass(\"selected\")\n\t\t\t\t\t\t\t.addClass(\"unselected\");\n\t\t\t\t\t}\n\t\t\t\t\tif (topCategory.key) {\n\t\t\t\t\t\t$(\"#logo-\" + topCategory.key)\n\t\t\t\t\t\t\t.removeClass(\"unselected\")\n\t\t\t\t\t\t\t.addClass(\"selected\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpage.navTo(lochash, newTopCat || oldCategory !== selectedCategory);\n\t\t\t} else {\n\t\t\t\tinitPageParams = {catName: categoryName, searchTerm: searchTerm, section: sectionIndex};\n\t\t\t}\n\t\t});\n}\n\nfunction initPage(categoryName, searchTerm, sectionIndex) {\n\n\t$.observable(content).setProperty({\n\t\tsearchTitle: searchTerm && categoryName && content[topCategoryName][categoryName].title,\n\t\tcatName: categoryName\n\t});\n\tif (searchTerm) {\n\t\t$.observable(topSearchTree).setProperty({\n\t\t\tsectionIndex: sectionIndex && parseInt(sectionIndex),\n\t\t\ttopicName: categoryName,\n\t\t\tselected: sectionIndex && (categoryName + \"@\" + sectionIndex)\n\t\t});\n\t}\n}\n\nfunction signature(api) {\n\tvar param, i, l,\n\t\tsig = this.data,\n\t\tret = (api.object ? api.object + \".\" : \"\") + api.name;\n\n\tif (api.method) {\n\t\tret += \"(\";\n\t\tfor (i=0, l=sig.params.length; i<l; i++) {\n\t\t\tparam = sig.params[i];\n\t\t\tret += (param.optional ? \"[\" : \"\") + (i ? \", \" : \"\") + param.name + (param.optional ? \"]\" : \"\");\n\t\t}\n\t\tret += \")\";\n\t}\n\treturn ret;\n}\n\nfunction getContent(topics) {\n\tif (!topics) {\n\t\treturn \"\";\n\t}\n\tvar ret, l, topic,\n\t\tcategories = content.categories,\n\t\tname = topCategoryName,\n\t\tpath = \"JsViewsDocTopics/\" + topCategoryName,\n\t\tloaded = {},\n\t\tloading = {};\n\n\tif (topics === categories) {\n\t\tname = \"categories\";\n\t\tpath = \"JsViewsDocCategories\";\n\t\tl = topics.length;\n\t\twhile (l--) {\n\t\t\ttopic = topics[l];\n\t\t\tloaded[l] = topic.loaded;\n\t\t\tloading[l] = topic.loading;\n\t\t\tdelete topic.loading;\n\t\t\tdelete topic.loaded;\n\t\t}\n\t}\n\n\tret = \"var content = $.views.documentation.content;\\n\\ncontent.\"\n\t\t+ name + \" = content.useStorage && $.parseJSON(localStorage.getItem(\\\"\" + path + \"\\\")) ||\\n\"\n\t\t+ stringify(topics) + \";\";\n\n\tif (topics === categories) {\n\t\tl = topics.length;\n\t\twhile (l--) {\n\t\t\ttopics[l].loading = loading[l];\n\t\t\ttopics[l].loaded = loaded[l];\n\t\t}\n\t}\n\treturn ret;\n}\n\nfunction stringify(val) {\n\treturn JSON.stringify(val, null, '  ');\n}\n\nfunction parse(val) {\n\tvar data;\n\ttry {\n\t\teval(\"data=\" + val + \";\");\n\t\treturn data;\n\t} catch (e) {\n\t}\n}\n\nfunction save() {\n\tif (content.editable) {\n\t\tvar topics, category,\n\t\t\tcategories = content.categories,\n\t\t\tl = categories.length,\n\t\t\ttextareas = page.contents(true, \".savetext\"),\n\t\t\tloaded = {},\n\t\t\tloading = {},\n\t\t\tloadedfind = {},\n\t\t\tloadingfind = {};\n\n\t\twhile (l-- > 1) {\n\t\t\tcategory = categories[l];\n\t\t\tloaded[l] = category.loaded;\n\t\t\tloading[l] = category.loading;\n\t\t\tloadedfind[l] = category.loadedfind;\n\t\t\tloadingfind[l] = category.loadingfind;\n\t\t\tcategories[l].loaded = categories[l].loadedfind = false;\n\t\t\tcategories[l].loading = categories[l].loadingfind = \"\";\n\t\t}\n\t\tlocalStorage.setItem(\"JsViewsDocCategories\", stringify(categories));\n\t\tl = categories.length;\n\t\twhile (l-- > 1) {\n\t\t\tcategories[l].loaded = loaded[l];\n\t\t\tcategories[l].loading = loading[l];\n\t\t\tcategories[l].loadedfind = loadedfind[l];\n\t\t\tcategories[l].loadingfind = loadingfind[l];\n\t\t}\n\t\ttopics = content[topCategoryName];\n\t\tif (topics) {\n\t\t\tlocalStorage.setItem(\"JsViewsDocTopics/\" + topCategoryName, stringify(topics));\n\t\t}\n\t\ttextareas[0].value = getContent(topics);\n\t\ttextareas[1].value = getContent(categories);\n\t}\n}\n\n//#endregion\n\n//#region PAGE INITIALIZATION\n\n$.views.tags({\n\tpage: pageTag,\n\tsection: sectionTag,\n\tsearchTree: searchTreeTag,\n\tsearchTreeNode: searchTreeNodeTag\n});\n\n$.views.helpers({\n\tstringify: stringify\n});\n\n$.views.converters({\n\tstringify: stringify,\n\tgetContent: getContent,\n\tsyntax: function(val) {\n\t\treturn \"<pre>\" + hljs.highlight(this.tagCtx.args[1], val).value + \"</pre>\";\n\t},\n\tparse: parse,\n\tmd: function(val) {\n\t\treturn md.render(val);\n\t}\n});\n\ntopSearchTree = content.searchTree = new treeGroup();\n\tsetTimeout(function() {\n\t\t$(\"#initial-load\").html(\"Loading...\");\n\t}, 2000);\n\nfetchCategory()\n\t.then(function() {\n\t\tvar selectedLogo, categoryName,\n\t\tcategories = content.categories,\n\t\tl = categories.length;\n\n\t\twhile (l--) {\n\t\t\tcategories[l].loadedfind = categories[l].loadingfind = undefined;\n\t\t}\n\n\t\tcontent.topCategory = topCategory || selectedCategory;\n\n\t\t//================ Load Page ================\n\t\ttemplates.page.link(\"#id-content\", content, {templates: templates});\n\n\t\tsearchtextElem = $(\"#searchtext\");\n\t\tsearchbox = $(\"#id-searchbox\");\n\t\tsearchNavElem = $(\".searchnav\");\n\t\tsideNavElem = $(\".sidenav\");\n\t\thoverTextElem = $(\"#hovertext\");\n\n\t\tif ('scrollRestoration' in history) {\n\t\t\thistory.scrollRestoration = 'manual';\n\t\t}\n\t\t$(window)\n\t\t\t.on('hashchange', fetchCategory)\n\t\t\t.on('unload', save);\n\n\t\t$.observe(searchInclude, \"jsr\", \"jsv\", \"smp\", \"txt\", function(ev, eventArgs){\n\t\t\tlocation.hash = \"search?s=\" + searchRegex.exec(location.hash)[1] + searchIncludeHash();\n\t\t});\n\n\t\t$(\"#logo-\" + topCategory.key)\n\t\t\t.removeClass(\"unselected\")\n\t\t\t.addClass(\"selected\");\n\n\t\tselectedLogo = $(\".main-item.selected\");\n\n\t\tpage.navTo(location.hash);\n\n\t\t$(\".main-item\").on(\"click\", function() {\n\t\t\tselectedLogo.removeClass(\"selected\").addClass(\"unselected\");\n\t\t\tselectedLogo = $(this).addClass(\"selected\").removeClass(\"unselected\");\n\t\t\tlocation.hash = this.id.slice(5);\n\t\t});\n\t\tif (!loadedAll) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tloadAllContent(); // lazy load other content in the background\n\t\t\t});\n\t\t}\n\t});\n\nfunction loadAllContent(prefix) {\n\tvar categories = content.categories,\n\t\tl = categories.length,\n\t\tnotLoaded = 0,\n\t\tallLoadedPromise = $.Deferred(),\n\t\tloadingLabel = \"loading\" + (prefix||\"\"),\n\t\tloadedLabel = \"loaded\" + (prefix||\"\");\n\tprefix = prefix || \"contents\";\n\tloadedAll = true;\n\twhile (l-- > 1) {\n\t\t(function() { // Equivalent to $.proxy. Ensure category is specific to this call\n\t\t\tvar category = categories[l];\n\t\t\tif (!category.hidden && !(prefix===\"contents\" ? content : content[prefix])[category.name]) {\n\t\t\t\tnotLoaded++;\n\t\t\t\tcategory[loadingLabel] = \" \";\n\t\t\t\t$.getScript(\"documentation/\" + prefix + \"-\" + category.name + \".min.js\")\n\t\t\t\t\t.then(function() {\n\t\t\t\t\t\t$.observable(category).setProperty(loadedLabel, true);\n\t\t\t\t\t\tcategory.loading = \"\";\n\t\t\t\t\t\tnotLoaded--;\n\t\t\t\t\t\tif (!notLoaded) {\n\t\t\t\t\t\t\tallLoadedPromise.resolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t})();\n\t}\n\tif (!notLoaded) {\n\t\tallLoadedPromise.resolve();\n\t}\n\treturn allLoadedPromise.promise();\n}\n//#endregion\n})(this, this.jQuery);\n"]}